<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Spring</title>
  <link rel="alternate" href="https://spring.io/blog" />
  <link rel="self" href="https://spring.io/blog.atom" />
  <id>http://spring.io/blog.atom</id>
  <icon>https://spring.io/favicon.ico</icon>
  <updated>2021-12-17T08:00:00Z</updated>
  <entry>
    <title>Client Side Development with Spring Boot Applications</title>
    <link rel="alternate" href="https://spring.io/blog/2021/12/17/client-side-development-with-spring-boot-applications" />
    <category term="engineering" label="Engineering" />
    <author>
      <name>Dave Syer</name>
    </author>
    <id>tag:spring.io,2021-12-17:4648</id>
    <updated>2021-12-17T08:00:00Z</updated>
    <content type="html">&lt;div id="preamble"&gt;
&lt;div class="sectionbody"&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;This article explores the different options that Spring Boot developers have for using Javascript and CSS on the client (browser) side of their application. Part of the plan is to explore some Javascript libraries that play well in the traditional server-side-rendered world of Spring web applications. Those libraries tend to have a light touch for the application developer, in the sense that they allow you to completely avoid Javascript, but still have nice a progressive "modern" UI. We also look at some more "pure" Javascript tools and frameworks. It&amp;#8217;s kind of a spectrum, so as a TL;DR here is a list of the &lt;a href="https://github.com/dsyer/spring-boot-js-demo"&gt;sample apps&lt;/a&gt;, in rough order of low to high Javascript content:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="ulist"&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;htmx&lt;/code&gt;: &lt;a href="https://htmx.org"&gt;HTMX&lt;/a&gt; is a library that allows you to access modern browser features directly from HTML, rather than using javascript. It is very easy to use and well suited to server-side rendering because it works by replacing sections of the DOM directly from remote responses. It seems to be well used and appreciated by the &lt;a href="https://www.python.org/"&gt;Python&lt;/a&gt; community.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;turbo&lt;/code&gt;: &lt;a href="https://turbo.hotwired.dev/"&gt;Hotwired&lt;/a&gt; (Turbo and Stimulus). Turbo is a bit like HTMX. It is widely used and supported well in &lt;a href="https://rubyonrails.org/"&gt;Ruby on Rails&lt;/a&gt;. Stimulus is a lightweight library that can be used to implement tiny bits of logic that prefer to live on the client.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;vue&lt;/code&gt;: &lt;a href="https://vuejs.org"&gt;Vue&lt;/a&gt; is also very lightweight and describes itself as "progressive" and "incrementally adoptable". It is versatile in the sense that you can use a very small amount of Javascript to do something nice, or you can push on through and use it as a full-blown framework.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;react-webjars&lt;/code&gt;: uses the &lt;a href="https://reactjs.org"&gt;React&lt;/a&gt; framework, but without a Javascript build or bundler. React is nice in that way because, like Vue, it allows you to just use it in a few small areas, without it taking over the whole source tree.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;nodejs&lt;/code&gt;: like the &lt;code&gt;turbo&lt;/code&gt; sample but using &lt;a href="https://nodejs.org"&gt;Node.js&lt;/a&gt; to build and bundle the scripts, instead of &lt;a href="https://webjars.org"&gt;Webjars&lt;/a&gt;. If you get serious about React, you will probably end up doing this, or something like it. The aim here is to use Maven to drive the build, at least optionally, so that the normal Spring Boot application development process works. Gradle would work the same.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;react&lt;/code&gt;: is the &lt;code&gt;react-webjars&lt;/code&gt; sample, but with the Javascript build steps from the &lt;code&gt;nodejs&lt;/code&gt; sample.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;There is another sample using Spring Boot and HTMX &lt;a href="https://github.com/dsyer/todowebflux"&gt;here&lt;/a&gt;. If you want to know more about React and Spring there is a &lt;a href="https://spring.io/guides/tutorials/react-and-spring-data-rest/"&gt;tutorial on the Spring website&lt;/a&gt;. There is also content on &lt;a href="https://angular.io"&gt;Angular&lt;/a&gt; via another &lt;a href="https://spring.io/guides/tutorials/spring-security-and-angular-js/"&gt;tutorial on the Spring website&lt;/a&gt; and the related getting started content &lt;a href="https://github.com/dsyer/spring-boot-angular"&gt;here&lt;/a&gt;. If you are interested in Angular and Spring Boot &lt;a href="https://github.com/mraible"&gt;Matt Raible&lt;/a&gt; has a &lt;a href="https://www.infoq.com/minibooks/angular-mini-book/"&gt;Minibook&lt;/a&gt;. The &lt;a href="https://spring.io"&gt;spring.io&lt;/a&gt; website (&lt;a href="https://github.com/spring-io/sagan"&gt;source code&lt;/a&gt;) is also a Node.js build and uses a completely different toolchain and set of libraries. Another source of alternative approaches is &lt;a href="https://www.jhipster.tech/"&gt;JHipster&lt;/a&gt; which also has support for a few of the libraries used here. Finally the &lt;a href="https://github.com/spring-projects/spring-petclinic"&gt;Petclinic&lt;/a&gt;, while it has no Javascript, does have some client side code in the stylesheets and a build process driven from Maven.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="toc" class="toc"&gt;
&lt;div id="toctitle"&gt;Table of Contents&lt;/div&gt;
&lt;ul class="sectlevel1"&gt;
&lt;li&gt;&lt;a href="#getting-started"&gt;Getting Started&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#narrowing-the-choices"&gt;Narrowing the Choices&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#create-a-new-application"&gt;Create a New Application&lt;/a&gt;
&lt;ul class="sectlevel2"&gt;
&lt;li&gt;&lt;a href="#webjars"&gt;Webjars&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#show-me-some-javascript"&gt;Show Me Some Javascript&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#normalizing-resource-paths"&gt;Normalizing Resource Paths&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#adding-tabs"&gt;Adding Tabs&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#dynamic-content-with-htmx"&gt;Dynamic Content with HTMX&lt;/a&gt;
&lt;ul class="sectlevel2"&gt;
&lt;li&gt;&lt;a href="#sse-streams"&gt;SSE Streams&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#replacing-and-enhancing-html-dynamically"&gt;Replacing and Enhancing HTML Dynamically&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#boosting-links-and-forms"&gt;Boosting Links and Forms&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#dynamic-content-with-hotwired"&gt;Dynamic Content with Hotwired&lt;/a&gt;
&lt;ul class="sectlevel2"&gt;
&lt;li&gt;&lt;a href="#replacing-and-enhancing-html-dynamically-2"&gt;Replacing and Enhancing HTML Dynamically&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#server-sent-events"&gt;Server Sent Events&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#stimulus"&gt;Stimulus&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#add-some-charts"&gt;Add Some Charts&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#code-block-hiding"&gt;Code Block Hiding&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#dynamic-content-with-vue"&gt;Dynamic Content With Vue&lt;/a&gt;
&lt;ul class="sectlevel2"&gt;
&lt;li&gt;&lt;a href="#server-side-fragments"&gt;Server Side Fragments&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#plain-javascript-with-sse-stream"&gt;Plain Javascript with SSE Stream&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#dynamic-content-with-react"&gt;Dynamic Content with React&lt;/a&gt;
&lt;ul class="sectlevel2"&gt;
&lt;li&gt;&lt;a href="#html-in-javascript-xjs"&gt;HTML in Javascript: XJS&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#basic-event-and-user-input-handling"&gt;Basic Event and User Input Handling&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#chart-chooser"&gt;Chart Chooser&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#server-side-fragments-2"&gt;Server Side Fragments&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#building-and-bundling-with-node-js"&gt;Building and Bundling with Node.js&lt;/a&gt;
&lt;ul class="sectlevel2"&gt;
&lt;li&gt;&lt;a href="#install-node-js"&gt;Install Node.js&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#adding-npm-packages"&gt;Adding NPM Packages&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#building-with-rollup"&gt;Building with Rollup&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#building-css-with-sass"&gt;Building CSS with Sass&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#bundling-a-react-app-with-node-js"&gt;Bundling a React App with Node.js&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#conclusion"&gt;Conclusion&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="sect1"&gt;
&lt;h2 id="getting-started"&gt;&lt;a class="anchor" href="#getting-started"&gt;&lt;/a&gt;Getting Started&lt;/h2&gt;
&lt;div class="sectionbody"&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;All the samples can be built and run with standard Spring Boot processes (e.g. see &lt;a href="https://spring.io/guides/gs/spring-boot/"&gt;this getting started guide&lt;/a&gt;). The Maven wrapper is in the parent directory so from each sample on the command line you can &lt;code&gt;../mvnw spring-boot:run&lt;/code&gt; to run the apps or &lt;code&gt;../mvnw package&lt;/code&gt; to get an executable JAR. E.g.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code&gt;$ cd htmx
$ ../mvnw package
$ java -jar target/js-demo-htmx-0.0.1.jar

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::            (v2.6.0)

2021-12-08 08:50:30.517  INFO 2385363 --- [           main] com.example.jsdemo.JsDemoApplication     : Starting JsDemoApplication using Java 11.0.7 on tower with PID 2385363 (/home/dsyer/dev/demo/workspace-daily/js-demo/target/classes started by dsyer in /home/dsyer/dev/demo/workspace-daily/js-demo)
2021-12-08 08:50:30.519  INFO 2385363 --- [           main] com.example.jsdemo.JsDemoApplication     : No active profile set, falling back to default profiles: default
2021-12-08 08:50:31.501 DEBUG 2385363 --- [           main] s.w.r.r.m.a.RequestMappingHandlerMapping : 6 mappings in 'requestMappingHandlerMapping'
2021-12-08 08:50:31.519 DEBUG 2385363 --- [           main] o.s.w.r.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /node_modules/**] in 'resourceHandlerMapping'
2021-12-08 08:50:31.641 DEBUG 2385363 --- [           main] o.s.w.r.r.m.a.ControllerMethodResolver   : ControllerAdvice beans: none
2021-12-08 08:50:31.666 DEBUG 2385363 --- [           main] o.s.w.s.adapter.HttpWebHandlerAdapter    : enableLoggingRequestDetails='false': form data and headers will be masked to prevent unsafe logging of potentially sensitive data
2021-12-08 08:50:31.829  INFO 2385363 --- [           main] o.s.b.web.embedded.netty.NettyWebServer  : Netty started on port 8080
2021-12-08 08:50:31.841  INFO 2385363 --- [           main] com.example.jsdemo.JsDemoApplication     : Started JsDemoApplication in 0.97 seconds (JVM running for 1.209)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;The &lt;a href="https://github.com/dsyer/spring-boot-js-demo"&gt;Github project&lt;/a&gt; works well in &lt;a href="https://docs.github.com/en/codespaces"&gt;Codespaces&lt;/a&gt; and was developed mostly locally with &lt;a href="https://code.visualstudio.com/docs/languages/java"&gt;VSCode&lt;/a&gt;. Feel free to use whatever IDE you prefer though, they should all work fine.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="sect1"&gt;
&lt;h2 id="narrowing-the-choices"&gt;&lt;a class="anchor" href="#narrowing-the-choices"&gt;&lt;/a&gt;Narrowing the Choices&lt;/h2&gt;
&lt;div class="sectionbody"&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Browser application development is a huge landscape of ever-changing options and choices. It would be impossible to present all those options in one coherent picture, so we have intentionally limited the scope of tools and frameworks we look at. We start with a bias of wanting to find something that works with a light touch, or is at least incrementally adoptable. There is also the previously mentioned bias towards libraries that work well with server-side renderers - those that deal with fragments and subtrees of HTML. Also, we have used Javascript &lt;a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules"&gt;ESM&lt;/a&gt; wherever possible, since most browsers now support that. However, most libraries that publish a module to &lt;code&gt;import&lt;/code&gt; also have an equivalent bundle you can &lt;code&gt;require&lt;/code&gt;, so you can always stick to that if you prefer.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Many of the samples use &lt;a href="https://webjars.org"&gt;Webjars&lt;/a&gt; to deliver the Javascript (and CSS) assets to the client. This is very easy and sensible for an application with a Java backend. Not all the samples use Webjars though, and it wouldn&amp;#8217;t be hard to convert the ones that do to either use a CDN (like &lt;a href="https://unpkg.com"&gt;unpkg.com&lt;/a&gt; or &lt;a href="https://jsdeliver.com"&gt;jsdelivr.com&lt;/a&gt;) or a build time Node.js bundler. The samples here that do have a bundler use &lt;a href="https://rollupjs.org/guide/en/"&gt;Rollup&lt;/a&gt;, but you could just as well use &lt;a href="https://webpack.js.org/"&gt;Webpack&lt;/a&gt;, for instance. They also use straight &lt;a href="https://www.npmjs.com/"&gt;NPM&lt;/a&gt; and not &lt;a href="https://classic.yarnpkg.com/"&gt;Yarn&lt;/a&gt; or &lt;a href="https://gulpjs.com/"&gt;Gulp&lt;/a&gt;, which are both popular choices. All the samples use &lt;a href="https://getbootstrap.com/"&gt;Bootstrap&lt;/a&gt; for CSS, but other choices are available.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;There are also choices that can be made on the server side. We have used &lt;a href="https://docs.spring.io/spring-framework/docs/current/reference/html/web-reactive.html#spring-webflux"&gt;Spring Webflux&lt;/a&gt; but &lt;a href="https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#spring-web"&gt;Spring MVC&lt;/a&gt; would work identically. We have used Maven as a build tool, but using Gradle it would be easy to achieve the same goals. All the samples actually have a static home page (not even rendered as a template), but they all have some dynamic content, and we have chosen &lt;a href="https://github.com/samskivert/jmustache"&gt;JMustache&lt;/a&gt; for that. &lt;a href="https://www.thymeleaf.org/"&gt;Thymeleaf&lt;/a&gt; (and other templating engines) would work just as well. In fact Thymeleaf has built-in support for fragments and that can be quite useful when you are updating parts of a page dynamically, which is one of our goals. You could do that same with Mustache (probably) with a bit of work, but we didn&amp;#8217;t need it in these samples.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="sect1"&gt;
&lt;h2 id="create-a-new-application"&gt;&lt;a class="anchor" href="#create-a-new-application"&gt;&lt;/a&gt;Create a New Application&lt;/h2&gt;
&lt;div class="sectionbody"&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;To get started with Spring Boot and client-side development, let&amp;#8217;s start at the beginning, with an empty app from &lt;a href="https://start.spring.io"&gt;Spring Initializr&lt;/a&gt;. You can go to the website and download a project with web dependencies (select Webflux or WebMVC) and open it up in your IDE. Or to generate a project from the command line you can use &lt;code&gt;curl&lt;/code&gt;, starting form an empty directory:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code&gt;$ curl https://start.spring.io/starter.tgz -d dependencies=webflux -d name=js-demo | tar -xzvf -&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;We can add a really basic static home page at &lt;code&gt;src/main/resources/static/index.html&lt;/code&gt;:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;&amp;lt;!doctype html&amp;gt;
&amp;lt;html lang="en"&amp;gt;

&amp;lt;head&amp;gt;
	&amp;lt;meta charset="utf-8" /&amp;gt;
	&amp;lt;meta http-equiv="X-UA-Compatible" content="IE=edge" /&amp;gt;
	&amp;lt;title&amp;gt;Demo&amp;lt;/title&amp;gt;
	&amp;lt;meta name="description" content="" /&amp;gt;
	&amp;lt;meta name="viewport" content="width=device-width" /&amp;gt;
	&amp;lt;base href="/" /&amp;gt;
&amp;lt;/head&amp;gt;

&amp;lt;body&amp;gt;
	&amp;lt;header&amp;gt;
		&amp;lt;h1&amp;gt;Demo&amp;lt;/h1&amp;gt;
	&amp;lt;/header&amp;gt;
	&amp;lt;main&amp;gt;
		&amp;lt;div class="container"&amp;gt;
			&amp;lt;div id="greeting"&amp;gt;Hello World&amp;lt;/div&amp;gt;
		&amp;lt;/div&amp;gt;
	&amp;lt;/main&amp;gt;

&amp;lt;/body&amp;gt;

&amp;lt;/html&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;and then run the app:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code&gt;$ ./mvnw package
$ java target/js-demo-0.0.1-SNAPSHOT.jar&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;and you can see the result on &lt;a href="http://localhost:8080"&gt;localhost:8080&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="sect2"&gt;
&lt;h3 id="webjars"&gt;&lt;a class="anchor" href="#webjars"&gt;&lt;/a&gt;Webjars&lt;/h3&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;To start building client-side features, let&amp;#8217;s add some CSS out of the box from Bootstrap. We could use a CDN, like this for example in &lt;code&gt;index.html&lt;/code&gt;:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;...
&amp;lt;head&amp;gt;
	...
	&amp;lt;link rel="stylesheet" type="text/css" href="https://unpkgs.com/bootstrap/dist/css/bootstrap.min.css" /&amp;gt;
&amp;lt;/head&amp;gt;
...&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;That&amp;#8217;s really convenient, if you want to get started quickly. For some apps it might be all you need. Here we take a different approach that makes our app more self-contained, and aligns well with the Java tooling we are used to - that is to use a Webjar and package the Bootstrap libraries in our JAR file. To do that we need to add a couple of dependencies to the &lt;code&gt;pom.xml&lt;/code&gt;:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="xml"&gt;&amp;lt;dependency&amp;gt;
	&amp;lt;groupId&amp;gt;org.webjars&amp;lt;/groupId&amp;gt;
	&amp;lt;artifactId&amp;gt;webjars-locator-core&amp;lt;/artifactId&amp;gt;
&amp;lt;/dependency&amp;gt;
&amp;lt;dependency&amp;gt;
	&amp;lt;groupId&amp;gt;org.webjars.npm&amp;lt;/groupId&amp;gt;
	&amp;lt;artifactId&amp;gt;bootstrap&amp;lt;/artifactId&amp;gt;
	&amp;lt;version&amp;gt;5.1.3&amp;lt;/version&amp;gt;
&amp;lt;/dependency&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;and then in &lt;code&gt;index.html&lt;/code&gt; instead of the CDN we use a resource path inside the application:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;...
&amp;lt;head&amp;gt;
	...
	&amp;lt;link rel="stylesheet" type="text/css" href="/webjars/bootstrap/dist/css/bootstrap.min.css" /&amp;gt;
&amp;lt;/head&amp;gt;
...&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;If you rebuild and/or re-run the application you will see nice vanilla Bootstrap styles instead of the boring default browser versions. Spring Boot uses the &lt;code&gt;webjars-locator-core&lt;/code&gt; to locate the version and exact location of the resource in the classpath, and the browser sucks that stylesheet into the page.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="sect2"&gt;
&lt;h3 id="show-me-some-javascript"&gt;&lt;a class="anchor" href="#show-me-some-javascript"&gt;&lt;/a&gt;Show Me Some Javascript&lt;/h3&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Bootstrap is also a Javascript library, so we can start to use it more fully by taking advantage of that. We can add the Bootstrap library in &lt;code&gt;index.html&lt;/code&gt; like this:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;...
&amp;lt;head&amp;gt;
...
	&amp;lt;script src="/webjars/bootstrap/dist/js/bootstrap.min.js"&amp;gt;&amp;lt;/script&amp;gt;
&amp;lt;/head&amp;gt;
...&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;It doesn&amp;#8217;t do anything visible yet, but you can verify that it is loaded by the browser using the devtools view (F12 in Chrome or Firefox).&lt;/p&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;We said in the introduction that we would use ESM modules where available, and Bootstrap has one, so let&amp;#8217;s get that working. Replace the &lt;code&gt;&amp;lt;script&amp;gt;&lt;/code&gt; tag in &lt;code&gt;index.html&lt;/code&gt; with this:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;&amp;lt;script type="importmap"&amp;gt;
	{
		"imports": {
			"bootstrap": "/webjars/bootstrap/dist/js/bootstrap.esm.min.js"
		}
	}
&amp;lt;/script&amp;gt;
&amp;lt;script type="module"&amp;gt;
	import 'bootstrap';
&amp;lt;/script&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;There are two parts to this: an "importmap" and a "module". The import map is a feature of the browser allowing you to refer to ESM modules by name, mapping the name to a resource. If you run the app now and load it in the browser there should be an error in the console because the ESM bundle of Bootstrap has a dependency on &lt;a href="https://popper.js.org/"&gt;PopperJS&lt;/a&gt;:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code&gt;Uncaught TypeError: Failed to resolve module specifier "@popperjs/core". Relative references must start with either "/", "./", or "../".&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;PopperJS is not a mandatory transitive dependency of the Bootstrap Webjar, so we have to include it in our &lt;code&gt;pom.xml&lt;/code&gt;:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="xml"&gt;&amp;lt;dependency&amp;gt;
	&amp;lt;groupId&amp;gt;org.webjars.npm&amp;lt;/groupId&amp;gt;
	&amp;lt;artifactId&amp;gt;popperjs__core&amp;lt;/artifactId&amp;gt;
	&amp;lt;version&amp;gt;2.10.1&amp;lt;/version&amp;gt;
&amp;lt;/dependency&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;(Webjars use the "__" infix instead of a "@" prefix for namespaced NPM module names.) Then it can be added to the import map:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;&amp;lt;script type="importmap"&amp;gt;
	{
		"imports": {
			"bootstrap": "/webjars/bootstrap/dist/js/bootstrap.esm.min.js",
			"@popperjs/core": "/webjars/popperjs__core/lib/index.js"
		}
	}
&amp;lt;/script&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;and this will fix the console error.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="sect2"&gt;
&lt;h3 id="normalizing-resource-paths"&gt;&lt;a class="anchor" href="#normalizing-resource-paths"&gt;&lt;/a&gt;Normalizing Resource Paths&lt;/h3&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;The resource paths inside a Webjar (e.g. &lt;code&gt;/bootstrap/dist/js/bootstrap.esm.min.js&lt;/code&gt;) are not standardized - there is no naming convention that allows you to guess the location of the ESM module inside a Webjar, or an NPM module which amounts to the same thing. But there are some conventions in NPM modules that make it possible to automate: most modules have a &lt;code&gt;package.json&lt;/code&gt; with a "module" field. E.g. from Bootstrap you can find the version and the module resource path:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="json"&gt;{
  "name": "bootstrap",
  "description": "The most popular front-end framework for developing responsive, mobile first projects on the web.",
  "version": "5.1.3",
...
  "module": "dist/js/bootstrap.esm.js",
...
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;CDNs like unpkg.com make use of this information, so you can use them when you know only the ESM module name. E.g. this should work:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;&amp;lt;script type="importmap"&amp;gt;
	{
		"imports": {
			"bootstrap": "https://unpkg.com/bootstrap",
			"@popperjs/core": "https://unpkg.com/@popperjs/core"
		}
	}
&amp;lt;/script&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;It would be nice to be able to do the same with &lt;code&gt;/webjars&lt;/code&gt; resource paths. That&amp;#8217;s what the &lt;code&gt;NpmVersionResolver&lt;/code&gt; in all the samples does. You don&amp;#8217;t need it if you don&amp;#8217;t use Webjars and you can use a CDN, and you don&amp;#8217;t need it if you don&amp;#8217;t mind manually opening up all the &lt;code&gt;package.json&lt;/code&gt; files and looking for the module path. But it&amp;#8217;s nice to not have to think about that. There&amp;#8217;s a &lt;a href="https://github.com/spring-projects/spring-boot/issues/28715"&gt;feature request&lt;/a&gt; asking for this to be included in Spring Boot. Another feature of the &lt;code&gt;NpmVersionResolver&lt;/code&gt; is that it knows about the Webjars metadata, so it can resolve the version of each Webjar from the classpath, and we don&amp;#8217;t need that &lt;code&gt;webjars-locator-core&lt;/code&gt; dependency (there&amp;#8217;s an &lt;a href="https://github.com/spring-projects/spring-framework/issues/27619"&gt;open issue in Spring Framework&lt;/a&gt; to add this feature).&lt;/p&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;So in the sample the import map is like this:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;&amp;lt;script type="importmap"&amp;gt;
	{
		"imports": {
			"bootstrap": "/npm/bootstrap",
			"@popperjs/core": "/npm/@popperjs/core"
		}
	}
&amp;lt;/script&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;All you need to know is the NPM module name, and the resolver figures out how to find a resource that resolves to the ESM bundle. It uses a Webjar if there is one, and otherwise redirects to a CDN.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="admonitionblock note"&gt;
&lt;table&gt;
&lt;tr&gt;
&lt;td class="icon"&gt;
&lt;div class="title"&gt;Note&lt;/div&gt;
&lt;/td&gt;
&lt;td class="content"&gt;
Most modern browsers support modules and module maps. Those that don&amp;#8217;t can be used in our app at the cost of adding a &lt;a href="https://www.npmjs.com/package/es-module-shims"&gt;shim library&lt;/a&gt;. It is already included in the samples.
&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="sect2"&gt;
&lt;h3 id="adding-tabs"&gt;&lt;a class="anchor" href="#adding-tabs"&gt;&lt;/a&gt;Adding Tabs&lt;/h3&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;We might as well use the Bootstrap styles now we have it all working. So how about some tabs with content and a button or two to press? Sounds good. First the &lt;code&gt;&amp;lt;header/&amp;gt;&lt;/code&gt; with the tab links in &lt;code&gt;index.html&lt;/code&gt;:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;&amp;lt;header&amp;gt;
	&amp;lt;h1&amp;gt;Demo&amp;lt;/h1&amp;gt;
	&amp;lt;nav class="nav nav-tabs"&amp;gt;
		&amp;lt;a class="nav-link active" data-bs-toggle="tab" data-bs-target="#message" href="#"&amp;gt;Message&amp;lt;/a&amp;gt;
		&amp;lt;a class="nav-link" data-bs-toggle="tab" data-bs-target="#stream" href="#"&amp;gt;Stream&amp;lt;/a&amp;gt;
	&amp;lt;/nav&amp;gt;
&amp;lt;/header&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;The second (default inactive) tab is called "stream" because part of the samples will be exploring the use of Server Sent Event streams. The tab contents look like this in the &lt;code&gt;&amp;lt;main/&amp;gt;&lt;/code&gt; section:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;&amp;lt;main&amp;gt;
	&amp;lt;div class="tab-content"&amp;gt;
		&amp;lt;div class="tab-pane fade show active" id="message" role="tabpanel"&amp;gt;
			&amp;lt;div class="container"&amp;gt;
				&amp;lt;div id="greeting"&amp;gt;Hello World!&amp;lt;/div&amp;gt;
			&amp;lt;/div&amp;gt;
		&amp;lt;/div&amp;gt;
		&amp;lt;div class="tab-pane fade" id="stream" role="tabpanel"&amp;gt;
			&amp;lt;div class="container"&amp;gt;
				&amp;lt;div id="load"&amp;gt;Nothing here yet...&amp;lt;/div&amp;gt;
			&amp;lt;/div&amp;gt;
		&amp;lt;/div&amp;gt;
	&amp;lt;/div&amp;gt;
&amp;lt;/main&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Note how one of the tabs is "active" and both have ids that match up with the &lt;code&gt;data-bs-target&lt;/code&gt; attributes in the header. That&amp;#8217;s why we need some Javascript - to handle the click events on the tabs so that the correct content is revealed or hidden. The &lt;a href="https://getbootstrap.com/docs/5.1/getting-started/introduction/"&gt;Bootstrap docs&lt;/a&gt; have loads of examples of different tab styles and layouts. One nice thing about the basic features here is that they can automatically render as drop downs on a narrow device like a mobile phone (with some small changes to the class attributes in the &lt;code&gt;&amp;lt;nav/&amp;gt;&lt;/code&gt; - you can look at the &lt;a href="https://github.com/spring-projects/spring-petclinic"&gt;Petclinic&lt;/a&gt; to see how). In a browser it looks like this:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="imageblock"&gt;
&lt;div class="content"&gt;
&lt;img src="https://raw.githubusercontent.com/dsyer/spring-boot-js-demo/main/images/tabs.png" alt="tabs"&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;and of course if you click on the "Stream" tab it reveals some different content.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="sect1"&gt;
&lt;h2 id="dynamic-content-with-htmx"&gt;&lt;a class="anchor" href="#dynamic-content-with-htmx"&gt;&lt;/a&gt;Dynamic Content with HTMX&lt;/h2&gt;
&lt;div class="sectionbody"&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;We can add some dynamic content really quickly with HTMX. First we need the Javascript library, so we add it as a Webjar:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="xml"&gt;&amp;lt;dependency&amp;gt;
	&amp;lt;groupId&amp;gt;org.webjars.npm&amp;lt;/groupId&amp;gt;
	&amp;lt;artifactId&amp;gt;htmx.org&amp;lt;/artifactId&amp;gt;
	&amp;lt;version&amp;gt;1.6.0&amp;lt;/version&amp;gt;
&amp;lt;/dependency&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;and then import it in &lt;code&gt;index.html&lt;/code&gt;:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;&amp;lt;script type="importmap"&amp;gt;
	{
		"imports": {
			"bootstrap": "/npm/bootstrap",
			"@popperjs/core": "/npm/@popperjs/core",
			"htmx": "/npm/htmx.org"
		}
	}
&amp;lt;/script&amp;gt;
&amp;lt;script type="module"&amp;gt;
	import 'bootstrap';
	import 'htmx';
&amp;lt;/script&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Then we can change the greeting from "Hello World" to something that comes from user input. Let&amp;#8217;s add an input field and a button to the main tab:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;&amp;lt;div class="container"&amp;gt;
	&amp;lt;div id="greeting"&amp;gt;Hello World&amp;lt;/div&amp;gt;
	&amp;lt;input id="name" name="value" type="text" /&amp;gt;
	&amp;lt;button hx-post="/greet" hx-target="#greeting" hx-include="#name"&amp;gt;Greet&amp;lt;/button&amp;gt;
&amp;lt;/div&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;The input field is unadorned, and the button has some &lt;code&gt;hx-*&lt;/code&gt; attributes that are grabbed by the HTMX library and used to enhance the page. These ones say "when user clicks on this button, send a POST to &lt;code&gt;/greet&lt;/code&gt;, including the 'name' in the request, and render the result by replacing the content of the 'greeting'". If the user enters "Foo" in the input field, the POST has a form-encoded body of &lt;code&gt;value=Foo&lt;/code&gt; because "value" is the name of the field identified by &lt;code&gt;#name&lt;/code&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Then all we need is a &lt;code&gt;/greet&lt;/code&gt; resource in the backend:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="java"&gt;@SpringBootApplication
@RestController
public class JsDemoApplication {

	@PostMapping("/greet")
	public String greet(@ModelAttribute Greeting values) {
		return "Hello " + values.getValue() + "!";
	}

	...

	static class Greeting {
		private String value;

		public String getValue() {
			return value;
		}

		public void setValue(String value) {
			this.value = value;
		}
	}
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Spring will bind the "value" parameter in the incoming request to the &lt;code&gt;Greeting&lt;/code&gt; and we convert it to text which is then injected in the &lt;code&gt;&amp;lt;div id="greeting"/&amp;gt;&lt;/code&gt; on the page. You can use HTMX to inject plain text like this, or whole fragments of HTML. Or you can append (or prepend) to a list of existing elements, like rows in a table, or items in a list.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Here&amp;#8217;s another thing you can do:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;&amp;lt;div class="container"&amp;gt;
	&amp;lt;div id="auth" hx-trigger="load" hx-get="/user"&amp;gt;
		Unauthenticated
	&amp;lt;/div&amp;gt;
	...
&amp;lt;/div&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;This does a GET to &lt;code&gt;/user&lt;/code&gt; when the page loads and swaps the content of the element. The sample app has this endpoint and it returns "Fred" so you see it rendered like this:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="imageblock"&gt;
&lt;div class="content"&gt;
&lt;img src="https://raw.githubusercontent.com/dsyer/spring-boot-js-demo/main/images/user.png" alt="user"&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="sect2"&gt;
&lt;h3 id="sse-streams"&gt;&lt;a class="anchor" href="#sse-streams"&gt;&lt;/a&gt;SSE Streams&lt;/h3&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;There are many other neat things you can do with HTMX, and one of those is to render a &lt;a href="https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events/Using_server-sent_events#event_stream_format"&gt;Server Sent Event (SSE)&lt;/a&gt; stream. First we&amp;#8217;ll add an endpoint to the backend app:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="java"&gt;@SpringBootApplication
@RestController
public class JsDemoApplication {

	@GetMapping(path = "/stream", produces = MediaType.TEXT_EVENT_STREAM_VALUE)
	public Flux&amp;lt;String&amp;gt; stream() {
		return Flux.interval(Duration.ofSeconds(5)).map(
			value -&amp;gt; value + ":" + System.currentTimeMillis()
		);
	}

	...
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;So we have a stream of messages rendered by Spring by virtue of the &lt;code&gt;produces&lt;/code&gt; attribute on the endpoint mapping:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code&gt;$ curl localhost:8080/stream
data:0:1639472861461

data:1:1639472866461

data:2:1639472871461

...&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;HTMX can inject those messages into our page. Here&amp;#8217;s how in &lt;code&gt;index.html&lt;/code&gt; added to the "stream" tab:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;&amp;lt;div class="container"&amp;gt;
	&amp;lt;div id="load" hx-sse="connect:/stream"&amp;gt;
		&amp;lt;div id="load" hx-sse="swap:message"&amp;gt;&amp;lt;/div&amp;gt;
	&amp;lt;/div&amp;gt;
&amp;lt;/div&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;We connect to the &lt;code&gt;/stream&lt;/code&gt; using the &lt;code&gt;connect:/stream&lt;/code&gt; attribute and then pull event data out using &lt;code&gt;swap:message&lt;/code&gt;. Actually "message" is the default event type, but SSE payloads can also specify other types by including a line starting with &lt;code&gt;event:&lt;/code&gt;, and so you could have a stream that multiplexes many different event types and have them each affect the HTML in different ways.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;The endpoint in our backend above is very simple: it just sends back plain strings, but it could do more. E.g. it could send back fragments of HTML and they would be injected into the page. The sample applications do it with a custom Spring Webflux component named &lt;code&gt;CompositeViewRenderer&lt;/code&gt; (requested as a feature &lt;a href="https://github.com/spring-projects/spring-framework/issues/27652"&gt;here&lt;/a&gt; for the Framework), where &lt;code&gt;@Contoller&lt;/code&gt; method can return a &lt;code&gt;Flux&amp;lt;Rendering&amp;gt;&lt;/code&gt; (in MVC it would be &lt;code&gt;Flux&amp;lt;ModelAndView&amp;gt;&lt;/code&gt;). It enables an endpoint to stream dynamic views:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="java"&gt;@GetMapping(path = "/stream", produces = MediaType.TEXT_EVENT_STREAM_VALUE)
public Flux&amp;lt;Rendering&amp;gt; stream() {
	return Flux.interval(Duration.ofSeconds(5)).map(value -&amp;gt; Rendering.view("time")
			.modelAttribute("value", value)
			.modelAttribute("time", System.currentTimeMillis()).build());
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;This is paired with a view named "time" and the normal Spring machinery renders the model:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code&gt;$ curl localhost:8080/stream
data:&amp;lt;div&amp;gt;Index: 0, Time: 1639474490435&amp;lt;/div&amp;gt;

data:&amp;lt;div&amp;gt;Index: 1, Time: 1639474495435&amp;lt;/div&amp;gt;

data:&amp;lt;div&amp;gt;Index: 2, Time: 1639474500435&amp;lt;/div&amp;gt;

...&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;The HTML comes from a template:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;&amp;lt;div&amp;gt;Index: {{value}}, Time: {{time}}&amp;lt;/div&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;which in turn works automatically because we included JMustache on the classpath in &lt;code&gt;pom.xml&lt;/code&gt;:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="xml"&gt;&amp;lt;dependency&amp;gt;
	&amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
	&amp;lt;artifactId&amp;gt;spring-boot-starter-mustache&amp;lt;/artifactId&amp;gt;
&amp;lt;/dependency&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="sect2"&gt;
&lt;h3 id="replacing-and-enhancing-html-dynamically"&gt;&lt;a class="anchor" href="#replacing-and-enhancing-html-dynamically"&gt;&lt;/a&gt;Replacing and Enhancing HTML Dynamically&lt;/h3&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;HTMX can still do more. Instead of an SSE stream, an endpoint can return a regular HTTP response, but compose it as a set of elements to swap on the page. HTMX calls this an "out of band" swap because it involves enhancing content of elements on the page that are not the same as the one that triggered the download.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;To see this work we can add another tab with some HTMX-enabled content:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;&amp;lt;div class="tab-pane fade" id="test" role="tabpanel"&amp;gt;
	&amp;lt;div class="container"&amp;gt;
		&amp;lt;div id="hello"&amp;gt;&amp;lt;/div&amp;gt;
		&amp;lt;div id="world"&amp;gt;&amp;lt;/div&amp;gt;
		&amp;lt;button class="btn btn-primary" hx-get="/test" hx-swap="none"&amp;gt;Fetch&amp;lt;/button&amp;gt;
	&amp;lt;/div&amp;gt;
&amp;lt;/div&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Don&amp;#8217;t forget to add a nav link so the user can see this tab:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;&amp;lt;nav class="nav nav-tabs"&amp;gt;
	...
	&amp;lt;a class="nav-link" data-bs-toggle="tab" data-bs-target="#test" href="#"&amp;gt;Test&amp;lt;/a&amp;gt;
&amp;lt;/nav&amp;gt;
...&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;The new tab has a button that fetches dynamic content from &lt;code&gt;/test&lt;/code&gt; and it also sets up 2 empty divs "hello" and "world" to receive the content. The &lt;code&gt;hx-swap="none"&lt;/code&gt; is important - it tells HTMX not to replace the content of the element that triggered the GET.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;If we have an endpoint that returns this:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code&gt;$ curl localhost:8080/test
&amp;lt;div id="hello" hx-swap-oob="true"&amp;gt;Hello&amp;lt;/div&amp;gt;
&amp;lt;div id="world" hx-swap-oob="true"&amp;gt;World&amp;lt;/div&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;then the page renders like this (after the "Fetch" button is pressed):&lt;/p&gt;
&lt;/div&gt;
&lt;div class="imageblock"&gt;
&lt;div class="content"&gt;
&lt;img src="https://raw.githubusercontent.com/dsyer/spring-boot-js-demo/main/images/test.png" alt="test"&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;A simple implementation of this endpoint would be&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="java"&gt;@GetMapping(path = "/test")
public String test() {
	return "&amp;lt;div id=\"hello\" hx-swap-oob=\"true\"&amp;gt;Hello&amp;lt;/div&amp;gt;\n"
		+ "&amp;lt;div id=\"world\" hx-swap-oob=\"true\"&amp;gt;World&amp;lt;/div&amp;gt;";
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;or (using the custom view renderer):&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="java"&gt;@GetMapping(path = "/test")
public Flux&amp;lt;Rendering&amp;gt; test() {
	return Flux.just(
			Rendering.view("test").modelAttribute("id", "hello")
				.modelAttribute("value", "Hello").build(),
			Rendering.view("test").modelAttribute("id", "world")
				.modelAttribute("value", "World").build());
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;with a template "test.mustache":&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;&amp;lt;div id="{{id}}" hx-swap-oob="true"&amp;gt;{{value}}&amp;lt;/div&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="sect2"&gt;
&lt;h3 id="boosting-links-and-forms"&gt;&lt;a class="anchor" href="#boosting-links-and-forms"&gt;&lt;/a&gt;Boosting Links and Forms&lt;/h3&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Another thing that HTMX does is "boost" all the links and form actions in your page, so that they automatically work using an XHR request instead of a full page refresh. That&amp;#8217;s a really simple way to segment your page by feature and update only the bits that you need. You can also easily do that in a "progressive" way - i.e. the application works with full page refreshes if Javascript is disabled, but is zippier and feels more "modern" if Javascript is enabled.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="sect1"&gt;
&lt;h2 id="dynamic-content-with-hotwired"&gt;&lt;a class="anchor" href="#dynamic-content-with-hotwired"&gt;&lt;/a&gt;Dynamic Content with Hotwired&lt;/h2&gt;
&lt;div class="sectionbody"&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Hotwired is a little bit similar to HTMX, so let&amp;#8217;s replace the libraries an get the app working. Take out HTMX and add Hotwired (Turbo) to the application. In &lt;code&gt;pom.xml&lt;/code&gt;:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="xml"&gt;&amp;lt;dependency&amp;gt;
	&amp;lt;groupId&amp;gt;org.webjars.npm&amp;lt;/groupId&amp;gt;
	&amp;lt;artifactId&amp;gt;hotwired__turbo&amp;lt;/artifactId&amp;gt;
	&amp;lt;version&amp;gt;7.1.0&amp;lt;/version&amp;gt;
&amp;lt;/dependency&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Then we can import it into our page by adding an import map:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;&amp;lt;script type="importmap"&amp;gt;
	{
		"imports": {
			...
			"@hotwired/turbo": "/npm/@hotwired/turbo"
		}
	}
&amp;lt;/script&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;and a script to import the library:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;&amp;lt;script type="module"&amp;gt;
	import * as Turbo from '@hotwired/turbo';
&amp;lt;/script&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="sect2"&gt;
&lt;h3 id="replacing-and-enhancing-html-dynamically-2"&gt;&lt;a class="anchor" href="#replacing-and-enhancing-html-dynamically-2"&gt;&lt;/a&gt;Replacing and Enhancing HTML Dynamically&lt;/h3&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;This lets us do the dynamic content stuff that we already did with HTMX with a few changes to the HTML. Here&amp;#8217;s the "test" tab in &lt;code&gt;index.html&lt;/code&gt;:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;&amp;lt;div class="tab-pane fade" id="test" role="tabpanel"&amp;gt;
	&amp;lt;turbo-frame id="turbo"&amp;gt;
		&amp;lt;div class="container" id="frame"&amp;gt;
			&amp;lt;div id="hello"&amp;gt;&amp;lt;/div&amp;gt;
			&amp;lt;div id="world"&amp;gt;&amp;lt;/div&amp;gt;
			&amp;lt;form action="/test" method="post"&amp;gt;
				&amp;lt;button class="btn btn-primary" type="submit"&amp;gt;Fetch&amp;lt;/button&amp;gt;
			&amp;lt;/form&amp;gt;
		&amp;lt;/div&amp;gt;
	&amp;lt;/turbo-frame&amp;gt;
&amp;lt;/div&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Turbo works a little differently than HTMX. The &lt;code&gt;&amp;lt;turbo-frame/&amp;gt;&lt;/code&gt; tells Turbo that everything inside is enhanced (a bit like an HTMX boost). And to replace the "hello" and "world" elements on a button click, we need the button to send a POST through a form, not just a plain GET (Turbo is more opinionated about this than HTMX). The &lt;code&gt;/test&lt;/code&gt; endpoint then sends back some &lt;code&gt;&amp;lt;turbo-stream/&amp;gt;&lt;/code&gt; fragments containing templates with the content we want to replace:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;&amp;lt;turbo-stream action="replace" target="hello"&amp;gt;
        &amp;lt;template&amp;gt;
                &amp;lt;div id="hello"&amp;gt;Hi Hello!&amp;lt;/div&amp;gt;
        &amp;lt;/template&amp;gt;
&amp;lt;/turbo-frame&amp;gt;

&amp;lt;turbo-stream action="replace" target="world"&amp;gt;
        &amp;lt;template&amp;gt;
                &amp;lt;div id="world"&amp;gt;Hi World!&amp;lt;/div&amp;gt;
        &amp;lt;/template&amp;gt;
&amp;lt;/turbo-frame&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;To make Turbo take notice of the incoming &lt;code&gt;&amp;lt;turbo-stream/&amp;gt;&lt;/code&gt; we need the &lt;code&gt;/test&lt;/code&gt; endpoint to return a custom &lt;code&gt;Content-Type: text/vnd.turbo-stream.html&lt;/code&gt; so the implementation looks like this:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="java"&gt;@PostMapping(path = "/test", produces = "text/vnd.turbo-stream.html")
public Flux&amp;lt;Rendering&amp;gt; test() {
	return ...;
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;To serve the custom content type we need a custom view resolver:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="java"&gt;@Bean
@ConditionalOnMissingBean
MustacheViewResolver mustacheViewResolver(Compiler mustacheCompiler, MustacheProperties mustache) {
	MustacheViewResolver resolver = new MustacheViewResolver(mustacheCompiler);
	resolver.setPrefix(mustache.getPrefix());
	resolver.setSuffix(mustache.getSuffix());
	resolver.setViewNames(mustache.getViewNames());
	resolver.setRequestContextAttribute(mustache.getRequestContextAttribute());
	resolver.setCharset(mustache.getCharsetName());
	resolver.setOrder(Ordered.LOWEST_PRECEDENCE - 10);
	resolver.setSupportedMediaTypes(
			Arrays.asList(MediaType.TEXT_HTML, MediaType.valueOf("text/vnd.turbo-stream.html")));
	return resolver;
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;The above is a copy of the &lt;code&gt;@Bean&lt;/code&gt; defined automatically by Spring Boot but with an additional supported media type. There is an open &lt;a href="https://github.com/spring-projects/spring-boot/issues/28858"&gt;feature request&lt;/a&gt; to allow this to be done via &lt;code&gt;application.properties&lt;/code&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;The result of clicking the "Fetch" button should be to render "Hello" and "World" as before.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="sect2"&gt;
&lt;h3 id="server-sent-events"&gt;&lt;a class="anchor" href="#server-sent-events"&gt;&lt;/a&gt;Server Sent Events&lt;/h3&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Turbo also has built in support for SSE rendering, but this time the event data has to have &lt;code&gt;&amp;lt;turbo-stream/&amp;gt;&lt;/code&gt; elements in it. For example:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code&gt;$ curl localhost:8080/stream
data:&amp;lt;turbo-stream action="replace" target="load"&amp;gt;
data:   &amp;lt;template&amp;gt;
data:           &amp;lt;div id="load"&amp;gt;Index: 0, Time: 1639482422822&amp;lt;/div&amp;gt;
data:   &amp;lt;/template&amp;gt;
data:&amp;lt;/turbo-stream&amp;gt;

data:&amp;lt;turbo-stream action="replace" target="load"&amp;gt;
data:   &amp;lt;template&amp;gt;
data:           &amp;lt;div id="load"&amp;gt;Index: 1, Time: 1639482427821&amp;lt;/div&amp;gt;
data:   &amp;lt;/template&amp;gt;
data:&amp;lt;/turbo-stream&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Then the "stream" tab just needs an empty &lt;code&gt;&amp;lt;div id="load"&amp;gt;&amp;lt;/div&amp;gt;&lt;/code&gt; and Turbo will do what it was asked (replace the element identified by "load"):&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;&amp;lt;div class="tab-pane fade" id="stream" role="tabpanel"&amp;gt;
	&amp;lt;div class="container"&amp;gt;
		&amp;lt;div id="load"&amp;gt;&amp;lt;/div&amp;gt;
	&amp;lt;/div&amp;gt;
&amp;lt;/div&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Both Turbo and HTMX allow you to target elements for dynamic content by id or by CSS style matcher, both for regular HTTP responses and SSE streams.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="sect2"&gt;
&lt;h3 id="stimulus"&gt;&lt;a class="anchor" href="#stimulus"&gt;&lt;/a&gt;Stimulus&lt;/h3&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;There is another library in Hotwired called &lt;a href="https://stimulus.hotwired.dev"&gt;Stimulus&lt;/a&gt; that lets you add more customized behaviour using small amounts of Javascript. It comes in handy if you have an endpoint in your backend service that returns JSON not HTML, for instance. We can get started with Stimulus by adding it as a dependency in &lt;code&gt;pom.xml&lt;/code&gt;:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="xml"&gt;&amp;lt;dependency&amp;gt;
	&amp;lt;groupId&amp;gt;org.webjars.npm&amp;lt;/groupId&amp;gt;
	&amp;lt;artifactId&amp;gt;hotwired__stimulus&amp;lt;/artifactId&amp;gt;
	&amp;lt;version&amp;gt;3.0.1&amp;lt;/version&amp;gt;
&amp;lt;/dependency&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;and with an import map in &lt;code&gt;index.html&lt;/code&gt;:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;&amp;lt;script type="importmap"&amp;gt;
	{
		"imports": {
			...
			"@hotwired/stimulus": "/npm/@hotwired/stimulus"
		}
	}
&amp;lt;/script&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Then we are in good shape to replace the piece of the main "message" tab that we did with HTMX before. Here&amp;#8217;s the tab content covering just the button and custom message:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;&amp;lt;div class="tab-pane fade show active" id="message" role="tabpanel"&amp;gt;
	&amp;lt;div class="container" data-controller="hello"&amp;gt;
		&amp;lt;div id="greeting" data-hello-target="output"&amp;gt;Hello World&amp;lt;/div&amp;gt;
		&amp;lt;input id="name" name="value" type="text" data-hello-target="name" /&amp;gt;
		&amp;lt;button class="btn btn-primary" data-action="click-&amp;gt;hello#greet"&amp;gt;Greet&amp;lt;/button&amp;gt;
	&amp;lt;/div&amp;gt;
&amp;lt;/div&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Notice the &lt;code&gt;data-*&lt;/code&gt; attributes. There is a &lt;code&gt;controller&lt;/code&gt; ("hello") declared on the container &lt;code&gt;&amp;lt;div&amp;gt;&lt;/code&gt; that we need to implement. Its action in the button element says "when this button is clicked, call the function 'greet' on the 'hello' controller". And there are some decorations that identify which elements have input and output for the controller (the &lt;code&gt;data-hello-target&lt;/code&gt; attributes). The Javascript to implement the custom message renderer looks like this:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;&amp;lt;script type="module"&amp;gt;
	import { Application, Controller } from '@hotwired/stimulus';
	window.Stimulus = Application.start();

	Stimulus.register("hello", class extends Controller {
		static targets = ["name", "output"]
		greet() {
			this.outputTarget.textContent = `Hello, ${this.nameTarget.value}!`;
		};
	});
&amp;lt;/script&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;The &lt;code&gt;Controller&lt;/code&gt; is registered with the &lt;code&gt;data-controller&lt;/code&gt; name from the HTML, and it has a &lt;code&gt;targets&lt;/code&gt; field that enumerates all the ids of elements that it wants to target. It can then refer to them by a naming convention, e.g. "output" shows up in the controller as a reference to a DOM element called &lt;code&gt;outputTarget&lt;/code&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;You can do more or less anything you like in the &lt;code&gt;Controller&lt;/code&gt;, so for example you could pull some content from the backend. The &lt;code&gt;turbo&lt;/code&gt; sample does that by pulling a string from the &lt;code&gt;/user&lt;/code&gt; endpoint and inserting it in an "auth" target element:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;&amp;lt;div class="container" data-controller="hello"&amp;gt;
	&amp;lt;div id="auth" data-hello-target="auth"&amp;gt;&amp;lt;/div&amp;gt;
	...
&amp;lt;/div&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;with the complementary Javascript:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="javascript"&gt;Stimulus.register("hello", class extends Controller {
	static targets = ["name", "output", "auth"]
	initialize() {
		let hello = this;
		fetch("/user").then(response =&amp;gt; {
			response.json().then(data =&amp;gt; {
				hello.authTarget.textContent = `Logged in as: ${data.name}`;
			});
		});
	}
	...
});&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="sect1"&gt;
&lt;h2 id="add-some-charts"&gt;&lt;a class="anchor" href="#add-some-charts"&gt;&lt;/a&gt;Add Some Charts&lt;/h2&gt;
&lt;div class="sectionbody"&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;We can have some fun adding other Javascript libraries, for instance some nice graphics. Here&amp;#8217;s a new tab in &lt;code&gt;index.html&lt;/code&gt; (remember to add the &lt;code&gt;&amp;lt;nav/&amp;gt;&lt;/code&gt; link as well):&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;&amp;lt;div class="tab-pane fade" id="chart" role="tabpanel" data-controller="chart"&amp;gt;
	&amp;lt;div class="container"&amp;gt;
		&amp;lt;canvas data-chart-target="canvas"&amp;gt;&amp;lt;/canvas&amp;gt;
	&amp;lt;/div&amp;gt;
	&amp;lt;div class="container"&amp;gt;
		&amp;lt;button class="btn btn-primary" data-action="click-&amp;gt;chart#clear"&amp;gt;Clear&amp;lt;/button&amp;gt;
		&amp;lt;button class="btn btn-primary" data-action="click-&amp;gt;chart#bar"&amp;gt;Bar&amp;lt;/button&amp;gt;
	&amp;lt;/div&amp;gt;
&amp;lt;/div&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;It has an empty &lt;code&gt;&amp;lt;canvas/&amp;gt;&lt;/code&gt; that we can fill in with a bar chart using &lt;a href="https://www.chartjs.org/"&gt;Chart.js&lt;/a&gt;. In preparation for that we declared a controller called "chart" in the HTML above and labelled the target element for it with &lt;code&gt;data-*-target&lt;/code&gt;. So let&amp;#8217;s start by adding Chart.js to the application. In &lt;code&gt;pom.xml&lt;/code&gt;:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="xml"&gt;&amp;lt;dependency&amp;gt;
	&amp;lt;groupId&amp;gt;org.webjars.npm&amp;lt;/groupId&amp;gt;
	&amp;lt;artifactId&amp;gt;chart.js&amp;lt;/artifactId&amp;gt;
	&amp;lt;version&amp;gt;3.6.0&amp;lt;/version&amp;gt;
&amp;lt;/dependency&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;and in &lt;code&gt;index.html&lt;/code&gt; we add an import map and some Javascript to render the chart:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;	&amp;lt;script type="importmap"&amp;gt;
		{
			"imports": {
				...
				"chart.js": "/npm/chart.js"
			}
		}
	&amp;lt;/script&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;and the new controller implementing the "bar" and "clear" actions from the buttons in the HTML:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="javascript"&gt;import { Chart, BarController, BarElement, LinearScale, CategoryScale, Title, Legend } from 'chart.js';
Chart.register(BarController, BarElement, LinearScale, CategoryScale, Title, Legend);

Stimulus.register("chart", class extends Controller {
	static targets = ["canvas"]
	bar(type) {
		let chart = this;
		this.clear();
		fetch("/pops").then(response =&amp;gt; {
			response.json().then(data =&amp;gt; {
				data.type = "bar";
				chart.active = new Chart(chart.canvasTarget, data);
			});
		});;
		clear() {
			if (this.active) {
				this.active.destroy();
			}
		};
	};
});&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;To service this we need a &lt;code&gt;/pops&lt;/code&gt; endpoint with some chart data (estimated world population by continent according to Wikipedia):&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code&gt;$ curl localhost:8080/pops | jq .
{
  "data": {
    "labels": [
      "Africa",
      "Asia",
      "Europe",
      "Latin America",
      "North America"
    ],
    "datasets": [
      {
        "backgroundColor": [
          "#3e95cd",
          "#8e5ea2",
          "#3cba9f",
          "#e8c3b9",
          "#c45850"
        ],
        "label": "Population (millions)",
        "data": [
          2478,
          5267,
          734,
          784,
          433
        ]
      }
    ]
  },
  "options": {
    "plugins": {
      "legend": {
        "display": false
      },
      "title": {
        "text": "Predicted world population (millions) in 2050",
        "display": true
      }
    }
  }
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;The sample app has a few more charts, all showing the same data in different formats. They are all serviced by the same endpoint illustrated above:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="java"&gt;@GetMapping("/pops")
@ResponseBody
public Chart bar() {
	return new Chart();
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="sect1"&gt;
&lt;h2 id="code-block-hiding"&gt;&lt;a class="anchor" href="#code-block-hiding"&gt;&lt;/a&gt;Code Block Hiding&lt;/h2&gt;
&lt;div class="sectionbody"&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;In Spring guides and reference documentation we often see blocks of code segmented by "type" (e.g. Maven vs. Gradle, or XML vs. Java). They are shown with one option active and the rest hidden, and if the user clicks on another option, not just the closest code snippets, but all the snippets in the whole document that match the click are revealed. For example if the user clicks on "Gradle" all the code snippets that refer to "Gradle" are simultaneously activated. The Javascript that drives that feature exists in several forms, depending on which guide or project is using it, and one of those forms is as an NPM bundle &lt;a href="https://www.npmjs.com/package/@springio/utils"&gt;@springio/utils&lt;/a&gt;. It&amp;#8217;s not strictly an ESM module but we can still import it and see the feature working. Here&amp;#8217;s what it looks like in &lt;code&gt;index.html&lt;/code&gt;:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;&amp;lt;script type="importmap"&amp;gt;
	{
		"imports": {
			...
			"@springio/utils": "/npm/@springio/utils"
		}
	}
&amp;lt;/script&amp;gt;
&amp;lt;script type="module"&amp;gt;
	...
	import '@springio/utils';
&amp;lt;/script&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;and then we can add a new tab with some "code snippets" (just junk content in this case):&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;&amp;lt;div class="tab-pane fade" id="docs" role="tabpanel"&amp;gt;
	&amp;lt;div class="container" title="Content"&amp;gt;
		&amp;lt;div class="content primary"&amp;gt;&amp;lt;div class="title"&amp;gt;One&amp;lt;/div&amp;gt;&amp;lt;div class="content"&amp;gt;Some content&amp;lt;/div&amp;gt;&amp;lt;/div&amp;gt;
		&amp;lt;div class="content secondary"&amp;gt;&amp;lt;div class="title"&amp;gt;Two&amp;lt;/div&amp;gt;&amp;lt;div class="content"&amp;gt;Secondary&amp;lt;/div&amp;gt;&amp;lt;/div&amp;gt;
		&amp;lt;div class="content secondary"&amp;gt;&amp;lt;div class="title"&amp;gt;Three&amp;lt;/div&amp;gt;&amp;lt;div class="content"&amp;gt;Third option&amp;lt;/div&amp;gt;&amp;lt;/div&amp;gt;
	&amp;lt;/div&amp;gt;
	&amp;lt;div class="container" title="Another"&amp;gt;
		&amp;lt;div class="content primary"&amp;gt;&amp;lt;div class="title"&amp;gt;One&amp;lt;/div&amp;gt;&amp;lt;div class="content"&amp;gt;Some more content&amp;lt;/div&amp;gt;&amp;lt;/div&amp;gt;
		&amp;lt;div class="content secondary"&amp;gt;&amp;lt;div class="title"&amp;gt;Two&amp;lt;/div&amp;gt;&amp;lt;div class="content"&amp;gt;Secondary stuff&amp;lt;/div&amp;gt;&amp;lt;/div&amp;gt;
		&amp;lt;div class="content secondary"&amp;gt;&amp;lt;div class="title"&amp;gt;Three&amp;lt;/div&amp;gt;&amp;lt;div class="content"&amp;gt;Third option again&amp;lt;/div&amp;gt;&amp;lt;/div&amp;gt;
	&amp;lt;/div&amp;gt;
&amp;lt;/div&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;It looks like this if the user selects the "One" block type:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="imageblock"&gt;
&lt;div class="content"&gt;
&lt;img src="https://raw.githubusercontent.com/dsyer/spring-boot-js-demo/main/images/one.png" alt="one"&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;The thing that drives the behaviour is the structure of the HTML, with one element labelled "primary" and alternatives as "secondary", then a nested &lt;code&gt;class="title"&lt;/code&gt; before the actual content. The title is pulled out into the buttons by the Javascript.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="sect1"&gt;
&lt;h2 id="dynamic-content-with-vue"&gt;&lt;a class="anchor" href="#dynamic-content-with-vue"&gt;&lt;/a&gt;Dynamic Content With Vue&lt;/h2&gt;
&lt;div class="sectionbody"&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Vue is a lightweight Javascript library that you can use a little of or a lot. To get started with Webjars we would need the dependency in &lt;code&gt;pom.xml&lt;/code&gt;:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="xml"&gt;&amp;lt;dependency&amp;gt;
	&amp;lt;groupId&amp;gt;org.webjars.npm&amp;lt;/groupId&amp;gt;
	&amp;lt;artifactId&amp;gt;vue&amp;lt;/artifactId&amp;gt;
	&amp;lt;version&amp;gt;2.6.14&amp;lt;/version&amp;gt;
&amp;lt;/dependency&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;and add it to the import map in &lt;code&gt;index.html&lt;/code&gt; (using a manual resource path because the "module" in the NPM bundle points to something that doesn&amp;#8217;t work in a browser):&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;&amp;lt;script type="importmap"&amp;gt;
	{
		"imports": {
			...
			"vue": "/npm/vue/dist/vue.esm.browser.js"
		}
	}
&amp;lt;/script&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Then we can write a component and "mount" it in a named element (it&amp;#8217;s an example from the Vue user guide):&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;&amp;lt;script type="module"&amp;gt;
	import Vue from 'vue';

	const EventHandling = {
		data() {
			return {
				message: 'Hello Vue.js!'
			}
		},
		methods: {
			reverseMessage() {
				this.message = this.message
					.split('')
					.reverse()
					.join('')
			}
		}
	}

	new Vue(EventHandling).$mount("#event-handling");
&amp;lt;/script&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;To receive the dynamic content we need an element that matches &lt;code&gt;#event-handling&lt;/code&gt;, e.g.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;&amp;lt;div class="tab-pane fade" id="test" role="tabpanel"&amp;gt;
	&amp;lt;div class="container" id="event-handling"&amp;gt;
		&amp;lt;p&amp;gt;{{ message }}&amp;lt;/p&amp;gt;
		&amp;lt;button class="btn btn-primary" v-on:click="reverseMessage"&amp;gt;Reverse Message&amp;lt;/button&amp;gt;
	&amp;lt;/div&amp;gt;
&amp;lt;/div&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;So the templating happens on the client, and it is triggered by a click using &lt;code&gt;v-on&lt;/code&gt; from Vue.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;If we want to replace Hotwired with Vue we could start with the content on the main "message" tab. So we can replace the Stimulus controller bindings with this, for example:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;&amp;lt;div class="tab-pane fade show active" id="message" role="tabpanel"&amp;gt;
	&amp;lt;div class="container"&amp;gt;
		&amp;lt;div id="auth"&amp;gt;
			{{user}}
		&amp;lt;/div&amp;gt;
		&amp;lt;div id="greeting"&amp;gt;{{greeting}}&amp;lt;/div&amp;gt;
		&amp;lt;input id="name" name="value" type="text" v-model="name" /&amp;gt;
		&amp;lt;button class="btn btn-primary" v-on:click="greet"&amp;gt;Greet&amp;lt;/button&amp;gt;
	&amp;lt;/div&amp;gt;
&amp;lt;/div&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;and then hook the &lt;code&gt;user&lt;/code&gt; and &lt;code&gt;greeting&lt;/code&gt; properties in through Vue:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="javascript"&gt;import Vue from 'vue';

const EventHandling = {
	data() {
		return {
			greeting: '',
			name: '',
			user: 'Unauthenticated'
		}
	},
	created: function () {
		let hello = this;
		fetch("/user").then(response =&amp;gt; {
			response.json().then(data =&amp;gt; {
				hello.user = `Logged in as: ${data.name}`;
			});
		});
	},
	methods: {
		greet() {
			this.greeting = `Hello, ${this.name}!`;
		},
	}
}

new Vue(EventHandling).$mount("#message");&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;The &lt;code&gt;created&lt;/code&gt; hook is run as part of the Vue component lifecycle, so it&amp;#8217;s not necessarily going to be run precisely the same time as Stimulus did it, but it&amp;#8217;s close enough.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;We can also replace the chart picker with a Vue, and then we can get rid of Stimulus, just to see what it looks like.  Here&amp;#8217;s the chart tab (basically the same as before but without the controller decorations):&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;&amp;lt;div class="tab-pane fade" id="chart" role="tabpanel"&amp;gt;
	&amp;lt;div class="container"&amp;gt;
		&amp;lt;canvas id="canvas"&amp;gt;&amp;lt;/canvas&amp;gt;
	&amp;lt;/div&amp;gt;
	&amp;lt;div class="container"&amp;gt;
		&amp;lt;button class="btn btn-primary" v-on:click="clear"&amp;gt;Clear&amp;lt;/button&amp;gt;
		&amp;lt;button class="btn btn-primary" v-on:click="bar"&amp;gt;Bar&amp;lt;/button&amp;gt;
	&amp;lt;/div&amp;gt;
&amp;lt;/div&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;and here&amp;#8217;s the Javascript code to render the chart:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;&amp;lt;script type="module"&amp;gt;
	import Vue from 'vue';

	import { Chart, BarController, BarElement, LinearScale, CategoryScale, Title, Legend } from 'chart.js';
	Chart.register(BarController, BarElement, LinearScale, CategoryScale, Title, Legend);

	const ChartHandling = {
		methods: {
			clear() {
				if (this.active) {
					this.active.destroy();
				}
			},
			bar() {
				let chart = this;
				this.clear();
				fetch("/pops").then(response =&amp;gt; {
					response.json().then(data =&amp;gt; {
						data.type = "bar";
						chart.active = new Chart(document.getElementById("canvas"), data);
					});
				});
			}
		}
	}

	new Vue(ChartHandling).$mount("#chart");
&amp;lt;/script&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;The sample code also has "pie" and "doughnut" in addition to the "bar" chart type, and they work the same way.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="sect2"&gt;
&lt;h3 id="server-side-fragments"&gt;&lt;a class="anchor" href="#server-side-fragments"&gt;&lt;/a&gt;Server Side Fragments&lt;/h3&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Vue can replace the entire inner HTML of an element using the &lt;code&gt;v-html&lt;/code&gt; attribute, so we can start to re-implement the Turbo content with that. Here&amp;#8217;s the new "test" tab:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;&amp;lt;div class="tab-pane fade" id="test" role="tabpanel"&amp;gt;
	&amp;lt;div class="container" id="frame"&amp;gt;
		&amp;lt;div id="hi" v-html="html"&amp;gt;&amp;lt;/div&amp;gt;
		&amp;lt;button class="btn btn-primary" v-on:click="hello"&amp;gt;Fetch&amp;lt;/button&amp;gt;
	&amp;lt;/div&amp;gt;
&amp;lt;/div&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;It has a click handler referring to a "hello" method, and a div that is waiting to receive content. We can attach the button to the "hi" container like this:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;&amp;lt;script type="module"&amp;gt;
	import Vue from 'vue';

	const HelloHandling = {
		data: {
			html: ''
		},
		methods: {
			hello() {
				const handler = this;
				fetch("/test").then(response =&amp;gt; {
					response.text().then(data =&amp;gt; {
						handler.html = data;
					});
				});
			},
		}
	}

	new Vue(HelloHandling).$mount("#test");
&amp;lt;/script&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;To make it work we just need to remove the &lt;code&gt;&amp;lt;turbo-frame/&amp;gt;&lt;/code&gt; elements from the server side template (reverting to what we had in the HTMX sample).&lt;/p&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;It is definitely possible to replace our Turbo (and HTMX) code with Vue (or another library or even plain Javscript), but we can see from the sample that it inevitably involves some boilerplate Javascript.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="sect1"&gt;
&lt;h2 id="plain-javascript-with-sse-stream"&gt;&lt;a class="anchor" href="#plain-javascript-with-sse-stream"&gt;&lt;/a&gt;Plain Javascript with SSE Stream&lt;/h2&gt;
&lt;div class="sectionbody"&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Vue isn&amp;#8217;t really adding a lot of value in this simple HTML replacement use case, and it would add no value at all to the SSE example, so we will go ahead and implement that in vanilla Javascript. Here&amp;#8217;s a stream tab:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;&amp;lt;div class="tab-pane fade" id="stream" role="tabpanel"&amp;gt;
	&amp;lt;div class="container"&amp;gt;
		&amp;lt;div id="load"&amp;gt;&amp;lt;/div&amp;gt;
	&amp;lt;/div&amp;gt;
&amp;lt;/div&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;and some Javascript to populate it:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;&amp;lt;script type="module"&amp;gt;
	var events = new EventSource("/stream");
	events.onmessage = e =&amp;gt; {
		document.getElementById("load").innerHTML = e.data;
	}
&amp;lt;/script&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="sect1"&gt;
&lt;h2 id="dynamic-content-with-react"&gt;&lt;a class="anchor" href="#dynamic-content-with-react"&gt;&lt;/a&gt;Dynamic Content with React&lt;/h2&gt;
&lt;div class="sectionbody"&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Most people who use React probably do more than just a bit of logic and end up with all of the layout and rendering in Javascript. You don&amp;#8217;t have to do that, and it&amp;#8217;s quite easy to use just a bit of React to get a feel for it. You could leave it at that and use it as a utility library, or you could evolve to a full Javascript client-side component approach.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;We can get started and try it out without changing too much. The sample code will end up looking like the &lt;code&gt;react-webjars&lt;/code&gt; sample if you want to peek. First the dependencies in &lt;code&gt;pom.xml&lt;/code&gt;:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="xml"&gt;&amp;lt;dependency&amp;gt;
	&amp;lt;groupId&amp;gt;org.webjars.npm&amp;lt;/groupId&amp;gt;
	&amp;lt;artifactId&amp;gt;react&amp;lt;/artifactId&amp;gt;
	&amp;lt;version&amp;gt;17.0.2&amp;lt;/version&amp;gt;
&amp;lt;/dependency&amp;gt;
&amp;lt;dependency&amp;gt;
	&amp;lt;groupId&amp;gt;org.webjars.npm&amp;lt;/groupId&amp;gt;
	&amp;lt;artifactId&amp;gt;react-dom&amp;lt;/artifactId&amp;gt;
	&amp;lt;version&amp;gt;17.0.2&amp;lt;/version&amp;gt;
&amp;lt;/dependency&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;and the module map in &lt;code&gt;index.html&lt;/code&gt;:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;&amp;lt;script type="importmap"&amp;gt;
	{
		"imports": {
			...
			"react": "/npm/react/umd/react.development.js",
			"react-dom": "/npm/react-dom/umd/react-dom.development.js"
		}
	}
&amp;lt;/script&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;React is not packaged as an ESM bundle (yet, anyway), so there is no "module" metadata and we have to hard code the resource paths like this. The "umd" in the resource path refers to "Universal Module Definition" which is an older attempt at modular Javascript. It&amp;#8217;s close enough that if you squint you can use it in a similar way.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;With those in place you can import the functions and objects they define:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;&amp;lt;script type="module"&amp;gt;
	import * as React from 'react';
	import * as ReactDOM from 'react-dom';
&amp;lt;/script&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Because they are not really ESM modules you can do this at the "global" level in a &lt;code&gt;&amp;lt;script/&amp;gt;&lt;/code&gt; in the HTML &lt;code&gt;&amp;lt;head/&amp;gt;&lt;/code&gt;, e.g. where we import &lt;code&gt;bootstrap&lt;/code&gt;. Then you can define some content by creating a &lt;code&gt;React.Component&lt;/code&gt;. Here&amp;#8217;s a really basic static example:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;&amp;lt;script type="module"&amp;gt;
	const e = React.createElement;
	class RootComponent extends React.Component {
		constructor(props) {
			super(props);
		}
		render() {
			return e(
				'h1',
				{},
				'Hello, world!'
			);
		}
	}
	ReactDOM.render(e(RootComponent), document.querySelector('#root'));
&amp;lt;/script&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;The &lt;code&gt;render()&lt;/code&gt; method returns a function that creates a new DOM element (an &lt;code&gt;&amp;lt;h1/&amp;gt;&lt;/code&gt; with content "Hello, world!"). It is attached by &lt;code&gt;ReactDOM&lt;/code&gt; to an element with &lt;code&gt;id="root"&lt;/code&gt;, so we&amp;#8217;d better add one of those as well, for example in the "test" tab:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;&amp;lt;div class="tab-pane fade" id="test" role="tabpanel"&amp;gt;
	&amp;lt;div class="container" id="root"&amp;gt;&amp;lt;/div&amp;gt;
&amp;lt;/div&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;If you run that it should work and it should say "Hello World" in that tab.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="sect2"&gt;
&lt;h3 id="html-in-javascript-xjs"&gt;&lt;a class="anchor" href="#html-in-javascript-xjs"&gt;&lt;/a&gt;HTML in Javascript: XJS&lt;/h3&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Most React apps use HTML embedded in the Javascript via a templating language called "XJS" (which can be used in other ways but is actually part of React now). The hello world sample above looks like this:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;&amp;lt;script type="text/babel"&amp;gt;
	class Hello extends React.Component {
		render() {
			return &amp;lt;h1&amp;gt;Hello, {this.props.name}!&amp;lt;/h1&amp;gt;;
		}
	}
	ReactDOM.render(
		&amp;lt;Hello name="World"/&amp;gt;,
		document.getElementById('root')
	);
&amp;lt;/script&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;The component defines a custom element &lt;code&gt;&amp;lt;Hello/&amp;gt;&lt;/code&gt; that match the class name of the component, and conventionally starts with a capital letter. The &lt;code&gt;&amp;lt;Hello/&amp;gt;&lt;/code&gt; fragment is an XJS template, and the component also has a &lt;code&gt;render()&lt;/code&gt; function that returns an XJS template. Braces are used for interpolation, and &lt;code&gt;props&lt;/code&gt; is a map including all the attributes of the custom element (so "name" in this case). Finally there is that &lt;code&gt;&amp;lt;script type="text/babel"&amp;gt;&lt;/code&gt; which is needed to transpile the XJS into actual Javascript that the browser will understand. The script above will do nothing until the browser is taught to recognize this script. We do that by importing another module:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;	&amp;lt;script type="importmap"&amp;gt;
		{
			"imports": {
				...
				"react": "/npm/react/umd/react.development.js",
				"react-dom": "/npm/react-dom/umd/react-dom.development.js",
				"@babel/standalone": "/npm/@babel/standalone"
			}
		}
	&amp;lt;/script&amp;gt;
	&amp;lt;script type="module"&amp;gt;
		...
		import * as React from 'react';
		import * as ReactDOM from 'react-dom';
		import '@babel/standalone';
	&amp;lt;/script&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;The React user guide advises against using &lt;code&gt;@babel/standalone&lt;/code&gt; in a large application because it has to do a lot of work in the browser, and the same work can be done once at build time which is more efficient. But it&amp;#8217;s good for trying stuff out, and for apps with small amounts of React code, like this one.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="sect2"&gt;
&lt;h3 id="basic-event-and-user-input-handling"&gt;&lt;a class="anchor" href="#basic-event-and-user-input-handling"&gt;&lt;/a&gt;Basic Event and User Input Handling&lt;/h3&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;We are now in a position where we can migrate the main "message" tab to React. So let&amp;#8217;s modify the &lt;code&gt;Hello&lt;/code&gt; component and attach it to a different element. The message tab can be stripped down to an empty element ready to accept the React content:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;&amp;lt;div class="tab-pane fade show active" id="message" role="tabpanel"&amp;gt;
	&amp;lt;div class="container" id="hello"&amp;gt;&amp;lt;/div&amp;gt;
&amp;lt;/div&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;We can anticipate that we will need a second component to render the authenticated user name, so let&amp;#8217;s start with this to attach some code to the element in the tab above:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="javascript"&gt;ReactDOM.render(
	&amp;lt;div className="container" id="hello"&amp;gt;
		&amp;lt;Auth/&amp;gt;
		&amp;lt;Hello/&amp;gt;
	&amp;lt;/div&amp;gt;,
	document.getElementById('hello')
);&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Then we can define the &lt;code&gt;Auth&lt;/code&gt; component like this:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="javascript"&gt;class Auth extends React.Component {
	constructor(props) {
		super(props);
		this.state = { user: 'Unauthenticated' };
	};
	componentDidMount() {
		let hello = this;
		fetch("/user").then(response =&amp;gt; {
			response.json().then(data =&amp;gt; {
				hello.setState({user: `Logged in as: ${data.name}`});
			});
		});
	};
	render() {
		return &amp;lt;div id="auth"&amp;gt;{this.state.user}&amp;lt;/div&amp;gt;;
	}
};&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;The lifecycle callback in this case is &lt;code&gt;componentDidMount&lt;/code&gt; which is called by React when the component is activated, so that&amp;#8217;s where we put our initialization code.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;The other component is the one that transfers the "name" input to a greeting:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="javascript"&gt;class Hello extends React.Component {
	constructor(props) {
		super(props);
		this.state = { name: '', message: '' };
		this.greet = this.greet.bind(this);
		this.change = this.change.bind(this);
	};
	greet() {
		this.setState({message: `Hello ${this.state.name}!`})
	}
	change(event) {
		console.log(event)
		this.setState({name: event.target.value})
	}
	render() {
		return &amp;lt;div&amp;gt;
			&amp;lt;div id="greeting"&amp;gt;{this.state.message}&amp;lt;/div&amp;gt;
			&amp;lt;input id="name" name="value" type="text" value={this.state.name} onChange={this.change}/&amp;gt;
			&amp;lt;button className="btn btn-primary" onClick={this.greet}&amp;gt;Greet&amp;lt;/button&amp;gt;
		&amp;lt;/div&amp;gt;;
	}
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;A &lt;code&gt;render()&lt;/code&gt; method has to return a single element, so we have to wrap the content in a &lt;code&gt;&amp;lt;div&amp;gt;&lt;/code&gt;. The other thing that is worth pointing out is that the transfer of state from the HTML to the Javascript is not automtatic - there&amp;#8217;s no "two-way model" in React, and you have to add change listeners to inputs to explicitly update the state. Also we have to call &lt;code&gt;bind()&lt;/code&gt; on all the component methods that we want to use as listeners (&lt;code&gt;greet&lt;/code&gt; and &lt;code&gt;change&lt;/code&gt; in this case).&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="sect2"&gt;
&lt;h3 id="chart-chooser"&gt;&lt;a class="anchor" href="#chart-chooser"&gt;&lt;/a&gt;Chart Chooser&lt;/h3&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;To migrate the rest of the Stimulus content to React we need to write a new chart chooser. So we can start with an empty "chart" tab:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;&amp;lt;div class="tab-pane fade" id="chart" role="tabpanel" data-controller="chart"&amp;gt;
	&amp;lt;div class="container"&amp;gt;
		&amp;lt;canvas id="canvas"&amp;gt;&amp;lt;/canvas&amp;gt;
	&amp;lt;/div&amp;gt;
	&amp;lt;div class="container" id="chooser"&amp;gt;&amp;lt;/div&amp;gt;
&amp;lt;/div&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;and attach a &lt;code&gt;ReactDOM&lt;/code&gt; element to the "chooser":&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="javascript"&gt;ReactDOM.render(
	&amp;lt;ChartChooser/&amp;gt;,
	document.getElementById('chooser')
);&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;&lt;code&gt;ChartChooser&lt;/code&gt; is a list of buttons encapsulated in a component:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="javascript"&gt;class ChartChooser extends React.Component {
	constructor(props) {
		super(props);
		this.state = {};
		this.clear = this.clear.bind(this);
		this.bar = this.bar.bind(this);
	};
	bar() {
		let chart = this;
		this.clear();
		fetch("/pops").then(response =&amp;gt; {
			response.json().then(data =&amp;gt; {
				data.type = "bar";
				chart.setState({ active: new Chart(document.getElementById("canvas"), data) });
			});
		});
	};
	clear() {
		if (this.state.active) {
			this.state.active.destroy();
		}
	};
	render() {
		return &amp;lt;div&amp;gt;
			&amp;lt;button className="btn btn-primary" onClick={this.clear}&amp;gt;Clear&amp;lt;/button&amp;gt;
			&amp;lt;button className="btn btn-primary" onClick={this.bar}&amp;gt;Bar&amp;lt;/button&amp;gt;
		&amp;lt;/div&amp;gt;;
	}
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;We also need the chart module setup from the Vue sample (it won&amp;#8217;t work in a &lt;code&gt;&amp;lt;script type="text/babel"&amp;gt;&lt;/code&gt;):&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;&amp;lt;script type="module"&amp;gt;
	import { Chart, BarController, BarElement, LinearScale, CategoryScale, Title, Legend } from 'chart.js';
	Chart.register(BarController, BarElement, LinearScale, CategoryScale, Title, Legend);
	window.Chart = Chart;
&amp;lt;/script&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Chart.js isn&amp;#8217;t shipped in a form you can import into a Babel script. We import it in a separate module, and &lt;code&gt;Chart&lt;/code&gt; has to be defined as a global so we can still use it in our React component.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="sect2"&gt;
&lt;h3 id="server-side-fragments-2"&gt;&lt;a class="anchor" href="#server-side-fragments-2"&gt;&lt;/a&gt;Server Side Fragments&lt;/h3&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;To render the "test" tab with React we can start with the tab itself, empty again to accept content from React:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;&amp;lt;div class="tab-pane fade" id="test" role="tabpanel"&amp;gt;
	&amp;lt;div class="container" id="root"&amp;gt;&amp;lt;/div&amp;gt;
&amp;lt;/div&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;with a binding to the "root" element in React:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="javascript"&gt;ReactDOM.render(
	&amp;lt;Content /&amp;gt;,
	document.getElementById('root')
);&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Then we can implement the &lt;code&gt;&amp;lt;Content/&amp;gt;&lt;/code&gt; as a component that fetches HTML from the &lt;code&gt;/test&lt;/code&gt; endpoint:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="javascript"&gt;class Content extends React.Component {
	constructor(props) {
		super(props);
		this.state = { html: '' };
		this.fetch = this.fetch.bind(this);
	};
	fetch() {
		let hello = this;
		fetch("/test").then(response =&amp;gt; {
			response.text().then(data =&amp;gt; {
				hello.setState({ html: data });
			});
		});
	}
	render() {
		return &amp;lt;div&amp;gt;
			&amp;lt;div dangerouslySetInnerHTML={{ __html: this.state.html }}&amp;gt;&amp;lt;/div&amp;gt;
			&amp;lt;button className="btn btn-primary" onClick={this.fetch}&amp;gt;Fetch&amp;lt;/button&amp;gt;
		&amp;lt;/div&amp;gt;;
	}
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;The &lt;code&gt;dangerouslySetInnerHTML&lt;/code&gt; attribute is delibrately named by React to discourage people from using it with content that is collected directly from users (XSS issues). But we get that content from the server so we can put our trust in the XSS protection there and ignore the warning.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;If we use that &lt;code&gt;&amp;lt;Content/&amp;gt;&lt;/code&gt; component and the SSE loader from the sample above then we can get rid of Hotwired altogether from this sample.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="sect1"&gt;
&lt;h2 id="building-and-bundling-with-node-js"&gt;&lt;a class="anchor" href="#building-and-bundling-with-node-js"&gt;&lt;/a&gt;Building and Bundling with Node.js&lt;/h2&gt;
&lt;div class="sectionbody"&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Webjars are great, but sometimes you need something closer to the Javascript. One problem with Webjars for some people is the size of the jars - the Bootstrap jar is nearly 2MB, most of which will never be used at runtime - and Javascript tooling has a strong focus on reducing that overhead, by not packaging the whole NPM module in your app, and also by bundling assets together so they can be downloaded efficiently. There are also some issues with Java tooling - regarding &lt;a href="https://github.com/sass/dart-sass"&gt;Sass&lt;/a&gt; in particular there is a lack of good tooling, as we found with the &lt;a href="https://github.com/spring-projects/spring-petclinic/pull/868"&gt;Petclinic recently&lt;/a&gt;. So maybe we should take a look at options for building with a Node.js toolchain.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;The first thing you will need is Node.js. There are many ways of obtaining it, and you can use whatever tools you want. We will show how to do it with the &lt;a href="https://github.com/eirslett/frontend-maven-plugin"&gt;Frontend Plugin&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="sect2"&gt;
&lt;h3 id="install-node-js"&gt;&lt;a class="anchor" href="#install-node-js"&gt;&lt;/a&gt;Install Node.js&lt;/h3&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Let&amp;#8217;s add the plugin to the &lt;code&gt;turbo&lt;/code&gt; sample. (The final result is the &lt;code&gt;nodejs&lt;/code&gt; sample if you want to peek) in &lt;code&gt;pom.xml&lt;/code&gt;:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="xml"&gt;&amp;lt;plugins&amp;gt;
	&amp;lt;plugin&amp;gt;
		&amp;lt;groupId&amp;gt;com.github.eirslett&amp;lt;/groupId&amp;gt;
		&amp;lt;artifactId&amp;gt;frontend-maven-plugin&amp;lt;/artifactId&amp;gt;
		&amp;lt;version&amp;gt;1.12.0&amp;lt;/version&amp;gt;
		&amp;lt;executions&amp;gt;
			&amp;lt;execution&amp;gt;
				&amp;lt;id&amp;gt;install-node-and-npm&amp;lt;/id&amp;gt;
				&amp;lt;goals&amp;gt;
					&amp;lt;goal&amp;gt;install-node-and-npm&amp;lt;/goal&amp;gt;
				&amp;lt;/goals&amp;gt;
				&amp;lt;configuration&amp;gt;
					&amp;lt;nodeVersion&amp;gt;v16.13.1&amp;lt;/nodeVersion&amp;gt;
				&amp;lt;/configuration&amp;gt;
			&amp;lt;/execution&amp;gt;
			&amp;lt;execution&amp;gt;
				&amp;lt;id&amp;gt;npm-install&amp;lt;/id&amp;gt;
				&amp;lt;goals&amp;gt;
					&amp;lt;goal&amp;gt;npm&amp;lt;/goal&amp;gt;
				&amp;lt;/goals&amp;gt;
				&amp;lt;configuration&amp;gt;
					&amp;lt;arguments&amp;gt;install&amp;lt;/arguments&amp;gt;
				&amp;lt;/configuration&amp;gt;
			&amp;lt;/execution&amp;gt;
			&amp;lt;execution&amp;gt;
				&amp;lt;id&amp;gt;npm-build&amp;lt;/id&amp;gt;
				&amp;lt;goals&amp;gt;
					&amp;lt;goal&amp;gt;npm&amp;lt;/goal&amp;gt;
				&amp;lt;/goals&amp;gt;
				&amp;lt;configuration&amp;gt;
					&amp;lt;arguments&amp;gt;run-script build&amp;lt;/arguments&amp;gt;
				&amp;lt;/configuration&amp;gt;
				&amp;lt;phase&amp;gt;generate-resources&amp;lt;/phase&amp;gt;
			&amp;lt;/execution&amp;gt;
		&amp;lt;/executions&amp;gt;
	&amp;lt;/plugin&amp;gt;
	...
&amp;lt;/plugins&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Here we have 3 executions: &lt;code&gt;install-node-and-npm&lt;/code&gt; installs Node.js and NPM locally, &lt;code&gt;npm-install&lt;/code&gt; runs &lt;code&gt;npm install&lt;/code&gt; and &lt;code&gt;npm-build&lt;/code&gt; runs a script to build the Javascript and possibly CSS. We will need a minimal &lt;code&gt;package.json&lt;/code&gt; to run them all. If you have &lt;code&gt;npm&lt;/code&gt; installed you could &lt;code&gt;npm init&lt;/code&gt; to generate a new one, or just create it manually:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code&gt;$ cat &amp;gt; package.json
{
	"scripts": { "build": "echo Building"}
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Then we can build&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code&gt;$ ./mvnw generate-resources
...
[INFO] Building
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  1.133 s
[INFO] Finished at: 2021-12-16T07:46:42Z
[INFO] ------------------------------------------------------------------------&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;You will see the result is a new directory:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code&gt;$ ls -d node*
node&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;It is useful to have an quick way to run &lt;code&gt;npm&lt;/code&gt; from the command line, when it is installed locally like this. So once you have Node.js you can make it easy by creating a script locally:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code&gt;$ cat &amp;gt; npm
#!/bin/sh
cd $(dirname $0)
PATH="$PWD/node/":$PATH
node "node/node_modules/npm/bin/npm-cli.js" "$@"&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Make it executable and try it out:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code&gt;$ chmod +x npm
$ ./npm install

up to date, audited 1 package in 211ms

found 0 vulnerabilities&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="sect2"&gt;
&lt;h3 id="adding-npm-packages"&gt;&lt;a class="anchor" href="#adding-npm-packages"&gt;&lt;/a&gt;Adding NPM Packages&lt;/h3&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Now we are ready to build something, let&amp;#8217;s set up &lt;code&gt;package.json&lt;/code&gt; with all the dependencies that we had in Webjars until now:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="json"&gt;{
    "name": "js-demo",
    "version": "0.0.1",
    "dependencies": {
        "@hotwired/stimulus": "^3.0.1",
        "@hotwired/turbo": "^7.1.0",
        "@popperjs/core": "^2.10.1",
        "bootstrap": "^5.1.3",
        "chart.js": "^3.6.0",
        "@springio/utils": "^1.0.5",
        "es-module-shims": "^1.3.0"
    },
    "scripts": {
        "build": "echo Building"
    }
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Running &lt;code&gt;./npm install&lt;/code&gt; (or &lt;code&gt;./mvnw generate-resources&lt;/code&gt;) will download those dependencies into &lt;code&gt;node_modules&lt;/code&gt;:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code&gt;$ ./npm install

added 7 packages, and audited 8 packages in 8s

2 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
$ ls node_modules/
@hotwired  @popperjs  @springio  bootstrap  chart.js  es-module-shims&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;It&amp;#8217;s OK to add all the downloaded and generated code to your &lt;code&gt;.gitignore&lt;/code&gt; (i.e. &lt;code&gt;node/&lt;/code&gt;, &lt;code&gt;node_modules/&lt;/code&gt;, and &lt;code&gt;package-lock.json&lt;/code&gt;).&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="sect2"&gt;
&lt;h3 id="building-with-rollup"&gt;&lt;a class="anchor" href="#building-with-rollup"&gt;&lt;/a&gt;Building with Rollup&lt;/h3&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;The Bootstrap maintainers use &lt;a href="https://rollupjs.org/guide/en/"&gt;Rollup&lt;/a&gt; to bundle their code, so that seems like a decent choice. One thing it does really well is "tree shaking" to reduce the amount of Javscript you need to ship with your application. Feel free to experiment with other tools. To get started with Rollup we will need some development dependencies in &lt;code&gt;package.json&lt;/code&gt; and a new build script:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="json"&gt;{
    ...
    "devDependencies": {
        "rollup": "^2.60.2",
        "rollup-plugin-node-resolve": "^2.0.0"
    },
    "scripts": {
        "build": "rollup -c"
    }
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Rollup has its own config file, so here&amp;#8217;s one that will bundle a local Javascript source into the app and serve the Javsacript up from &lt;code&gt;/index.js&lt;/code&gt; at runtime. This is &lt;code&gt;rollup.config.js&lt;/code&gt;:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="json"&gt;import resolve from 'rollup-plugin-node-resolve';

export default {
	input: 'src/main/js/index.js',
	output: {
	  file: 'target/classes/static/index.js',
	  format: 'esm'
	},
	plugins: [
		resolve({
			esm: true,
			main: true,
			browser: true
		  })
	]
};&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;So if we move all the Javascript into &lt;code&gt;src/main/js/index.js&lt;/code&gt; we would have just one &lt;code&gt;&amp;lt;script&amp;gt;&lt;/code&gt; in &lt;code&gt;index.html&lt;/code&gt;, for instance at the end of the &lt;code&gt;&amp;lt;body&amp;gt;&lt;/code&gt;:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;&amp;lt;script type="module"&amp;gt;
import '/index.js';
&amp;lt;/script&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;We will keep the CSS for now, and we can deal with a local build for that later. So in &lt;code&gt;index.js&lt;/code&gt; we have all the &lt;code&gt;&amp;lt;script&amp;gt;&lt;/code&gt; tag contents mushed together (or we could have split it up into modules and imported them):&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="javascript"&gt;import 'bootstrap';
import '@hotwired/turbo';
import '@springio/utils';
import { Application, Controller } from '@hotwired/stimulus';
import { Chart, BarController, BarElement, PieController, ArcElement, LinearScale, ategoryScale, Title, Legend } from 'chart.js';

Turbo.connectStreamSource(new EventSource("/stream"))
window.Stimulus = Application.start();

Chart.register(BarController, BarElement, PieController, ArcElement, LinearScale, CategoryScale, itle, Legend);

Stimulus.register("hello", class extends Controller {
	...
});

Stimulus.register("chart", class extends Controller {
	...
});&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;If we build and run the app it should all work, and Rollup creates a new &lt;code&gt;index.js&lt;/code&gt; in &lt;code&gt;target/classes/static&lt;/code&gt; where it will be picked up by the executable JAR. Because of the action of the "resolve" plugin in Rollup, the new &lt;code&gt;index.js&lt;/code&gt; has all of the code that is needed to run our application. If any dependencies are packaged as a proper ESM bundle, Rollup will be able to shake the unused parts of them out. This works for Hotwired Stimulus at least, and most of the others get included wholesale, but the result is still only 750K (most of it Bootstrap):&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code&gt;$ ls -l target/classes/static/index.js
-rw-r--r-- 1 dsyer dsyer 768778 Dec 14 09:34 target/classes/static/index.js&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;The browser has to download this once, which is an advantage when the server is HTTP 1.1 (HTTP 2 changes things a bit), and it means the executable JAR isn&amp;#8217;t bloated with stuff that never gets used. There are other plugin options with Rollup to compress the Javascript, and we&amp;#8217;ll see some of those in the next section.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="sect2"&gt;
&lt;h3 id="building-css-with-sass"&gt;&lt;a class="anchor" href="#building-css-with-sass"&gt;&lt;/a&gt;Building CSS with Sass&lt;/h3&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;So far we have used plain CSS bundled in some NPM libraries. Most applications need their own stylesheets and developers prefer to work with some form of templating library and build time tooling to compile to CSS. The most prevalent such tool (but not the only one) is &lt;a href="https://www.npmjs.com/package/sass"&gt;Sass&lt;/a&gt;. Bootstrap uses it, and indeed packages its source files in the NPM bundle, so you can extend and adapt the Bootstrap styles to your own requirements.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;We can see how that works by building the CSS for our application, even if we don&amp;#8217;t do much customization. Start with some tooling dependencies in NPM:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code&gt;$ ./npm install --save-dev rollup-plugin-scss rollup-plugin-postcss sass&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;which leads to some new entries in &lt;code&gt;package.json&lt;/code&gt;:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="json"&gt;{
    ...
    "devDependencies": {
        "rollup": "^2.60.2",
        "rollup-plugin-node-resolve": "^2.0.0",
        "rollup-plugin-postcss": "^0.2.0",
        "rollup-plugin-scss": "^3.0.0",
        "sass": "^1.44.0"
    },
    ...
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;This means we can update our &lt;code&gt;rollup.config.js&lt;/code&gt; to use the new tools:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="javascript"&gt;import resolve from "rollup-plugin-node-resolve";
import scss from "rollup-plugin-scss";
import postcss from "rollup-plugin-postcss";

export default {
  input: "src/main/js/index.js",
  output: {
    file: "target/classes/static/index.js",
    format: "esm",
  },
  plugins: [
    resolve({
      esm: true,
      main: true,
      browser: true,
    }),
    scss(),
    postcss(),
  ],
};&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;The CSS processors look in the same place as the main input file, so we can just create a &lt;code&gt;style.scss&lt;/code&gt; in &lt;code&gt;src/main/js&lt;/code&gt; and import the Bootstrap code:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="css"&gt;@import 'bootstrap/scss/bootstrap';&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Customizations in SCSS would follow that if we were doing it for real. Then in &lt;code&gt;index.js&lt;/code&gt; we add imports for this and the Spring utils library:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="javascript"&gt;import './style.scss';
import '@springio/utils/style.css';
...&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;and re-build. This will lead to a new &lt;code&gt;index.css&lt;/code&gt; being created (the same file name as the main input Javascript) which we can then link to in the &lt;code&gt;&amp;lt;head&amp;gt;&lt;/code&gt; of &lt;code&gt;index.html&lt;/code&gt;:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="html"&gt;&amp;lt;head&amp;gt;
	...
	&amp;lt;link rel="stylesheet" type="text/css" href="index.css" /&amp;gt;
&amp;lt;/head&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;That&amp;#8217;s it. We have one &lt;code&gt;index.js&lt;/code&gt; script driving all the Javascript and CSS for our Turbo sample, and we can now remove all remaining Webjars dependencies in the &lt;code&gt;pom.xml&lt;/code&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="sect1"&gt;
&lt;h2 id="bundling-a-react-app-with-node-js"&gt;&lt;a class="anchor" href="#bundling-a-react-app-with-node-js"&gt;&lt;/a&gt;Bundling a React App with Node.js&lt;/h2&gt;
&lt;div class="sectionbody"&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;To finish up we can apply the same ideas to the &lt;code&gt;react-webjars&lt;/code&gt; sample, removing Webjars and extracting Javascript and CSS into separate source files. This way, we can also finally get rid of the slightly problematic &lt;code&gt;@babel/standalone&lt;/code&gt;. We can start from the &lt;code&gt;react-webjars&lt;/code&gt; sample and add the Frontend Plugin as above (or otherwise acquire Node.js), and create a &lt;code&gt;package.json&lt;/code&gt; either manually or via the &lt;code&gt;npm&lt;/code&gt; CLI. We will need the React dependencies, and also the build time tooling for Babel. Here&amp;#8217;s what we end up with:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="json"&gt;{
    "name": "js-demo",
    "version": "0.0.1",
    "dependencies": {
        "@popperjs/core": "^2.10.1",
        "@springio/utils": "^1.0.4",
        "bootstrap": "^5.1.3",
        "chart.js": "^3.6.0",
        "react": "^17.0.2",
        "react-dom": "^17.0.2"
    },
    "devDependencies": {
        "@babel/core": "^7.16.0",
        "@babel/preset-env": "^7.16.0",
        "@babel/preset-react": "^7.16.0",
        "@rollup/plugin-babel": "^5.3.0",
        "@rollup/plugin-commonjs": "^21.0.1",
        "@rollup/plugin-node-resolve": "^13.0.6",
        "@rollup/plugin-replace": "^3.0.0",
        "postcss": "^8.4.5",
        "rollup": "^2.60.2",
        "rollup-plugin-postcss": "^4.0.2",
        "rollup-plugin-scss": "^3.0.0",
        "sass": "^1.44.0",
        "styled-jsx": "^4.0.1"
    },
    "scripts": {
        "build": "rollup -c"
    }
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;We need the &lt;code&gt;commonjs&lt;/code&gt; plugin because React is not packaged as an ESM and the imports will not work without doing some conversion. The Babel tooling comes with a config file &lt;code&gt;.babelrc&lt;/code&gt; which we use to tell it to build the JSX and React components:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="json"&gt;{
        "presets": ["@babel/preset-env", "@babel/preset-react"],
        "plugins": ["styled-jsx/babel"]
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;With those build tools in place we can extract all the Javascript from &lt;code&gt;index.html&lt;/code&gt; and put it in &lt;code&gt;src/main/resources/static/index.js&lt;/code&gt;. It&amp;#8217;s almost a copy paste, but we will want to add the CSS imports:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="javascript"&gt;import './style.scss';
import '@springio/utils/style.css';&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;and the imports from React look like this:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="javascript"&gt;import React from 'react';
import ReactDOM from 'react-dom';&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;You can build that with &lt;code&gt;npm run build&lt;/code&gt; (or &lt;code&gt;./mvnw generate-resources&lt;/code&gt;) and it should work - all the tabs have some content and all the buttons generate some content.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Finally we just need to tidy up the &lt;code&gt;index.html&lt;/code&gt; so that it only imports the &lt;code&gt;index.js&lt;/code&gt; and &lt;code&gt;index.css&lt;/code&gt;, and then all the features from the Webjars project should be working as expected.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="sect1"&gt;
&lt;h2 id="conclusion"&gt;&lt;a class="anchor" href="#conclusion"&gt;&lt;/a&gt;Conclusion&lt;/h2&gt;
&lt;div class="sectionbody"&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;There are many choices available for client side development, and Spring Boot doesn&amp;#8217;t really have much influence on any of them, so you are free to choose whatever suits you. This article was necessarily limited in scope (we literally can&amp;#8217;t look at everything from every angle), but hopefully was able to highlight some of the interesting possibilities. I find myself personally quite attached to HTMX having used it for a few mini projects recently, but your mileage, as ever, may vary. Please comment on the blog or send feedback via Github or the angry bird app - it will be interesting to hear what people think. Should we publish this article as a tutorial on &lt;a href="https://spring.io"&gt;spring.io&lt;/a&gt; for example?&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;!-- rendered by Sagan Renderer Service --&gt;</content>
  </entry>
  <entry>
    <title>A Bootiful Podcast: Ronald Dehuysser, Creator of the Distributed Job Scheduler JobRunr</title>
    <link rel="alternate" href="https://spring.io/blog/2021/12/16/a-bootiful-podcast-ronald-dehuysser-creator-of-the-distributed-job-scheduler-jobrunr" />
    <category term="engineering" label="Engineering" />
    <author>
      <name>Josh Long</name>
    </author>
    <id>tag:spring.io,2021-12-17:4647</id>
    <updated>2021-12-17T00:00:00Z</updated>
    <content type="html">&lt;p&gt;Hi, Spring fans! In this installment, Josh Long talks to JobRunr.io creator &lt;a href="https://twitter.com/rdehuyss"&gt;Ronald Dehuysser (@rdehuyss)&lt;/a&gt; about &lt;a href="https://www.jobrunr.io"&gt;JobRunr&lt;/a&gt;, which is a distributed job scheduling engine that plugs right into Spring Boot. &lt;/p&gt;
&lt;iframe title="Ronald Dehuysser, Creator of the Distributed Job Scheduler JobRunr" allowtransparency="true" height="150" width="100%" style="border: none; min-width: min(100%, 430px);" scrolling="no" data-name="pb-iframe-player" src="https://www.podbean.com/player-v2/?i=3tr4c-1159863-pb&amp;from=pb6admin&amp;share=1&amp;download=1&amp;rtl=0&amp;fonts=Arial&amp;skin=1&amp;font-color=&amp;btn-skin=7"&gt;&lt;/iframe&gt;
&lt;!-- rendered by Sagan Renderer Service --&gt;</content>
  </entry>
  <entry>
    <title>Spring Framework 6.0 M1 released</title>
    <link rel="alternate" href="https://spring.io/blog/2021/12/16/spring-framework-6-0-m1-released" />
    <category term="releases" label="Releases" />
    <author>
      <name>Juergen Hoeller</name>
    </author>
    <id>tag:spring.io,2021-12-16:4644</id>
    <updated>2021-12-16T16:00:32Z</updated>
    <content type="html">&lt;p&gt;Dear Spring community,&lt;/p&gt;
&lt;p&gt;It is my pleasure to announce that the first Spring Framework 6.0 milestone release is available from &lt;a href="https://repo.spring.io/"&gt;htts://repo.spring.io/milestone&lt;/a&gt; now. This initial milestone covers our baseline upgrade efforts, in particular requiring JDK 17+ and migrating to the Jakarta EE 9 APIs; see my &lt;a href="https://spring.io/blog/2021/09/02/a-java-17-and-jakarta-ee-9-baseline-for-spring-framework-6"&gt;recent baseline blog post&lt;/a&gt; for the rationale. At the same time, it removes many long-deprecated classes, including several support packages for outdated third-party infrastructure.&lt;/p&gt;
&lt;p&gt;For current upgrade notes, please refer to our &lt;a href="https://github.com/spring-projects/spring-framework/wiki/Upgrading-to-Spring-Framework-6.x"&gt;Upgrading to Spring Framework 6.0 page&lt;/a&gt; which we will keep updating. Follow our main branch on &lt;a href="https://github.com/spring-projects/spring-framework/"&gt;GitHub&lt;/a&gt; for the latest changes, as we prepare for 6.0 M2 and the corresponding Spring Boot 3.0 M1 release in January. At that point, you will also be able to consume Spring Framework 6.0 through &lt;a href="https://start.spring.io/"&gt;https://start.spring.io/&lt;/a&gt;. For the time being, feel free to grab 6.0 M1 from &lt;a href="https://repo.spring.io/"&gt;https://repo.spring.io/&lt;/a&gt; and let us know how it goes.&lt;/p&gt;
&lt;p&gt;Cheers,&lt;br/&gt;Juergen&lt;/p&gt;
&lt;!-- rendered by Sagan Renderer Service --&gt;</content>
  </entry>
  <entry>
    <title>Spring Framework 5.3.14 and 5.2.19 available now</title>
    <link rel="alternate" href="https://spring.io/blog/2021/12/16/spring-framework-5-3-14-and-5-2-19-available-now" />
    <category term="releases" label="Releases" />
    <author>
      <name>St?phane Nicoll</name>
    </author>
    <id>tag:spring.io,2021-12-16:4645</id>
    <updated>2021-12-16T10:05:53Z</updated>
    <content type="html">&lt;p&gt;On behalf of the team and everyone who has contributed, I am pleased to announce that Spring Framework &lt;code&gt;5.3.14&lt;/code&gt; and &lt;code&gt;5.2.19&lt;/code&gt; are available now.&lt;/p&gt;
&lt;p&gt;Spring Framework &lt;code&gt;5.3.14&lt;/code&gt; includes &lt;a href="https://github.com/spring-projects/spring-framework/releases/tag/v5.3.14"&gt;36 fixes and improvements&lt;/a&gt;. Spring Framework &lt;code&gt;5.2.19&lt;/code&gt; includes &lt;a href="https://github.com/spring-projects/spring-framework/releases/tag/v5.2.19.RELEASE"&gt;11 selected fixes and improvements&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Stay tuned for the announcement of Spring Framework &lt;code&gt;6.0.0-M1&lt;/code&gt; later today!&lt;/p&gt;
&lt;p&gt;&lt;a href="https://projects.spring.io/spring-framework/"&gt;Project Page&lt;/a&gt; | &lt;a href="https://github.com/spring-projects/spring-framework"&gt;GitHub&lt;/a&gt; | &lt;a href="https://github.com/spring-projects/spring-framework/issues"&gt;Issues&lt;/a&gt; | &lt;a href="https://docs.spring.io/spring-framework/docs/5.3.14/reference/html/"&gt;Documentation&lt;/a&gt;&lt;/p&gt;
&lt;!-- rendered by Sagan Renderer Service --&gt;</content>
  </entry>
  <entry>
    <title>Spring Cloud 2020.0.5 (Ilford) Has Been Released</title>
    <link rel="alternate" href="https://spring.io/blog/2021/12/16/spring-cloud-2020-0-5-ilford-has-been-released" />
    <category term="releases" label="Releases" />
    <author>
      <name>Ryan Baxter</name>
    </author>
    <id>tag:spring.io,2021-12-16:4646</id>
    <updated>2021-12-16T08:00:00Z</updated>
    <content type="html">&lt;p&gt;On behalf of the community, I am pleased to announce that the General Availability (RELEASE) of the &lt;a href="https://cloud.spring.io"&gt;Spring Cloud 2020.0.5&lt;/a&gt; Release Train is available today. The release can be found in &lt;a href="https://repo1.maven.org/maven2/org/springframework/cloud/spring-cloud-dependencies/2020.0.5/"&gt;Maven Central&lt;/a&gt;. You can check out the 2020.0.5 &lt;a href="https://github.com/spring-cloud/spring-cloud-release/wiki/Spring-Cloud-2020.0-Release-Notes"&gt;release notes for more information&lt;/a&gt;.&lt;/p&gt;&lt;h2&gt;&lt;a href="#notable-changes-in-the-2020-0-5-release-train" class="anchor" name="notable-changes-in-the-2020-0-5-release-train"&gt;&lt;/a&gt;Notable Changes in the 2020.0.5 Release Train&lt;/h2&gt;&lt;h3&gt;&lt;a href="#spring-cloud-netflix" class="anchor" name="spring-cloud-netflix"&gt;&lt;/a&gt;Spring Cloud Netflix&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;Upgraded Netflix/Eureka to &lt;code&gt;1.10.17&lt;/code&gt; &lt;a href="https://github.com/spring-cloud/spring-cloud-netflix/issues/4050"&gt;issue&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h3&gt;&lt;a href="#spring-cloud-config" class="anchor" name="spring-cloud-config"&gt;&lt;/a&gt;Spring Cloud Config&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;Support Using HTTPS proxies for Git Repositories (&lt;a href="https://github.com/spring-cloud/spring-cloud-config/issues/1965"&gt;1965&lt;/a&gt;)&lt;/li&gt;
  &lt;li&gt;Support ordering AWS, Redis, and CredHub Repositories (&lt;a href="https://github.com/spring-cloud/spring-cloud-config/issues/1980"&gt;1980&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;&lt;h3&gt;&lt;a href="#spring-cloud-gateway" class="anchor" name="spring-cloud-gateway"&gt;&lt;/a&gt;Spring Cloud Gateway&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;Enhancements for metrics: &lt;a href="https://github.com/spring-cloud/spring-cloud-gateway/issues/2241"&gt;Netty connections&lt;/a&gt;, &lt;a href="https://github.com/spring-cloud/spring-cloud-gateway/pull/2419"&gt;path as tag&lt;/a&gt;, and &lt;a href="https://github.com/spring-cloud/spring-cloud-gateway/pull/2421"&gt;route definition count&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h3&gt;&lt;a href="#spring-cloud-kubernetes" class="anchor" name="spring-cloud-kubernetes"&gt;&lt;/a&gt;Spring Cloud Kubernetes&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;Specify User Agent for Kubernetes API Client (&lt;a href="https://github.com/spring-cloud/spring-cloud-kubernetes/pull/898"&gt;898&lt;/a&gt;)&lt;/li&gt;
  &lt;li&gt;Allow activeProfile not to be appended (&lt;a href="https://github.com/spring-cloud/spring-cloud-kubernetes/issues/508"&gt;508&lt;/a&gt;)&lt;/li&gt;
  &lt;li&gt;Upgrade to Kubernetes Java Client 11.0.3&lt;/li&gt;
&lt;/ul&gt;&lt;h3&gt;&lt;a href="#spring-cloud-openfeign" class="anchor" name="spring-cloud-openfeign"&gt;&lt;/a&gt;Spring Cloud Openfeign&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;Added support for size = 0 in &lt;code&gt;PageJacksonModule&lt;/code&gt; &lt;a href="https://github.com/spring-cloud/spring-cloud-openfeign/pull/636"&gt;PR&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h3&gt;&lt;a href="#spring-cloud-sleuth" class="anchor" name="spring-cloud-sleuth"&gt;&lt;/a&gt;Spring Cloud Sleuth&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;Cache Executor wrappers (&lt;a href="https://github.com/spring-cloud/spring-cloud-sleuth/issues/2020"&gt;2020&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;&lt;h3&gt;&lt;a href="#spring-cloud-vault" class="anchor" name="spring-cloud-vault"&gt;&lt;/a&gt;Spring Cloud Vault&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;TOKEN auth from file (~/.vault_token) (&lt;a href="https://github.com/spring-cloud/spring-cloud-vault/issues/609"&gt;609&lt;/a&gt;)&lt;/li&gt;
  &lt;li&gt;Usage of spring.cloud.vault.reactive.enabled property in VaultConfigDataLoader (&lt;a href="https://github.com/spring-cloud/spring-cloud-vault/issues/619"&gt;619&lt;/a&gt;)&lt;/li&gt;
  &lt;li&gt;Add support for multiple database secrets generation (&lt;a href="https://github.com/spring-cloud/spring-cloud-vault/issues/459"&gt;459&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The following modules were updated as part of 2020.0.5:&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Module &lt;/th&gt;
      &lt;th&gt;Version &lt;/th&gt;
      &lt;th&gt;Issues&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Spring Cloud Netflix &lt;/td&gt;
      &lt;td&gt;3.0.5 &lt;/td&gt;
      &lt;td&gt;(&lt;a href="https://github.com/spring-cloud/spring-cloud-netflix/milestone/107?closed=1"&gt;issues&lt;/a&gt;)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Spring Cloud Config &lt;/td&gt;
      &lt;td&gt;3.0.6 &lt;/td&gt;
      &lt;td&gt;(&lt;a href="https://github.com/spring-cloud/spring-cloud-config/milestone/94?closed=1"&gt;issues&lt;/a&gt;)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Spring Cloud Sleuth &lt;/td&gt;
      &lt;td&gt;3.0.5 &lt;/td&gt;
      &lt;td&gt;(&lt;a href="https://github.com/spring-cloud/spring-cloud-sleuth/milestone/94?closed=1"&gt;issues&lt;/a&gt;)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Spring Cloud Gateway &lt;/td&gt;
      &lt;td&gt;3.0.6 &lt;/td&gt;
      &lt;td&gt;(&lt;a href="https://github.com/spring-cloud/spring-cloud-gateway/milestone/61?closed=1"&gt;issues&lt;/a&gt;)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Spring Cloud Cloudfoundry &lt;/td&gt;
      &lt;td&gt;3.0.3 &lt;/td&gt;
      &lt;td&gt;&amp;nbsp;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Spring Cloud Contract &lt;/td&gt;
      &lt;td&gt;3.0.5 &lt;/td&gt;
      &lt;td&gt;(&lt;a href="https://github.com/spring-cloud/spring-cloud-contract/milestone/81?closed=1"&gt;issues&lt;/a&gt;)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Spring Cloud Kubernetes &lt;/td&gt;
      &lt;td&gt;2.0.5 &lt;/td&gt;
      &lt;td&gt;(&lt;a href="https://github.com/spring-cloud/spring-cloud-kubernetes/milestone/35?closed=1"&gt;issues&lt;/a&gt;)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Spring Cloud Zookeeper &lt;/td&gt;
      &lt;td&gt;3.0.5 &lt;/td&gt;
      &lt;td&gt;(&lt;a href="https://github.com/spring-cloud/spring-cloud-zookeeper/milestone/38?closed=1"&gt;issues&lt;/a&gt;)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Spring Cloud Cli &lt;/td&gt;
      &lt;td&gt;3.0.4 &lt;/td&gt;
      &lt;td&gt;&amp;nbsp;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Spring Cloud Task &lt;/td&gt;
      &lt;td&gt;2.3.5 &lt;/td&gt;
      &lt;td&gt;(&lt;a href="https://github.com/spring-cloud/spring-cloud-task/milestone/54"&gt;issues&lt;/a&gt;)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Spring Cloud Starter Build &lt;/td&gt;
      &lt;td&gt;2020.0.5 &lt;/td&gt;
      &lt;td&gt;&amp;nbsp;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Spring Cloud Openfeign &lt;/td&gt;
      &lt;td&gt;3.0.6 &lt;/td&gt;
      &lt;td&gt;(&lt;a href="https://github.com/spring-cloud/spring-cloud-openfeign/milestone/46?closed=1"&gt;issues&lt;/a&gt;)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Spring Cloud Vault &lt;/td&gt;
      &lt;td&gt;3.0.5 &lt;/td&gt;
      &lt;td&gt;(&lt;a href="https://github.com/spring-cloud/spring-cloud-vault/milestone/49?closed=1"&gt;issues&lt;/a&gt;)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Spring Cloud Commons &lt;/td&gt;
      &lt;td&gt;3.0.5 &lt;/td&gt;
      &lt;td&gt;(&lt;a href="https://github.com/spring-cloud/spring-cloud-commons/milestone/94?closed=1"&gt;issues&lt;/a&gt;)&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;As always, we welcome feedback on &lt;a href="https://github.com/spring-cloud/"&gt;GitHub&lt;/a&gt;, on &lt;a href="https://gitter.im/spring-cloud/spring-cloud"&gt;Gitter&lt;/a&gt;, on &lt;a href="https://stackoverflow.com/questions/tagged/spring-cloud"&gt;Stack Overflow&lt;/a&gt;, or on &lt;a href="https://twitter.com/SpringCloud"&gt;Twitter&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;To get started with Maven with a BOM (dependency management only):&lt;/p&gt;
&lt;pre&gt;&lt;code class="prettyprint"&gt;&lt;br/&gt;&amp;lt;dependencyManagement&amp;gt;&#xD;
    &amp;lt;dependencies&amp;gt;&#xD;
        &amp;lt;dependency&amp;gt;&#xD;
            &amp;lt;groupId&amp;gt;org.springframework.cloud&amp;lt;/groupId&amp;gt;&#xD;
            &amp;lt;artifactId&amp;gt;spring-cloud-dependencies&amp;lt;/artifactId&amp;gt;&#xD;
            &amp;lt;version&amp;gt;2020.0.5&amp;lt;/version&amp;gt;&#xD;
            &amp;lt;type&amp;gt;pom&amp;lt;/type&amp;gt;&#xD;
            &amp;lt;scope&amp;gt;import&amp;lt;/scope&amp;gt;&#xD;
        &amp;lt;/dependency&amp;gt;&#xD;
    &amp;lt;/dependencies&amp;gt;&#xD;
&amp;lt;/dependencyManagement&amp;gt;&#xD;
&amp;lt;dependencies&amp;gt;&#xD;
    &amp;lt;dependency&amp;gt;&#xD;
        &amp;lt;groupId&amp;gt;org.springframework.cloud&amp;lt;/groupId&amp;gt;&#xD;
        &amp;lt;artifactId&amp;gt;spring-cloud-starter-config&amp;lt;/artifactId&amp;gt;&#xD;
    &amp;lt;/dependency&amp;gt;&#xD;
    &amp;lt;dependency&amp;gt;&#xD;
        &amp;lt;groupId&amp;gt;org.springframework.cloud&amp;lt;/groupId&amp;gt;&#xD;
        &amp;lt;artifactId&amp;gt;spring-cloud-starter-netflix-eureka-client&amp;lt;/artifactId&amp;gt;&#xD;
    &amp;lt;/dependency&amp;gt;&#xD;
    ...&#xD;
&amp;lt;/dependencies&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;or with Gradle:&lt;/p&gt;
&lt;pre&gt;&lt;code class="prettyprint"&gt;buildscript {&#xD;
    dependencies {&#xD;
        classpath &amp;#39;io.spring.gradle:dependency-management-plugin:1.0.11.RELEASE&amp;#39;&#xD;
    }&#xD;
}&#xD;
&#xD;
apply plugin: &amp;#39;io.spring.dependency-management&amp;#39;&#xD;
&#xD;
dependencyManagement {&#xD;
    imports {&#xD;
        mavenBom &amp;#39;org.springframework.cloud:spring-cloud-dependencies:2020.0.5&amp;#39;&#xD;
    }&#xD;
}&#xD;
&#xD;
dependencies {&#xD;
    implementation &amp;#39;org.springframework.cloud:spring-cloud-starter-config&amp;#39;&#xD;
    implementation &amp;#39;org.springframework.cloud:spring-cloud-starter-netflix-eureka-client&amp;#39;&#xD;
    ...&#xD;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;!-- rendered by Sagan Renderer Service --&gt;</content>
  </entry>
  <entry>
    <title>Spring Tips: @Controllers and GraphQL</title>
    <link rel="alternate" href="https://spring.io/blog/2021/12/15/spring-tips-controllers-and-graphql" />
    <category term="engineering" label="Engineering" />
    <author>
      <name>Josh Long</name>
    </author>
    <id>tag:spring.io,2021-12-16:4643</id>
    <updated>2021-12-16T04:00:00Z</updated>
    <content type="html">&lt;p&gt;Hi, Spring fans! In this installment, we continue our tour of all things &lt;code&gt;@Controller&lt;/code&gt; by looking at the nascent &lt;a href="https://github.com/spring-projects/spring-graphql"&gt;Spring GraphQL&lt;/a&gt; project&lt;/p&gt;
&lt;iframe width="560" height="315" src="https://www.youtube.com/embed/eVqmB2hsIVk" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen&gt;&lt;/iframe&gt;
&lt;!-- rendered by Sagan Renderer Service --&gt;</content>
  </entry>
  <entry>
    <title>This Week in Spring - December 14th, 2021</title>
    <link rel="alternate" href="https://spring.io/blog/2021/12/14/this-week-in-spring-december-14th-2021" />
    <category term="engineering" label="Engineering" />
    <author>
      <name>Josh Long</name>
    </author>
    <id>tag:spring.io,2021-12-14:4642</id>
    <updated>2021-12-14T19:00:00Z</updated>
    <content type="html">&lt;p&gt;Hi, Spring fans! How are you? Welcome to another installment of &lt;em&gt;This Week in Spring&lt;/em&gt;! I&amp;rsquo;m doing alright! It&amp;rsquo;s noon as I write this, and I&amp;rsquo;ve got GSUG joint presentation with &lt;a href="https://twitter.com/mraible"&gt;Matt Raible&lt;/a&gt; later today. Then, tonight at midnight my time to 5 am or 6 am, I&amp;rsquo;m kicking off a two-day workshop for GOTO! I look forward to seeing ya there! Anyway, we&amp;rsquo;ve got a lot to cover so let&amp;rsquo;s dive into it! &lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Read this first! If you&amp;rsquo;ve been living under a rock, you may not have heard of the recent Log4J2 vulnerability. If you&amp;rsquo;re using the default, out-of-the-box Spring Boot logging support, then this does &lt;em&gt;not&lt;/em&gt; apply to you! But, if you are using Log4j2, specifically, then you need to read this post on &lt;a href="https://spring.io/blog/2021/12/10/log4j2-vulnerability-and-spring-boot"&gt;Log4j2 and Spring Boot&lt;/a&gt;!&lt;/li&gt;
  &lt;li&gt;&lt;a href="https://twitter.com/brunoborges/status/1469426918550245377?s=12"&gt;Bruno Borges tweets this very simple workaround for those of you who are using Log4j2 and can&amp;rsquo;t change the startup scripts of your application afflicted by the Log4j2 exploit&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Once you&amp;rsquo;re sure your applications are healthy and happy, check out the new Spring Native 0.11 release! And its new AOT engine, which &lt;a href="https://spring.io/blog/2021/12/09/new-aot-engine-brings-spring-native-to-the-next-level"&gt; brings Spring Native to the Next Level&lt;/a&gt;.&lt;/li&gt;
  &lt;li&gt;Don&amp;rsquo;t want to read the blog? I did a &lt;a href="https://twitter.com/SpringTipsLive"&gt;Spring Tips (@SpringTipsLive) video&lt;/a&gt; you can &lt;a href="https://www.youtube.com/watch?v=DVo5vmk5Cuw&amp;feature=emb_title"&gt;watch to see everything new and nice in Spring Native 0.11&lt;/a&gt;. This video goes deep, starting with the basics, looking at performance numbers (dramatic reductions in compile-time, startup time, and runtime memory footprint) for some typical workloads, and then looks at the new AOT engine&amp;rsquo;s extension planes.&lt;/li&gt;
  &lt;li&gt;&lt;a href="https://spring.io/blog/2021/12/09/a-bootiful-podcast-transformative-leader-brilliant-technologist-my-friend-patrick-chanezon"&gt;A Bootiful Podcast: Transformative leader, brilliant technologist, my friend, Patrick Chanezon&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="https://spring.io/blog/2021/12/08/secure-communications-end-to-end-for-spring-boot-apps-in-zero-trust-environment"&gt;Secure communications end-to-end for Spring Boot apps ? in Zero Trust environment&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="https://spring.io/blog/2021/12/08/spring-cloud-gateway-and-grpc"&gt;Spring Cloud Gateway and gRPC&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="https://spring.io/blog/2021/12/14/spring-cloud-square-0-4-0-rc1-is-available"&gt;Spring Cloud Square 0.4.0-RC1 is available&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="https://spring.io/blog/2021/12/14/spring-graphql-1-0-0-m4-released"&gt;Spring GraphQL 1.0.0-M4 Released&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="https://www.youtube.com/embed/uJwx8km1N2w"&gt;Spring Native for Serverless Java&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="https://twitter.com/springtools4/status/1468665152140685320?s=12"&gt;Spring Tools 4 on Twitter&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="https://spring.io/blog/2021/12/08/spring-tools-4-13-0-released"&gt;Spring Tools 4.13.0 released&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="https://twitter.com/rey_antoine/status/1469686287808737280?s=12"&gt;Both Vaadin Flow and Vaadin Fusion versions of the Spring Petclinic sample have joined the Spring Petclinic Community &lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="https://twitter.com/ghillert/status/1468401392570097666?s=12"&gt;The amazing Gunnar Hillert has posted the Oracle Coherence Sock Shop Microservices example app for Spring Boot, which adds better Tracing support using Spring Cloud Sleuth for Jaeger and Zipkin. This is based on an original app from Weaveworks.&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="https://twitter.com/rotnroll666/status/1470007457044967424?s=12"&gt;Neo4j&amp;rsquo;s Michael Simons has this great tweet: Did you know that Neo4js releases the Neo4j Java driver as a slim option, under the coordinates &lt;code&gt;org.neo4j.driver&lt;/code&gt;:&lt;code&gt;neo4j-java-driver-slim&lt;/code&gt;, without shaded dependencies? This might be handy if your project already has a dependency to Project Reactor or Netty. &lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="https://twitter.com/rorypreddy/status/1470090509549023240?s=12"&gt;Microsoft&amp;rsquo;s Rory Preddy tweeted that a demo-heavy Monitoring Java on Azure series is now available. Besides data migration, end-to-end monitoring is the #1 challenge for developers migrating Spring Boot apps to the cloud - in this series, we demystify all!&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="https://twitter.com/sharat_chander/status/1468849392404811780?s=21"&gt;Now Available: JDK migration guide Includes significant changes &amp;amp; enhancements in #JDK17 ?? Move your Java version forward&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="https://twitter.com/piotr_minkowski/status/1468874124575580160?s=12"&gt;Piotr Mi?kowski has a nice little tip: If you use a dedicated management port for Actuator endpoints starting from Spring Boot 2.6 you may expose a particular health group on the server main port under the additional path. It is useful in #Kubernetes liveness and readiness probes.&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="https://www.youtube.com/watch?v=rS2AhcIPQEs"&gt;Tanzu Tuesdays 74 - Carvel support in Kubeapps - New pluggable gRPC-based architecture - YouTube&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="https://twitter.com/JavaAtMicrosoft/status/1469017124328730627"&gt;Azure Spring Cloud scales #SpringBoot apps to billions of requests per day without the hassle of managing infrastructure. See it in action &lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="https://twitter.com/VMware/status/1468962596879417355"&gt; This is a great, video overview of VMwares free, open-source Kubernetes distro, the Tanzu Community Edition. &lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;A nice report on the Microsoft Tech Community: &lt;a href="https://techcommunity.microsoft.com/t5/apps-on-azure-blog/2021-report-how-developers-migrate-spring-apps-to-the-cloud/ba-p/3021421"&gt;How developers migrate Spring apps to the cloud&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- rendered by Sagan Renderer Service --&gt;</content>
  </entry>
  <entry>
    <title>Spring Cloud Square 0.4.0-RC1 is available</title>
    <link rel="alternate" href="https://spring.io/blog/2021/12/14/spring-cloud-square-0-4-0-rc1-is-available" />
    <category term="releases" label="Releases" />
    <author>
      <name>Olga Maciaszek-Sharma</name>
    </author>
    <id>tag:spring.io,2021-12-14:4640</id>
    <updated>2021-12-14T18:24:22Z</updated>
    <content type="html">&lt;p&gt;On behalf of the community, I am pleased to announce that the Release Candidate 1 (RC1) of the &lt;a href="https://cloud.spring.io"&gt;Spring Cloud Square&lt;/a&gt; 0.4.0 is available today. The release can be found in &lt;a href="https://repo.spring.io/milestone/"&gt;Spring Milestone&lt;/a&gt; repository. You can check out the 0.4.0-RC1 &lt;a href="https://github.com/spring-projects-experimental/spring-cloud-square/releases/tag/v0.4.0-RC1"&gt;release notes for more information&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;This is primarily a bugfix release. See all issues included in this release &lt;a href="https://github.com/spring-projects-experimental/spring-cloud-square/milestone/2?closed=1"&gt;here&lt;/a&gt;.&lt;/p&gt;&lt;h2&gt;&lt;a href="#notable-changes-in-rc1" class="anchor" name="notable-changes-in-rc1"&gt;&lt;/a&gt;Notable changes in RC1:&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Spring Cloud Sleuth integration for OkHttpClient &lt;a href="https://github.com/spring-projects-experimental/spring-cloud-square/issues/36"&gt;#36&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The documentation for this milestone can be found &lt;a href="https://spring-projects-experimental.github.io/spring-cloud-square/docs/current/reference/html/index.html"&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;!-- rendered by Sagan Renderer Service --&gt;</content>
  </entry>
  <entry>
    <title>Spring GraphQL 1.0.0-M4 Released</title>
    <link rel="alternate" href="https://spring.io/blog/2021/12/14/spring-graphql-1-0-0-m4-released" />
    <category term="releases" label="Releases" />
    <author>
      <name>Brian Clozel</name>
    </author>
    <id>tag:spring.io,2021-12-14:4641</id>
    <updated>2021-12-14T16:04:00Z</updated>
    <content type="html">&lt;p&gt;The Spring GraphQL team has just released the 4th milestone towards a 1.0.0 release. Thanks to all contributors!&lt;/p&gt;
&lt;p&gt;In this milestone, we have further improved the annotation programming model and extended the Spring Data support that were provided &lt;a href="https://spring.io/blog/2021/10/28/spring-graphql-1-0-0-m3-released"&gt;in the previous milestones&lt;/a&gt;.&lt;/p&gt;&lt;h2&gt;&lt;a href="#interface-projections-for-graphql-arguments" class="anchor" name="interface-projections-for-graphql-arguments"&gt;&lt;/a&gt;Interface Projections for GraphQL Arguments&lt;/h2&gt;
&lt;p&gt;If you&amp;rsquo;re familiar with Spring Data&amp;rsquo;s &lt;a href="https://docs.spring.io/spring-data/commons/docs/current/reference/html/#projections.interfaces"&gt;Interface-based Projections&lt;/a&gt;, then this new feature will make perfect sense: you can use a well-defined interface to work with GraphQL arguments, without the need for any Object implementation. &lt;/p&gt;
&lt;p&gt;For example:&lt;/p&gt;
&lt;pre&gt;&lt;code class="prettyprint java"&gt;@Controller&#xD;
public class BookController {&#xD;
&#xD;
    @MutationMapping&#xD;
    public Book addBook(@Argument BookInputProjection bookInput) {&#xD;
        // ...&#xD;
    }&#xD;
}&#xD;
&#xD;
@ProjectedPayload&#xD;
interface BookInputProjection {&#xD;
&#xD;
    String getName();  // this maps to &amp;quot;name&amp;quot; argument&#xD;
&#xD;
    @Value(&amp;quot;#{target.author + &amp;#39; &amp;#39; + target.name})&#xD;
    String getAuthorAndName();&#xD;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;You can learn more about this in the &lt;a href="https://docs.spring.io/spring-graphql/docs/1.0.0-M4/reference/html/#controllers-schema-mapping-projectedpayload-argument"&gt;@ProjectedPayload Interface&lt;/a&gt; section of the documentation.&lt;/p&gt;&lt;h2&gt;&lt;a href="#query-by-example-support" class="anchor" name="query-by-example-support"&gt;&lt;/a&gt;Query By Example Support&lt;/h2&gt;
&lt;p&gt;Spring GraphQL now supports use of the Query by Example, Spring Data, extension for data fetching. To use this extension, you don&amp;rsquo;t need to write queries through store-specific query languages, but simply provide an example of a domain object with populated fields. The repository implementation will do the rest!&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;QueryByExampleDataFetcher&lt;/code&gt; makes it easy to create a &lt;code&gt;DataFetcher&lt;/code&gt; that binds GraphQL arguments onto an example object and then uses that to query for the data. There is also a feature for automated discovery of Query By Example repositories, based on the &lt;code&gt;@GraphQlRepository&lt;/code&gt; annotation, and mapping to top-level GraphQL queries.&lt;/p&gt;
&lt;p&gt;If your data store of choice supports it, this adds another way to leverage your Spring Data repositories in a Spring GraphQL application. See &lt;a href="https://docs.spring.io/spring-graphql/docs/1.0.0-M4/reference/html/#data-querybyexample"&gt;the documentation&lt;/a&gt; for more details.&lt;/p&gt;&lt;h2&gt;&lt;a href="#standard-bean-validation-for-graphql-arguments" class="anchor" name="standard-bean-validation-for-graphql-arguments"&gt;&lt;/a&gt;Standard Bean Validation for GraphQL Arguments&lt;/h2&gt;
&lt;p&gt;On top of the existing constraints enforced at the schema level, you can now use Standard Bean Validation to validate GraphQL arguments that are declared as controller method parameters. If the argument doesn&amp;rsquo;t match the defined constraints, a validation exception is thrown and written to the relevant &amp;ldquo;errors&amp;rdquo; section of the GraphQL response. &lt;/p&gt;
&lt;pre&gt;&lt;code class="prettyprint java"&gt;@Controller&#xD;
public class BookController {&#xD;
&#xD;
    @MutationMapping&#xD;
    public Book addBook(@Argument @Valid BookInput bookInput) {&#xD;
        // ...&#xD;
    }&#xD;
}&#xD;
&#xD;
public class BookInput {&#xD;
&#xD;
    @NotNull&#xD;
    private String title;&#xD;
&#xD;
    @NotNull&#xD;
    @Size(max=13)&#xD;
    private String isbn;&#xD;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This is similar to the existing support in Spring MVC or Spring WebFlux, you can &lt;a href="https://docs.spring.io/spring-graphql/docs/1.0.0-M4/reference/html/#controllers-schema-mapping-validation"&gt;learn more about &lt;code&gt;@Argument&lt;/code&gt; validation&lt;/a&gt; in the reference docs.&lt;/p&gt;&lt;h3&gt;&lt;a href="#context-access" class="anchor" name="context-access"&gt;&lt;/a&gt;Context Access&lt;/h3&gt;
&lt;p&gt;A new &lt;code&gt;@ContextValue&lt;/code&gt; annotation provides convenient access to values in the &lt;code&gt;GraphQLContext&lt;/code&gt; from controller methods.&lt;/p&gt;
&lt;p&gt;Controller methods can access the authenticated user by declaring a method argument of type &lt;code&gt;javax.security.Principal&lt;/code&gt;. &lt;/p&gt;
&lt;p&gt;&lt;code&gt;@BatchMapping&lt;/code&gt; methods can access the same &lt;code&gt;GraphQLContext&lt;/code&gt; that is also available for &lt;code&gt;@SchemaMapping&lt;/code&gt; methods and to any &lt;code&gt;DataFetcher&lt;/code&gt;.&lt;/p&gt;&lt;h3&gt;&lt;a href="#more" class="anchor" name="more"&gt;&lt;/a&gt;More&lt;/h3&gt;
&lt;p&gt;More &lt;a href="https://github.com/spring-projects/spring-graphql/milestone/5?closed=1"&gt;improvements and fixes made their way into their release&lt;/a&gt; and they&amp;rsquo;re available right now in the new Spring GraphQL 1.0.0-M4 release from the Spring Milestone repository.&lt;/p&gt;&lt;h3&gt;&lt;a href="#how-can-you-help" class="anchor" name="how-can-you-help"&gt;&lt;/a&gt;How can you help?&lt;/h3&gt;
&lt;p&gt;If you&amp;rsquo;re interested in helping out, you can &lt;a href="https://docs.spring.io/spring-graphql/docs/1.0.0-M4/reference/html/#boot-graphql"&gt;get started with Spring GraphQL&lt;/a&gt; and &lt;a href="https://github.com/spring-projects/spring-graphql/issues"&gt;raise issues on our GitHub project&lt;/a&gt;.&lt;br/&gt;If you have general questions, please ask on &lt;a href="https://stackoverflow.com"&gt;stackoverflow.com&lt;/a&gt; using the &lt;a href="https://stackoverflow.com/tags/spring-graphql"&gt;&lt;code&gt;spring-graphql&lt;/code&gt; tag&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://spring.io/projects/spring-graphql/"&gt;Project Page&lt;/a&gt; | &lt;a href="https://github.com/spring-projects/spring-graphql"&gt;GitHub&lt;/a&gt; | &lt;a href="https://github.com/spring-projects/spring-graphql/issues"&gt;Issues&lt;/a&gt; | &lt;a href="https://docs.spring.io/spring-graphql/docs/1.0.0-M4/reference/html/"&gt;Documentation&lt;/a&gt; | &lt;a href="https://stackoverflow.com/questions/tagged/spring-graphql"&gt;Stack Overflow&lt;/a&gt;&lt;/p&gt;
&lt;!-- rendered by Sagan Renderer Service --&gt;</content>
  </entry>
  <entry>
    <title>Log4J2 Vulnerability and Spring Boot</title>
    <link rel="alternate" href="https://spring.io/blog/2021/12/10/log4j2-vulnerability-and-spring-boot" />
    <category term="engineering" label="Engineering" />
    <author>
      <name>Phil Webb</name>
    </author>
    <id>tag:spring.io,2021-12-10:4639</id>
    <updated>2021-12-10T20:00:00Z</updated>
    <content type="html">&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;Updates&lt;/strong&gt;: Since this blog post has been published, a &lt;a href="https://logback.qos.ch/news.html"&gt;new logback 1.2.9 version has been published&lt;/a&gt;. While this fixes a security issue, prerequisites for exploits are very different as they &amp;ldquo;requires write access to logback&amp;rsquo;s configuration file&amp;rdquo;.&lt;br/&gt;Log4J also released a new 2.17.0 version with fixes for &lt;a href="https://nvd.nist.gov/vuln/detail/CVE-2021-45046"&gt;CVE-2021-45046&lt;/a&gt; and &lt;a href="https://nvd.nist.gov/vuln/detail/CVE-2021-45105"&gt;CVE-2021-45105&lt;/a&gt;&lt;br/&gt;Our upcoming releases will pick up these new versions.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;As you may have seen in the news, a new zero-day exploit has been reported against the popular Log4J2 library which can allow an attacker to remotely execute code. The vulnerability has been reported with &lt;a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228"&gt;CVE-2021-44228&lt;/a&gt; against the &lt;code&gt;log4j-core&lt;/code&gt; jar and has been fixed in &lt;a href="https://repo1.maven.org/maven2/org/apache/logging/log4j/log4j-core/2.15.0/"&gt;Log4J v2.15.0&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Spring Boot users are only affected by this vulnerability if they have &lt;a href="https://docs.spring.io/spring-boot/docs/current/reference/html/howto.html#howto.logging.log4j"&gt;switched the default logging system to Log4J2&lt;/a&gt;. The &lt;code&gt;log4j-to-slf4j&lt;/code&gt; and &lt;code&gt;log4j-api&lt;/code&gt; jars that we include in &lt;code&gt;spring-boot-starter-logging&lt;/code&gt; cannot be exploited on their own. Only applications using &lt;code&gt;log4j-core&lt;/code&gt; and including user input in log messages are vulnerable.&lt;/p&gt;
&lt;p&gt;Our upcoming v2.5.8 &amp;amp; v2.6.2 releases (due Dec 23, 2021) will pick up Log4J v2.17.0, but since this is such a serious vulnerability you may want to override our dependency management and upgrade your Log4J2 dependency sooner.&lt;/p&gt;&lt;h2&gt;&lt;a href="#maven" class="anchor" name="maven"&gt;&lt;/a&gt;Maven&lt;/h2&gt;
&lt;p&gt;For Maven users, you can follow &lt;a href="https://docs.spring.io/spring-boot/docs/current/maven-plugin/reference/htmlsingle/#using"&gt;these instructions&lt;/a&gt; and the set the &lt;code&gt;log4j2.version&lt;/code&gt; property.&lt;/p&gt;
&lt;p&gt;For example, if you are using our parent POM you can set the &lt;code&gt;log4j2.version&lt;/code&gt; property:&lt;/p&gt;
&lt;pre&gt;&lt;code class="prettyprint xml"&gt;&amp;lt;properties&amp;gt;&#xD;
    &amp;lt;log4j2.version&amp;gt;2.17.0&amp;lt;/log4j2.version&amp;gt;&#xD;
&amp;lt;/properties&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;If you are not using our parent, but instead are importing the &lt;code&gt;spring-boot-dependencies&lt;/code&gt; BOM, you&amp;rsquo;ll need to use a &lt;code&gt;&amp;lt;dependencyManagement&amp;gt;&lt;/code&gt; section:&lt;/p&gt;
&lt;pre&gt;&lt;code class="prettyprint xml"&gt;&amp;lt;dependencyManagement&amp;gt;&#xD;
    &amp;lt;dependencies&amp;gt;&#xD;
        &amp;lt;dependency&amp;gt;&#xD;
            &amp;lt;groupId&amp;gt;org.apache.logging.log4j&amp;lt;/groupId&amp;gt;&#xD;
            &amp;lt;artifactId&amp;gt;log4j-bom&amp;lt;/artifactId&amp;gt;&#xD;
            &amp;lt;version&amp;gt;2.17.0&amp;lt;/version&amp;gt;&#xD;
            &amp;lt;scope&amp;gt;import&amp;lt;/scope&amp;gt;&#xD;
            &amp;lt;type&amp;gt;pom&amp;lt;/type&amp;gt;&#xD;
        &amp;lt;/dependency&amp;gt;&#xD;
        ... other dependencies including spring-boot-dependencies&#xD;
    &amp;lt;/dependencies&amp;gt;&#xD;
&amp;lt;/dependencyManagement&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;To check that the override as been applied run &lt;code&gt;./mvnw dependency:list | grep log4j&lt;/code&gt; and check that the version is 2.17.0.&lt;/p&gt;&lt;h2&gt;&lt;a href="#gradle" class="anchor" name="gradle"&gt;&lt;/a&gt;Gradle&lt;/h2&gt;
&lt;p&gt;For Gradle users, you can follow &lt;a href="https://docs.spring.io/spring-boot/docs/current/gradle-plugin/reference/htmlsingle/#managing-dependencies.dependency-management-plugin.customizing"&gt;these instructions&lt;/a&gt; and update the version property, import the BOM or use a&lt;code&gt;resolutionStrategy&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;For most users, setting the &lt;code&gt;log4j2.version&lt;/code&gt; property will be sufficient:&lt;/p&gt;
&lt;pre&gt;&lt;code class="prettyprint gradle"&gt;ext[&amp;#39;log4j2.version&amp;#39;] = &amp;#39;2.17.0&amp;#39;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;If you&amp;rsquo;re using Gradle&amp;rsquo;s platform support instead of our dependency management plugin then you can add a dependency to the Log4J BOM:&lt;/p&gt;
&lt;pre&gt;&lt;code class="prettyprint gradle"&gt;implementation(platform(&amp;quot;org.apache.logging.log4j:log4j-bom:2.17.0&amp;quot;))
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;And if you cant use either of those methods then you can declare a &lt;code&gt;resolutionStrategy&lt;/code&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code class="prettyprint gradle"&gt;configurations.all {&#xD;
	resolutionStrategy.eachDependency { DependencyResolveDetails details -&amp;gt;&#xD;
		if (details.requested.group == &amp;#39;org.apache.logging.log4j&amp;#39;) {&#xD;
			details.useVersion &amp;#39;2.17.0&amp;#39;&#xD;
		}&#xD;
	}&#xD;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Whichever method you choose, to check that the override has been applied you can run &lt;code&gt;./gradlew dependencyInsight --dependency log4j-core&lt;/code&gt; and look for version 2.17.0.&lt;/p&gt;
&lt;!-- rendered by Sagan Renderer Service --&gt;</content>
  </entry>
  <entry>
    <title>A Bootiful Podcast: Transformative leader, brilliant technologist, my friend, Patrick Chanezon</title>
    <link rel="alternate" href="https://spring.io/blog/2021/12/09/a-bootiful-podcast-transformative-leader-brilliant-technologist-my-friend-patrick-chanezon" />
    <category term="engineering" label="Engineering" />
    <author>
      <name>Josh Long</name>
    </author>
    <id>tag:spring.io,2021-12-09:4638</id>
    <updated>2021-12-09T20:00:00Z</updated>
    <content type="html">&lt;p&gt;Hi, Spring fans! This week, &lt;a href="https://twitter.com/starbuxman"&gt;Josh Long (@starbuxman)&lt;/a&gt; talks to transformational leader, my old boss, legendary technologist, and friend &lt;a href="https://twitter.com/chanezon"&gt;Patrick Chanezon (@chanezon)&lt;/a&gt;.&lt;/p&gt;
&lt;iframe title="Transformative leader, brilliant technologist, my friend, Patrick Chanezon" allowtransparency="true" height="150" width="100%" style="border: none; min-width: min(100%, 430px);" scrolling="no" data-name="pb-iframe-player" src="https://www.podbean.com/player-v2/?i=7s93i-115064e-pb&amp;from=pb6admin&amp;share=1&amp;download=1&amp;rtl=0&amp;fonts=Arial&amp;skin=1&amp;font-color=&amp;btn-skin=7"&gt;&lt;/iframe&gt;
&lt;!-- rendered by Sagan Renderer Service --&gt;</content>
  </entry>
  <entry>
    <title>New AOT Engine Brings Spring Native to the Next Level</title>
    <link rel="alternate" href="https://spring.io/blog/2021/12/09/new-aot-engine-brings-spring-native-to-the-next-level" />
    <category term="engineering" label="Engineering" />
    <author>
      <name>S?bastien Deleuze</name>
    </author>
    <id>tag:spring.io,2021-12-09:4637</id>
    <updated>2021-12-09T13:00:00Z</updated>
    <content type="html">&lt;div class="paragraph"&gt;
&lt;p&gt;On behalf of the team and everyone who has contributed, it is my pleasure to announce the release of &lt;a href="https://github.com/spring-projects-experimental/spring-native/releases/tag/0.11.0"&gt;Spring Native 0.11&lt;/a&gt;, which provides native support for Spring Boot 2.6. This ambitious release is the result of five months of hard work by the Spring team, who have been working on a brand new architecture to bring Spring support for creating native executables with GraalVM to the next level. You can already try it on &lt;a href="https://start.spring.io/#!dependencies=native"&gt;start.spring.io&lt;/a&gt;!&lt;/p&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Learn more about Spring Native 0.11 and see it in action in this new &lt;a href="https://twitter.com/SpringTipsLive"&gt;Spring Tips&lt;/a&gt; video from Spring Developer Advocate Josh Long.&lt;/p&gt;
&lt;/div&gt;
&lt;iframe style="display: block; margin: auto;" width="560" height="315" src="https://www.youtube-nocookie.com/embed/DVo5vmk5Cuw" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen&gt;&lt;/iframe&gt;
&lt;div class="sect1"&gt;
&lt;h2 id="new-ahead-of-time-engine"&gt;&lt;a class="anchor" href="#new-ahead-of-time-engine"&gt;&lt;/a&gt;New Ahead-Of-Time Engine&lt;/h2&gt;
&lt;div class="sectionbody"&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;The biggest change is undoubtedly the introduction of a new AOT engine that performs a deep analysis of your Spring application at build-time to transform and optimize your application and generate the required GraalVM native configuration. Those transformations are performed by Maven and Gradle Spring AOT plugins.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="imageblock"&gt;
&lt;div class="content"&gt;
&lt;img src="https://static.spring.io/blog/sdeleuze/20211209/spring-boot-native.png" alt="spring boot native"&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Taking a deeper look, the AOT engine evaluates conditions at build time in order to generate an optimized application context and Spring factories (the plugin system behind Spring Boot) specifically crafted for your application. In practice, that means:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="ulist"&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Less Spring infrastructure to execute at runtime&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Fewer conditions to evaluate at runtime&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Less reflection, since &lt;a href="https://spring.io/blog/2017/03/01/spring-tips-programmatic-bean-registration-in-spring-framework-5"&gt;programmatic bean registration&lt;/a&gt; is used&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;The AOT engine infers the native configuration required to run your application as a native executable based on the beans identified as active, knowledge of the Spring programming model, and native hints bundled with Spring Native or provided by your application itself.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="imageblock"&gt;
&lt;div class="content"&gt;
&lt;img src="https://static.spring.io/blog/sdeleuze/20211209/aot-architecture.png" alt="aot architecture"&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;We want to give special thanks to &lt;a href="https://spring.io/team/snicoll"&gt;St?phane Nicoll&lt;/a&gt; who led the design and the implementation of this new AOT engine.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="sect1"&gt;
&lt;h2 id="reduced-memory-footprint"&gt;&lt;a class="anchor" href="#reduced-memory-footprint"&gt;&lt;/a&gt;Reduced Memory Footprint&lt;/h2&gt;
&lt;div class="sectionbody"&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;A key advantage of the AOT engine is that it supports smaller memory footprints for native executable because the native configuration is more accurate, less reflection is required, and less Spring infrastructure is required at runtime.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Spring Native 0.11 offers an average of between &lt;strong&gt;20%&lt;/strong&gt; and &lt;strong&gt;26%&lt;/strong&gt; footprint reduction compared to Spring Native 0.10! The following image shows data points for a few sample applications:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="imageblock"&gt;
&lt;div class="content"&gt;
&lt;img src="https://static.spring.io/blog/sdeleuze/20211209/native-rss.png" alt="native rss"&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="sect1"&gt;
&lt;h2 id="faster-startup"&gt;&lt;a class="anchor" href="#faster-startup"&gt;&lt;/a&gt;Faster Startup&lt;/h2&gt;
&lt;div class="sectionbody"&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Startup times are &lt;strong&gt;16%&lt;/strong&gt; to &lt;strong&gt;35%&lt;/strong&gt; faster in Spring Native 0.11 compared to 0.10 because some processing has moved from runtime to build time. There is still room for improvement since we could not fine-tune Spring Boot and Spring Frameworks internal architecture in this minor version update.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="imageblock"&gt;
&lt;div class="content"&gt;
&lt;img src="https://static.spring.io/blog/sdeleuze/20211209/native-startup.png" alt="native startup"&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="sect1"&gt;
&lt;h2 id="improved-compatibility"&gt;&lt;a class="anchor" href="#improved-compatibility"&gt;&lt;/a&gt;Improved Compatibility&lt;/h2&gt;
&lt;div class="sectionbody"&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;The AOT engine is also much more accurate because it doesn&amp;#8217;t try to analyze Spring annotations or the various types to replicate what Spring does at runtime. Instead, it forks a new process where it creates and introspects an application context at build-time (without starting it). That allows use of a subset of what Spring Framework does at runtime and works at the bean definition level, which is much more accurate.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="sect1"&gt;
&lt;h2 id="runtime-flexibility"&gt;&lt;a class="anchor" href="#runtime-flexibility"&gt;&lt;/a&gt;Runtime Flexibility&lt;/h2&gt;
&lt;div class="sectionbody"&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Performing those optimizations at build time means that there is less runtime flexibility than with the regular Spring Boot auto-configuration model. You can still change the HTTP port or the log level of your application when running an already compiled Spring Boot application, but you cannot add new beans at runtime by using a profile, for example.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Thats why, on the JVM, the AOT mode is optional. Thats an optimization that you can use if it fits with your needs. On native (which is, by design, much less dynamic at runtime), it is mandatory. Also, keep in mind that conditions are evaluated at build time for now. We will likely make that more flexible in the future so that it should fit with most use cases.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="sect1"&gt;
&lt;h2 id="extension-points"&gt;&lt;a class="anchor" href="#extension-points"&gt;&lt;/a&gt;Extension Points&lt;/h2&gt;
&lt;div class="sectionbody"&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;The new engine offers a pluggable and modular architecture that users (like you, or the Spring project teams) can use to support various new features.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;For example, see this implementation of the &lt;code&gt;BeanFactoryNativeConfigurationProcessor&lt;/code&gt; extension point, which automatically creates a class proxy ahead of time for beans annotated with &lt;code&gt;@RequestScope&lt;/code&gt; or &lt;code&gt;@Scope(proxyMode = ScopedProxyMode.TARGET_CLASS)&lt;/code&gt;:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="java"&gt;public class ScopeNativeConfigurationProcessor implements BeanFactoryNativeConfigurationProcessor {

   @Override
   public void process(ConfigurableListableBeanFactory beanFactory, NativeConfigurationRegistry registry) {
       new BeanFactoryProcessor(beanFactory).processBeansWithAnnotation(Scope.class, (beanName, beanType) -&amp;gt; {
           Scope scope = beanFactory.findAnnotationOnBean(beanName, Scope.class);
           if (scope.proxyMode() == ScopedProxyMode.TARGET_CLASS) {
               registry.proxy().add(NativeProxyEntry.ofClass(beanType, ProxyBits.NONE,
                       ScopedObject.class, Serializable.class, AopInfrastructureBean.class));
           }
      });
   }
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;The &lt;code&gt;NativeConfiguration&lt;/code&gt; extension point has been refined to offer an API by using &lt;code&gt;NativeConfigurationRegistry&lt;/code&gt; as well:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="java"&gt;public interface NativeConfiguration {
   default boolean isValid(AotOptions aotOptions) { return true; }
   default void computeHints(NativeConfigurationRegistry registry, AotOptions aotOptions) { return; }
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Those extensions points are defined and then discovered in &lt;code&gt;META-INF/spring.factories&lt;/code&gt;, so &lt;a href="https://docs.spring.io/spring-native/docs/current/reference/htmlsingle/#_programmatic_hints"&gt;you can provide your own&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="sect1"&gt;
&lt;h2 id="aot-testing-support"&gt;&lt;a class="anchor" href="#aot-testing-support"&gt;&lt;/a&gt;AOT Testing Support&lt;/h2&gt;
&lt;div class="sectionbody"&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;A very significant part of our work on Spring Native 0.11 has been on implementing testing support for the AOT codepath, in order to bring native testing support to a whole new level. The result is a very significant increase in compatibility, with many more kinds of tests supported.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Combined with the great JUnit 5 native support provided by the &lt;a href="https://github.com/graalvm/native-build-tools"&gt;Native Build Tools&lt;/a&gt;, it lets you run your Spring Boot, Spring Framework, or just plain JUnit tests, like on the JVM.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Unrelated to Spring, Mockito is not supported yet, but there is ongoing work to make it possible for it to work in the future.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="sect1"&gt;
&lt;h2 id="aot-on-the-jvm"&gt;&lt;a class="anchor" href="#aot-on-the-jvm"&gt;&lt;/a&gt;AOT on the JVM&lt;/h2&gt;
&lt;div class="sectionbody"&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Performing AOT transformation on an application that will run on the JVM has two key benefits.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;The first one is to be able to easily debug the code that will run on native on the JVM (main application or tests) in your IDE, for example.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;The second advantage is better efficiency. At the moment, it provides around a &lt;strong&gt;4%&lt;/strong&gt; to &lt;strong&gt;17%&lt;/strong&gt; smaller footprint.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="imageblock"&gt;
&lt;div class="content"&gt;
&lt;img src="https://static.spring.io/blog/sdeleuze/20211209/jvm-rss.png" alt="jvm rss"&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;AOT mode also accelerates the application startup by &lt;strong&gt;3%&lt;/strong&gt; to &lt;strong&gt;24%&lt;/strong&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="imageblock"&gt;
&lt;div class="content"&gt;
&lt;img src="https://static.spring.io/blog/sdeleuze/20211209/jvm-startup.png" alt="jvm startup"&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Note that, until now, we had no specific focus on JVM efficiency, so there may well be opportunities to improve in later releases.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="sect1"&gt;
&lt;h2 id="bellsoft-liberica-nik"&gt;&lt;a class="anchor" href="#bellsoft-liberica-nik"&gt;&lt;/a&gt;Bellsoft Liberica NIK&lt;/h2&gt;
&lt;div class="sectionbody"&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;&lt;a href="https://bell-sw.com/pages/liberica-native-image-kit/"&gt;Bellsoft Liberica Native Image Kit&lt;/a&gt; (NIK) is a native-image compiler distribution based on &lt;a href="https://github.com/oracle/graal"&gt;GraalVM open-source repository&lt;/a&gt; and Liberica JDK. As of Spring Native 0.11, it is used by default for Buildpacks native support, which is consistent with the JDK side, where Liberica JDK is used by default. It can also be installed locally by using its &lt;a href="https://sdkman.io/"&gt;SDKMAN&lt;/a&gt; integration or by &lt;a href="https://bell-sw.com/pages/downloads/native-image-kit/"&gt;downloading&lt;/a&gt; and installing it.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Earlier this year, the team &lt;a href="https://tanzu.vmware.com/content/blog/vmware-tanzu-enterprise-support-spring-boot-native-applications-bellsoft-liberica-nik"&gt;announced&lt;/a&gt;, together with BellSoft, that VMware customers who use the Liberica Native Image Kit can run their Spring applications as native executables and be confident that they are fully supported.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="sect1"&gt;
&lt;h2 id="new-baseline"&gt;&lt;a class="anchor" href="#new-baseline"&gt;&lt;/a&gt;New Baseline&lt;/h2&gt;
&lt;div class="sectionbody"&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Spring Native 0.11 also gave us the opportunity to provide a new baseline based on &lt;a href="https://spring.io/blog/2021/11/19/spring-boot-2-6-is-now-available"&gt;Spring Boot 2.6&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;&lt;a href="https://www.graalvm.org/release-notes/21_3/"&gt;GraalVM 21.3&lt;/a&gt; provides support for both Java 11 and Java 17, and leverages &lt;a href="https://www.graalvm.org/reference-manual/native-image/Reflection/#conditional-configuration"&gt;conditional native configuration&lt;/a&gt; and other related refinements to allow a smaller footprint and better native support for the JVM ecosystem. The Java 8 flavor of GraalVM is not provided anymore since it is too old to be reasonably maintained, but you can still compile most Java 8 applications with the Java 11 flavor of GraalVM. &lt;a href="https://github.com/graalvm/native-build-tools"&gt;Native Build Tools&lt;/a&gt; 0.9.8 is supported, and we continue our collaboration to refine and improve it.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="sect1"&gt;
&lt;h2 id="spring-boot-3-first-class-native-support"&gt;&lt;a class="anchor" href="#spring-boot-3-first-class-native-support"&gt;&lt;/a&gt;Spring Boot 3 First-Class Native Support&lt;/h2&gt;
&lt;div class="sectionbody"&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;I think that Spring Native 0.11 achieves its goal of providing a mature native option for Spring Boot. The Spring team can now focus on the next major step: refined native support as part of Spring Framework 6, Spring Boot 3, and related portfolio projects.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Keep in mind that all we did on Spring Native was done in close collaboration with other Spring projects but without deep architectural changes. With AOT and native becoming major themes of Spring Boot 3 and Spring Framework 6, the quality, maintainability, and ease of use of those features will reach a new level. The AOT engine will be refined and integrated directly into Spring Framework. Other projects, such as Spring Data or Spring Security, will be able to provide native support  (and to test it) for their scope, and Spring Boot will provide out of the box AOT and native executables support in its plugins and documentation.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="imageblock"&gt;
&lt;div class="content"&gt;
&lt;img src="https://static.spring.io/blog/sdeleuze/20211209/boot3-aot-architecture.png" alt="boot3 aot architecture"&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Our collaboration with the GraalVM team and the JVM ecosystem is going to increase in order to provide native configuration for various libraries outside of Spring, either in those libraries directly or in a native configuration repository directly integrated at the Native Build Tools level.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;We plan to start providing GraalVM native support out of the box in &lt;a href="https://github.com/spring-projects/spring-boot/milestone/242"&gt;Spring Boot 3 milestone 2&lt;/a&gt;, targeted for late March 2022, leveraging all that we learned while working on Spring Native. General Availability is planned for late 2022. We have lots of exciting plans ahead, but, for now, lets take the time to celebrate this release with the members of the Spring team and of the Spring community who contributed. Cheers!&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;!-- rendered by Sagan Renderer Service --&gt;</content>
  </entry>
  <entry>
    <title>Spring Tools 4.13.0 released</title>
    <link rel="alternate" href="https://spring.io/blog/2021/12/08/spring-tools-4-13-0-released" />
    <category term="releases" label="Releases" />
    <author>
      <name>Martin Lippert</name>
    </author>
    <id>tag:spring.io,2021-12-08:4636</id>
    <updated>2021-12-08T19:30:00Z</updated>
    <content type="html">&lt;p&gt;Dear Spring Community,&lt;/p&gt;
&lt;p&gt;I am happy to announce the 4.13.0 release of the Spring Tools 4 for Eclipse, Visual Studio Code, and Theia.&lt;/p&gt;&lt;h4&gt;&lt;a href="#major-changes-to-the-spring-tools-4-for-eclipse-distribution" class="anchor" name="major-changes-to-the-spring-tools-4-for-eclipse-distribution"&gt;&lt;/a&gt;major changes to the Spring Tools 4 for Eclipse distribution&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;updated to Eclipse 2021-12 release (including support for Java 17) (&lt;a href="https://www.eclipse.org/eclipseide/2021-12/"&gt;new and noteworthy&lt;/a&gt;)&lt;/li&gt;
  &lt;li&gt;builds for Apple Silicon platform (ARM M1) are available now from the regular download page&lt;/li&gt;
&lt;/ul&gt;&lt;h4&gt;&lt;a href="#additional-changes" class="anchor" name="additional-changes"&gt;&lt;/a&gt;additional changes&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;em&gt;(Spring Boot)&lt;/em&gt; fixed: STS 4.12.0 (for eclipse) *.yml can&amp;rsquo;t automatic prompt (&lt;a href="https://github.com/spring-projects/sts4/issues/690"&gt;#690&lt;/a&gt;)
&lt;/li&gt;
  &lt;li&gt;&lt;em&gt;(Spring Boot)&lt;/em&gt; fixed: A StackOverFlow error for serializable Kotlin data class for autocompletion in the Eclipse IDE (&lt;a href="https://github.com/spring-projects/sts4/issues/693"&gt;#693&lt;/a&gt;)&lt;/li&gt;
  &lt;li&gt;&lt;em&gt;(Eclipse)&lt;/em&gt; fixed: Typescript comparison: An internal error occurred during: &amp;ldquo;LSP4E Linked Editing Highlight&amp;rdquo; (&lt;a href="https://github.com/spring-projects/sts4/issues/700"&gt;#700&lt;/a&gt;)&lt;/li&gt;
  &lt;li&gt;&lt;em&gt;(Eclipse)&lt;/em&gt; fixed: js syntax highlight disabled by STS4 (&lt;a href="https://github.com/spring-projects/sts4/issues/702"&gt;#702&lt;/a&gt;)&lt;/li&gt;
  &lt;li&gt;&lt;em&gt;(Eclipse)&lt;/em&gt; fixed: Cannot copy/paste from ANSI console without escape sequences (&lt;a href="https://github.com/spring-projects/sts4/issues/667"&gt;#667&lt;/a&gt;) - fixed in ANSI Color Console project thanks to @mihnita&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;To download the distribution for Eclipse and find links to the marketplace entries for Visual Studio Code and Theia, please go visit:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Spring Tools 4: &lt;a href="https://spring.io/tools/"&gt;https://spring.io/tools/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;If you are updating an existing Spring Tools 4 installation, please make sure you to prepare your installation propertly this time: &lt;a href="https://twitter.com/springtools4/status/1468587842838355980"&gt;https://twitter.com/springtools4/status/1468587842838355980&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Detailed changes can be found here: &lt;a href="https://github.com/spring-projects/sts4/wiki/Changelog#2021-12-08-4130-release-incl-language-servers-version-1290"&gt;https://github.com/spring-projects/sts4/wiki/Changelog#2021-12-08-4130-release-incl-language-servers-version-1290&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Spring Tools 4.13.1 is scheduled to be released in early Feb 2022.&lt;/p&gt;
&lt;p&gt;Enjoy!&lt;/p&gt;
&lt;!-- rendered by Sagan Renderer Service --&gt;</content>
  </entry>
  <entry>
    <title>Secure communications end-to-end for Spring Boot apps ? in Zero Trust environment</title>
    <link rel="alternate" href="https://spring.io/blog/2021/12/08/secure-communications-end-to-end-for-spring-boot-apps-in-zero-trust-environment" />
    <category term="engineering" label="Engineering" />
    <author>
      <name>Josh Long</name>
    </author>
    <id>tag:spring.io,2021-12-08:4635</id>
    <updated>2021-12-08T18:00:00Z</updated>
    <content type="html">&lt;h1&gt;&lt;a href="#secure-communications-end-to-end-for-spring-boot-apps-in-a-zero-trust-environment" class="anchor" name="secure-communications-end-to-end-for-spring-boot-apps-in-a-zero-trust-environment"&gt;&lt;/a&gt;Secure communications end-to-end for Spring Boot apps - in a Zero Trust environment&lt;/h1&gt;
&lt;p&gt;Hi, Spring fans! Today, we are excited to announce the general availability of all the features to secure communications end-to-end for Spring Boot apps ? in a Zero Trust environment. You can secure communications end-to-end or terminate transport level security at any communication point for Spring Boot apps. You can also automate the provisioning and configuration for all the Azure resources needed for securing communications.&lt;/p&gt;
&lt;p&gt;Implementing secure communications as part of your solution architecture can be challenging. Many customers manually rotate their certificates or create their own solutions to automate provisioning and configuration. Even then, there is still data exfiltration risk ? say unauthorized copying or transfer of data from server systems. With Azure Spring Cloud, all of this is handled for you; there is no need to figure out the difficult details. Azure Spring Cloud abstracts away most of the complexity, leaving secure communications as configurable and automatable options in the service.&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Implementing end-to-end encryption and Zero Trust have been at the top of the list of security requirements for our new API platform. Neither requirement was ever achievable on our old platform. Azure Spring Cloud, and its built-in integrations with services like Azure Key Vault and Managed Identities, will finally help us to meet those requirements in an easily automated and manageable way. ? Claus Lund, Infrastructure Engineering Lead, &lt;a href="https://www.nationallife.com/"&gt;National Life Group&lt;/a&gt;&lt;/p&gt;
  &lt;p&gt;For Liantis, having secure end-to-end communications is a non-negotiable in our line of business dealing with very sensitive financial, medical and payroll data. Again, Azure Spring Cloud delivers on its promise to abstract most of the complexity, reduce operational overhead associated with certificate provisioning, configuration and certificate rotation in a seamless way using a simple and straightforward integration with Azure Key Vault. - Kurt Roggen, Infrastructure and Security Architect, &lt;a href="https://www.liantis.be/nl?overlay=select-language"&gt;Liantis&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;&lt;h2&gt;&lt;a href="#secure-internet-communications" class="anchor" name="secure-internet-communications"&gt;&lt;/a&gt;Secure Internet communications&lt;/h2&gt;
&lt;p&gt;The TLS/SSL protocol establishes identity and trust, and encrypts communications of all types, making secure communications possible - particularly Web traffic carrying commerce data and personally identifiable information.&lt;/p&gt;
&lt;p&gt;You can use any types of SSL certificates ? certificates issued by a certificate authority, extended validation certificate, wildcard certificates with support for any number of sub domains, or self-signed certificates for dev and testing environments.&lt;/p&gt;&lt;h2&gt;&lt;a href="#zero-trust-securely-load-certificates" class="anchor" name="zero-trust-securely-load-certificates"&gt;&lt;/a&gt;Zero Trust ? securely load certificates&lt;/h2&gt;
&lt;p&gt;Based on the principle of &amp;ldquo;never trust, always verify and credential-free&amp;rdquo;, &lt;a href="https://docs.microsoft.com/en-us/security/zero-trust/"&gt;Zero Trust&lt;/a&gt; helps to secure all communications by eliminating unknown and un-managed certificates, and only trusts certificates that are shared by verifying identity prior to granting access to those certificates. &lt;/p&gt;
&lt;p&gt;To securely load certificates from &lt;a href="https://docs.microsoft.com/en-us/azure/key-vault/"&gt;Azure Key Vault&lt;/a&gt;, Spring Boot apps use &lt;a href="https://docs.microsoft.com/en-us/azure/active-directory/managed-identities-azure-resources/overview"&gt;managed identities&lt;/a&gt; and &lt;a href="https://docs.microsoft.com/en-us/azure/role-based-access-control/"&gt;Azure role-based access control&lt;/a&gt;, and Azure Spring Cloud uses a provider service principal and Azure role-based access control. This secure loading is powered using the Azure Key Vault &lt;a href="https://github.com/Azure/azure-sdk-for-java/tree/main/sdk/keyvault/azure-security-keyvault-jca"&gt;JCA&lt;/a&gt; (Java Cryptography Architecture) Provider.&lt;/p&gt;
&lt;p&gt;With Azure Key Vault:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;You control the storage and distribution of certificates to reduce accidental leakage.&lt;/li&gt;
  &lt;li&gt;Applications and services can securely access certificates. Key Vault uses Azure role-based access control to lock down access to only those requiring access, such as an admin of course, but also for apps using the principle of least privilege. Applications and service authenticate and authorize, using Azure Active Directory and Azure role-based access control, to access certificates.&lt;/li&gt;
  &lt;li&gt;You can monitor the access and use of certificates in Key Vault through its full audit trail.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a href="#secure-communications-end-to-end-or-terminate-tls-at-any-point" class="anchor" name="secure-communications-end-to-end-or-terminate-tls-at-any-point"&gt;&lt;/a&gt;Secure communications end-to-end or terminate TLS at any point&lt;/h2&gt;
&lt;p&gt;As illustrated in the diagram below, there are several segments of communications through:&lt;br/&gt;* Network access points such as Azure Front Door, Azure App Gateway, F5 BIG-IP Local Traffic Manager, Azure API Management and Apigee API Management&lt;br/&gt;* Spring Boot apps and&lt;br/&gt;* Backend systems such as databases, messaging and eventing systems and app cache.&lt;/p&gt;
&lt;p&gt;You can secure communications end-to-end or terminate transport level security at any communication point for Spring Boot apps.&lt;/p&gt;
&lt;img src="https://github.com/joshlong/blog-images/raw/master/secure-e2e/secure-communications-end-to-end-for-spring-boot-apps.jpg" /&gt;&lt;h3&gt;&lt;a href="#securing-communications-into-azure-spring-cloud" class="anchor" name="securing-communications-into-azure-spring-cloud"&gt;&lt;/a&gt;Securing communications into Azure Spring Cloud&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Segment 1&lt;/strong&gt; represents securing communications from consumers - like browsers, mobile phones, desktops, kiosks, or network access points like Azure Front Door, Azure App Gateway, F5 BIG-IP Local Traffic Manager, Azure API Management and Apigee API Management - to the ingress controller in Azure Spring Cloud. &lt;/p&gt;
&lt;p&gt;By default, segment 1 is secured using a Microsoft supplied SSL certificate for the *.azuremicroservices.io domain. You can apply your own SSL certificate in Azure Key Vault by binding a custom domain to your app in Azure Spring Cloud. No code is necessary.&lt;/p&gt;&lt;h3&gt;&lt;a href="#securing-communications-from-ingress-controller-to-apps" class="anchor" name="securing-communications-from-ingress-controller-to-apps"&gt;&lt;/a&gt;Securing communications from ingress controller to apps&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Segment 2&lt;/strong&gt; represents securing communications from Azure Spring Clouds ingress controller to any app on Azure Spring Cloud. You can enable &lt;a href="https://docs.microsoft.com/en-us/azure/spring-cloud/how-to-enable-end-to-end-tls"&gt;TLS/SSL to secure traffic from the ingress controller to an app&lt;/a&gt; that supports HTTPS. &lt;/p&gt;
&lt;p&gt;A Spring Boot app can use Springs approach to enable HTTPS or secure communications by using the &lt;a href="https://docs.microsoft.com/en-us/azure/developer/java/spring-framework/configure-spring-boot-starter-java-app-with-azure-key-vault-certificates#enable-the-spring-boot-app-to-load-the-tlsssl-certificate"&gt;Azure Key Vault Certificates Spring Boot Starter&lt;/a&gt; ? in three configuration steps to secure communications using an SSL certificate from an Azure Key Vault. No code is necessary.&lt;/p&gt;
&lt;p&gt;Step 1 ? Include the Azure Key Vault Certificates Spring Boot Starter:&lt;/p&gt;
&lt;img src="https://github.com/joshlong/blog-images/raw/master/secure-e2e/azure-spring-boot-starter-keyvault-certificates-dependency.jpg" /&gt;
&lt;p&gt;Step 2 ? Configure an app to load an SSL certificate from Azure Key Vault by specifying the URI of the Azure Key Vault and the certificate name:&lt;/p&gt;
&lt;img src="https://github.com/joshlong/blog-images/raw/master/secure-e2e/configure-spring-boot-app-to-load-SSL-certificate.jpg" /&gt;
&lt;p&gt;Step 3 ? Enable the apps &lt;a href="https://docs.microsoft.com/en-us/azure/spring-cloud/how-to-enable-system-assigned-managed-identity"&gt;managed identity&lt;/a&gt; and grant the managed identity with &amp;ldquo;Get&amp;rdquo; and &amp;ldquo;List&amp;rdquo; access to the Azure Key Vault&lt;/p&gt;&lt;h3&gt;&lt;a href="#securing-communications-from-app-to-managed-middleware" class="anchor" name="securing-communications-from-app-to-managed-middleware"&gt;&lt;/a&gt;Securing communications from app to managed middleware&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Segment 3&lt;/strong&gt; represents communications from any app to the managed Spring Cloud Config Server and Spring Cloud Service Registry in Azure Spring Cloud. By default, segment 3 is secured using a Microsoft supplied SSL certificate.&lt;/p&gt;&lt;h3&gt;&lt;a href="#securing-app-to-app-communications" class="anchor" name="securing-app-to-app-communications"&gt;&lt;/a&gt;Securing app to app communications&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Segment 4&lt;/strong&gt; represents communications between an app to another app in Azure Spring Cloud. &lt;/p&gt;
&lt;p&gt;You can configure the caller app using the Azure Key Vault Certificates Spring Boot Starter to trust the SSL certificate supplied by an HTTPS-enabled called app. &lt;/p&gt;
&lt;p&gt;The receiver Spring Boot app can use Springs approach to enable HTTPS or secure communications by using the Azure Key Vault Certificates Spring Boot Starter.&lt;/p&gt;&lt;h3&gt;&lt;a href="#securing-app-to-external-system-communications" class="anchor" name="securing-app-to-external-system-communications"&gt;&lt;/a&gt;Securing app to external system communications&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Segment 5&lt;/strong&gt; represents communications between an app running in Azure Spring Cloud and external systems. You can configure the app running in Azure Spring Cloud to trust the SSL certificate supplied by any external systems - using the &lt;a href="https://docs.microsoft.com/en-us/azure/developer/java/spring-framework/configure-spring-boot-starter-java-app-with-azure-key-vault-certificates#run-a-spring-boot-application-with-secure-outbound-connections"&gt;Azure Key Vault Certificates Spring Boot Starter&lt;/a&gt;.&lt;/p&gt;&lt;h3&gt;&lt;a href="#implicitly-load-ssl-certificates-from-key-vault-into-an-app" class="anchor" name="implicitly-load-ssl-certificates-from-key-vault-into-an-app"&gt;&lt;/a&gt;Implicitly load SSL certificates from Key Vault into an app&lt;/h3&gt;
&lt;p&gt;If your Spring code, Java code, or open-source libraries, such as openssl, rely on the JVM default JCA chain to implicitly load certificates into the JVMs trust store, then you &lt;a href="https://docs.microsoft.com/en-us/azure/spring-cloud/how-to-use-tls-certificate#import-a-certificate"&gt;can import your SSL certificates from Key Vault&lt;/a&gt; into Azure Spring Cloud and use those certificates within the app.&lt;/p&gt;&lt;h3&gt;&lt;a href="#upload-well-known-public-ssl-certificates-for-backend-systems" class="anchor" name="upload-well-known-public-ssl-certificates-for-backend-systems"&gt;&lt;/a&gt;Upload well known public SSL certificates for backend systems&lt;/h3&gt;
&lt;p&gt;For an app to communicate to backend services in the cloud or in on premises systems, it may require the use of public SSL certificates to secure communication. You can upload &lt;a href="https://docs.microsoft.com/en-us/azure/spring-cloud/how-to-use-tls-certificate"&gt;those SSL certificates&lt;/a&gt; for securing outbound communications.&lt;/p&gt;&lt;h2&gt;&lt;a href="#automate-provisioning-and-configuration-for-securing-communications" class="anchor" name="automate-provisioning-and-configuration-for-securing-communications"&gt;&lt;/a&gt;Automate provisioning and configuration for securing communications&lt;/h2&gt;
&lt;p&gt;Using an ARM Template, Bicep, or Terraform, you can automate the provisioning and configuration of all the Azure resources mentioned above for securing communications.&lt;/p&gt;&lt;h2&gt;&lt;a href="#build-your-solutions-and-secure-communications-today" class="anchor" name="build-your-solutions-and-secure-communications-today"&gt;&lt;/a&gt;Build your solutions and secure communications today!&lt;/h2&gt;
&lt;p&gt;Azure Spring Cloud is a fully managed service for Spring Boot applications. It abstracts away the complexity of infrastructure and Spring Cloud middleware management from users. So, you can focus on building your business logic and let Azure take care of dynamic scaling, patches, security, compliance, and high availability. With a few steps, you can provision Azure Spring Cloud, create applications, deploy, and scale Spring Boot applications, and start securing communications in minutes.&lt;/p&gt;
&lt;p&gt;Azure Spring Cloud is jointly built, operated, and supported by Microsoft and VMware.&lt;br/&gt;We will continue to bring more developer-friendly and enterprise-ready features to Azure Spring Cloud. We would love to hear how you are building impactful solutions using Azure Spring Cloud&amp;hellip;&lt;/p&gt;
&lt;p&gt;Deploy Spring Boot apps to Azure Spring Cloud and secure communications end-to-end!&lt;/p&gt;
&lt;p&gt;Get started today&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Learn using an &lt;a href="https://docs.microsoft.com/en-us/learn/modules/azure-spring-cloud-workshop/"&gt;MS Learn module&lt;/a&gt; or &lt;a href="https://github.com/microsoft/azure-spring-cloud-training"&gt;self-paced workshop&lt;/a&gt; on GitHub&lt;/li&gt;
  &lt;li&gt;&lt;a href="https://github.com/Azure-Samples/spring-petclinic-microservices"&gt;Deploy&lt;/a&gt; a distributed version of Spring Petclinic application&lt;/li&gt;
  &lt;li&gt;Learn &lt;a href="https://docs.microsoft.com/en-us/azure/spring-cloud/"&gt;more&lt;/a&gt; about implementing solutions on Azure Spring Cloud&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Secure communications end-to-end for Spring Boot apps&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href="https://docs.microsoft.com/en-us/azure/spring-cloud/tutorial-custom-domain?tabs=Azure-portal"&gt;Bind custom domain to an app in Azure Spring Cloud&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="https://docs.microsoft.com/en-us/azure/spring-cloud/how-to-enable-end-to-end-tls"&gt;Secure traffic from ingress controller to an app in Azure Spring Cloud&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="https://docs.microsoft.com/en-us/azure/developer/java/spring-framework/configure-spring-boot-starter-java-app-with-azure-key-vault-certificates#enable-the-spring-boot-app-to-load-the-tlsssl-certificate"&gt;Azure Key Vault Certificates Spring Boot Starter&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="https://github.com/Azure/azure-sdk-for-java/tree/main/sdk/spring/azure-spring-boot-starter-keyvault-certificates"&gt;Azure Key Vault Certificates Spring Boot Starter (GitHub.com)&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Azure Key Vault &lt;a href="https://github.com/Azure/azure-sdk-for-java/tree/main/sdk/keyvault/azure-security-keyvault-jca"&gt;JCA&lt;/a&gt; (Java Cryptography Architecture) Provider&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Additional Resources&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Deploy Spring Boot applications by leveraging enterprise best practices ? &lt;a href="https://docs.microsoft.com/en-us/azure/spring-cloud/reference-architecture"&gt;Azure Spring Cloud Reference Architecture&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Migrate your &lt;a href="https://docs.microsoft.com/en-us/azure/developer/java/migration/migrate-spring-boot-to-azure-spring-cloud"&gt;Spring Boot&lt;/a&gt;, &lt;a href="https://docs.microsoft.com/en-us/azure/developer/java/migration/migrate-spring-cloud-to-azure-spring-cloud"&gt;Spring Cloud&lt;/a&gt;, and &lt;a href="https://docs.microsoft.com/en-us/azure/developer/java/migration/migrate-tomcat-to-azure-spring-cloud"&gt;Tomcat&lt;/a&gt; applications to Azure Spring Cloud&lt;/li&gt;
  &lt;li&gt;Wire Spring applications to interact with Azure services&lt;/li&gt;
  &lt;li&gt;For feedback and questions, &lt;a href="mailto:AzureSpringCloud-Talk@service.microsoft.com"&gt;please e-mail us&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- rendered by Sagan Renderer Service --&gt;</content>
  </entry>
  <entry>
    <title>Spring Cloud Gateway and gRPC</title>
    <link rel="alternate" href="https://spring.io/blog/2021/12/08/spring-cloud-gateway-and-grpc" />
    <category term="engineering" label="Engineering" />
    <author>
      <name>Alberto C. R?os</name>
    </author>
    <id>tag:spring.io,2021-12-06:4632</id>
    <updated>2021-12-08T17:00:00Z</updated>
    <content type="html">&lt;div class="paragraph"&gt;
&lt;p&gt;Starting from version 3.1.0 as part of the Spring Cloud 2021.0.0 (aka Jubilee) release train, Spring Cloud Gateway included support for gRPC and HTTP/2.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;We will introduce the basic concepts behind gRPC and how to configure it with two examples:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="ulist"&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;One that showcases how Spring Cloud Gateway can transparently re-route gRPC traffic without needing to know the proto definition and without having to modify our existing gRPC servers.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Another that showcases how we can create a custom filter in Spring Cloud Gateway to transform a JSON payload to a gRPC message.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="sect1"&gt;
&lt;h2 id="introduction-to-grpc-and-http2"&gt;&lt;a class="anchor" href="#introduction-to-grpc-and-http2"&gt;&lt;/a&gt;Introduction to gRPC and HTTP/2&lt;/h2&gt;
&lt;div class="sectionbody"&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;HTTP/2 makes our applications faster, simpler, and more robust. Reducing latency by enabling request and response
multiplexing, adding efficient compression of HTTP header fields, and adding support for request prioritization and
server push.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;The reduction in the number of connections is particularly important when improving the performance of HTTPS: that way
we have less expensive TLS handshakes, more efficient session reuse, reducing client and server resources.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;HTTP/2 provides two mechanisms for negotiating the application level protocol:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="ulist"&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;H2C&lt;/code&gt; HTTP/2.0 support with clear-text&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;H2&lt;/code&gt; HTTP/2.0 support with TLS&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Even though &lt;code&gt;reactor-netty&lt;/code&gt; has support for &lt;code&gt;H2C&lt;/code&gt; clear-text protocol, Spring Cloud Gateway requires &lt;code&gt;H2&lt;/code&gt; with TLS to
assure transport security.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;HTTP/2 adds a binary framing layer, which is how the HTTP messages are encapsulated and transferred between the client
and server, enabling more efficient ways to transfer data.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Thanks to &lt;a href="https://github.com/reactor/reactor-netty"&gt;reactor-netty&lt;/a&gt; and its HTTP/2 support, we were able to extend
Spring Cloud Gateway to support gRPC.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;&lt;a href="https://grpc.io/"&gt;gRPC&lt;/a&gt; is a high-performance Remote Procedure Call framework that can run in any environment. It
provides bi-directional streaming, and it&amp;#8217;s based on HTTP/2.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;gRPC services can be defined using Protocol Buffers, a powerful binary serialization toolset and language, and
provides tools for generating clients and servers across different languages.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="sect1"&gt;
&lt;h2 id="getting-started"&gt;&lt;a class="anchor" href="#getting-started"&gt;&lt;/a&gt;Getting started&lt;/h2&gt;
&lt;div class="sectionbody"&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;In order to enable gRPC in Spring Cloud Gateway, we need to enable HTTP/2 and SSL in our project &lt;a href="https://docs.oracle.com/cd/E19830-01/819-4712/ablqw/index.html"&gt;by adding a keystore&lt;/a&gt;, this can be done
through configuration by adding the following:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="yaml"&gt;server:
  http2:
    enabled: true
  ssl:
    key-store-type: PKCS12
    key-store: classpath:keystore.p12
    key-store-password: password
    key-password: password
    enabled: true&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Now that we have it enabled, we can create a route that redirects traffic to a gRPC server and take advantage of the
existing filters and predicates, for example, this route will redirect traffic that comes from any path starting
with &lt;code&gt;grpc&lt;/code&gt; to a local server in the port &lt;code&gt;6565&lt;/code&gt; and add header &lt;code&gt;X-Request-header&lt;/code&gt; with the value &lt;code&gt;header-value&lt;/code&gt;:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="yaml"&gt;spring:
  cloud:
    gateway:
      routes:
        - id: grpc
          uri: https://localhost:6565
          predicates:
            - Path=/grpc/**
          filters:
            - AddResponseHeader=X-Request-header, header-value&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="sect1"&gt;
&lt;h2 id="running-grpc-to-grpc"&gt;&lt;a class="anchor" href="#running-grpc-to-grpc"&gt;&lt;/a&gt;Running gRPC to gRPC&lt;/h2&gt;
&lt;div class="sectionbody"&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;An end to end example can be found in this repository with the following parts:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="imageblock"&gt;
&lt;div class="content"&gt;
&lt;img src="https://raw.githubusercontent.com/Albertoimpl/spring-cloud-gateway-grpc/main/grpc-simple-gateway.png" alt="grpc-simple-gateway"&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="ulist"&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;A &lt;code&gt;grpc-server&lt;/code&gt; that exposes a &lt;code&gt;HelloService&lt;/code&gt;, and gRPC endpoint to receive a &lt;code&gt;HelloRequest&lt;/code&gt; and return
a &lt;code&gt;HelloResponse&lt;/code&gt;:&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre&gt;syntax = "proto3";

message HelloRequest {
  string firstName = 1;
  string lastName = 2;
}

message HelloResponse {
  string greeting = 1;
}

service HelloService {
  rpc hello(HelloRequest) returns (HelloResponse);
}&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;The server will concatenate a salutation with &lt;code&gt;firstName&lt;/code&gt; and a &lt;code&gt;lastName&lt;/code&gt; and respond with a &lt;code&gt;greeting&lt;/code&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;For example, this input:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="text"&gt;firstName: Saul
lastName: Hudson&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Will output:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="text"&gt;greeting: Hello, Saul Hudson&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="ulist"&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;A &lt;code&gt;grpc-client&lt;/code&gt;, in charge of sending the &lt;code&gt;HelloRequest&lt;/code&gt; to the &lt;code&gt;HelloService&lt;/code&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;grpc-simple-gateway&lt;/code&gt; that routes the requests and adds a header with the configuration mentioned above. Note that this gateway application does not have any dependency to gRPC nor to the proto definition used by client and server.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;At the moment there is just one route that will forward everything to the &lt;code&gt;grpc-server&lt;/code&gt;:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="yaml"&gt;      routes:
        - id: grpc
          uri: https://localhost:6565
          predicates:
            - Path=/**
          filters:
            - AddResponseHeader=X-Request-header, header-value&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;To start the server that is going to be listening to requests:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="shell"&gt; ./gradlew :grpc-server:bootRun&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Then, we start the gateway that is going to re-route the gRPC requests:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="shell"&gt;./gradlew :grpc-simple-gateway:bootRun&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Finally, we can use the client that points to the gateway application:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="shell"&gt;./gradlew :grpc-client:bootRun&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;The gateway routes and filters can be modified in &lt;a href="https://github.com/Albertoimpl/spring-cloud-gateway-grpc/blob/5bf80a24a8adf0d5d7c1614524f9d55707536c19/grpc-simple-gateway/src/main/resources/application.yaml#L14"&gt;grpc-simple-gateway/src/main/resources/application.yaml&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="sect1"&gt;
&lt;h2 id="running-json-to-grpc-with-a-custom-filter"&gt;&lt;a class="anchor" href="#running-json-to-grpc-with-a-custom-filter"&gt;&lt;/a&gt;Running JSON to gRPC with a custom filter&lt;/h2&gt;
&lt;div class="sectionbody"&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Thanks to Spring Cloud Gateway flexibility, it is possible to create a custom filter to transform from a JSON payload to
a gRPC message.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Even though it will have a performance impact since we have to serialize and deserialize the requests in the gateway and creating a channel from it,
it is a common pattern if you want to expose a JSON API while maintaining internal compatibility.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;For that, we can extend our &lt;code&gt;grpc-json-gateway&lt;/code&gt; to include the &lt;code&gt;proto&lt;/code&gt; definition with the message we want to send.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="imageblock"&gt;
&lt;div class="content"&gt;
&lt;img src="https://raw.githubusercontent.com/Albertoimpl/spring-cloud-gateway-grpc/main/grpc-json-gateway.png" alt="grpc-json-gateway"&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Spring Cloud Gateway contains a mechanism to create custom filters allowing us to intercept requests and add custom logic to them.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;For this particular scenario, we are going to deserialize the JSON request and create a gRPC channel that will send a message to the &lt;code&gt;grpc-server&lt;/code&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="java"&gt;static class GRPCResponseDecorator extends ServerHttpResponseDecorator {

  @Override
  public Mono&amp;lt;Void&amp;gt; writeWith(Publisher&amp;lt;?extends DataBuffer&amp;gt; body) {
    exchange.getResponse().getHeaders().set("Content-Type", "application/json");

    URI requestURI = exchange.getRequest().getURI();
    ManagedChannel channel = createSecuredChannel(requestURI.getHost(), 6565);

    return getDelegate().writeWith(deserializeJSONRequest()
            .map(jsonRequest -&amp;gt; {
                String firstName = jsonRequest.getFirstName();
                String lastName = jsonRequest.getLastName();
                return HelloServiceGrpc.newBlockingStub(channel)
                        .hello(HelloRequest.newBuilder()
                                .setFirstName(firstName)
                                .setLastName(lastName)
                                .build());
            })
            .map(this::serialiseJSONResponse)
            .map(wrapGRPCResponse())
            .cast(DataBuffer.class)
            .last());
  }
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;The full implementation can be found
in: &lt;a href="https://github.com/Albertoimpl/spring-cloud-gateway-grpc/blob/5bf80a24a8adf0d5d7c1614524f9d55707536c19/grpc-json-gateway/src/main/java/com/example/grpcserver/hello/JSONToGRPCFilterFactory.java#L38"&gt;grpc-json-gateway/src/main/java/com/example/grpcserver/hello/JSONToGRPCFilterFactory.java&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;Using the same &lt;code&gt;grpc-server&lt;/code&gt;, we can start the gateway with the custom filter with:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="shell"&gt;./gradlew :grpc-json-gateway:bootRun&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;And send JSON requests to the &lt;code&gt;grpc-json-gateway&lt;/code&gt; using, for example, &lt;code&gt;curl&lt;/code&gt;:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="bash"&gt;curl -XPOST 'https://localhost:8091/json/hello' -d '{"firstName":"Duff","lastName":"McKagan"}' -k -H"Content-Type: application/json" -v&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;We see how the gateway application forwards the requests and returns the JSON payload with the new &lt;code&gt;Content-Type&lt;/code&gt; header:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="listingblock"&gt;
&lt;div class="content"&gt;
&lt;pre class="prettyprint highlight"&gt;&lt;code data-lang="bash"&gt;&amp;lt; HTTP/2 200
&amp;lt; content-type: application/json
&amp;lt; content-length: 34
&amp;lt;
* Connection #0 to host localhost left intact
{"greeting":"Hello, Duff McKagan"}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="sect1"&gt;
&lt;h2 id="next-steps"&gt;&lt;a class="anchor" href="#next-steps"&gt;&lt;/a&gt;Next Steps&lt;/h2&gt;
&lt;div class="sectionbody"&gt;
&lt;div class="paragraph"&gt;
&lt;p&gt;In this post, we&amp;#8217;ve looked at a few examples of how gRPC can be integrated within Spring Cloud Gateway. Id love to know
what other usages you&amp;#8217;ve found to be helpful in your experiences.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;!-- rendered by Sagan Renderer Service --&gt;</content>
  </entry>
  <entry>
    <title>This Week in Spring - December 7th, 2021</title>
    <link rel="alternate" href="https://spring.io/blog/2021/12/07/this-week-in-spring-december-7th-2021" />
    <category term="engineering" label="Engineering" />
    <author>
      <name>Josh Long</name>
    </author>
    <id>tag:spring.io,2021-12-07:4634</id>
    <updated>2021-12-07T19:00:00Z</updated>
    <content type="html">&lt;p&gt;Hi, Spring fans! Welcome to another installment of &lt;em&gt;This Week in Spring&lt;/em&gt;! We&amp;rsquo;ve got a ton of stuff to dive into so let&amp;rsquo;s get goin&amp;rsquo;! &lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href="https://spring.io/blog/2021/12/02/a-bootiful-podcast-datastax-s-christopher-bradford-on-the-apache-cassandra-operator-for-kubernetes-k8ssandra"&gt;A Bootiful Podcast: DataStax&amp;rsquo;s Christopher Bradford on the Apache Cassandra operator for Kubernetes, K8ssandra&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="https://spring.io/blog/2021/12/01/accelerate-spring-apps-to-cloud-at-scale-discussion-with-azure-spring-cloud-customers"&gt;Accelerate Spring Apps to Cloud at Scale - Discussion with Azure Spring Cloud Customers&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="https://spring.io/blog/2021/12/01/spring-authorization-server-0-2-1-available-now"&gt;Spring Authorization Server 0.2.1 available now&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="https://spring.io/blog/2021/12/02/spring-cloud-2021-0-0-codename-jubilee-has-been-released"&gt;Spring Cloud 2021.0.0 (codename Jubilee) Has Been Released&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="https://spring.io/blog/2021/12/02/spring-cloud-function-3-2-is-out"&gt;Spring Cloud Function 3.2 is out!&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="https://spring.io/blog/2021/12/07/spring-cloud-sleuth-3-1-0-is-out"&gt;Spring Cloud Sleuth 3.1.0 is out!&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="https://spring.io/blog/2021/12/01/spring-tips-controllers-and-rsocket"&gt;Spring Tips: @Controllers and RSocket&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="https://toedter.github.io/spring-hateoas-jsonapi/1.2.0/reference/#affordances"&gt;JSON:API for Spring HATEOAS&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="https://thenewstack.io/living-with-kubernetes-12-commands-to-debug-your-workloads/"&gt;Living with Kubernetes: 12 Commands to Debug Your Workloads&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Hmm. I wonder what &lt;a href="https://twitter.com/mp911de/status/1467775790121205761?s=12"&gt;Mark Paluch&amp;rsquo;s cooking something awesome with the R2DBC SPI&lt;/a&gt;. I wonder what&amp;hellip;?&lt;/li&gt;
  &lt;li&gt;Nice job, Github Actions! There&amp;rsquo;s now integrated &lt;code&gt;sigstore&lt;/code&gt; support! &lt;a href="https://github.blog/2021-12-06-safeguard-container-signing-capability-actions/"&gt;Safeguard your containers with new container signing capability in GitHub Actions&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Pull Request #762 &lt;a href="https://github.com/cncf/toc/pull/762"&gt;adds Knative for incubation at CNCF&lt;/a&gt; - hurray!&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- rendered by Sagan Renderer Service --&gt;</content>
  </entry>
  <entry>
    <title>Spring Cloud Sleuth 3.1.0 is out!</title>
    <link rel="alternate" href="https://spring.io/blog/2021/12/07/spring-cloud-sleuth-3-1-0-is-out" />
    <category term="engineering" label="Engineering" />
    <author>
      <name>Marcin Grzejszczak</name>
    </author>
    <id>tag:spring.io,2021-12-07:4633</id>
    <updated>2021-12-07T17:08:00Z</updated>
    <content type="html">&lt;p&gt;With the release of the Spring Cloud 2021.0.0 (aka Jubilee) release train we&amp;rsquo;re more than happy to announce the general availability of Spring Cloud Sleuth 3.1.0. In this blog post we&amp;rsquo;ll describe the most notable released features.&lt;/p&gt;
&lt;p&gt;Here is the list of most notable features, we&amp;rsquo;ll elaborate on them in the subsequent parts of this post.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;JDBC &lt;a href="https://github.com/spring-cloud/spring-cloud-sleuth/issues/1930"&gt;#1930&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Tomcat Valve &lt;a href="https://github.com/spring-cloud/spring-cloud-sleuth/issues/1329"&gt;#1329&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Spring Vault &lt;a href="https://github.com/spring-cloud/spring-cloud-sleuth/issues/1952"&gt;#1952&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Automatic tag table generation for documentation &lt;a href="https://github.com/spring-cloud/spring-cloud-sleuth/issues/1950"&gt;#1950&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Spring Cloud Deployer &lt;a href="https://github.com/spring-cloud/spring-cloud-sleuth/issues/1947"&gt;#1947&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;R2DBC &lt;a href="https://github.com/spring-cloud/spring-cloud-sleuth/issues/1524"&gt;#1524&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Kafka &lt;a href="https://github.com/spring-cloud/spring-cloud-sleuth/issues/2013"&gt;#2013&lt;/a&gt; and Reactor Kafka &lt;a href="https://github.com/spring-cloud/spring-cloud-sleuth/issues/1708"&gt;#1708&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Spring TX &lt;a href="https://github.com/spring-cloud/spring-cloud-sleuth/issues/1941"&gt;#1941&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Spring Batch &lt;a href="https://github.com/spring-cloud/spring-cloud-sleuth/issues/1904"&gt;#1904&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;RSocket &lt;a href="https://github.com/spring-cloud/spring-cloud-sleuth/issues/1677"&gt;#1677&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Spring Cloud Task &lt;a href="https://github.com/spring-cloud/spring-cloud-sleuth/issues/1903"&gt;#1903&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Spring Cloud Config &lt;a href="https://github.com/spring-cloud/spring-cloud-sleuth/issues/1915"&gt;#1915&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Spring Cloud CircuitBreaker Reactive &lt;a href="https://github.com/spring-cloud/spring-cloud-sleuth/issues/1910"&gt;#1910&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Cassandra &lt;a href="https://github.com/spring-cloud/spring-cloud-sleuth/issues/1974"&gt;#1974&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Spring Session &lt;a href="https://github.com/spring-cloud/spring-cloud-sleuth/issues/1961"&gt;#1961&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Spring Security &lt;a href="https://github.com/spring-cloud/spring-cloud-sleuth/issues/2011"&gt;#2011&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Prometheus Exemplars &lt;a href="https://github.com/spring-cloud/spring-cloud-sleuth/issues/2039"&gt;#2039&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Spring Cloud Stream Reactive &lt;a href="https://github.com/spring-cloud/spring-cloud-sleuth/issues/2038"&gt;#2038&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Reactive Mongo &lt;a href="https://github.com/spring-cloud/spring-cloud-sleuth/issues/2044"&gt;#2044&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Abstracted Redis instrumentation &lt;a href="https://github.com/spring-cloud/spring-cloud-sleuth/issues/2046"&gt;#2046&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Custom Actuator for storing traces &lt;a href="https://github.com/spring-cloud/spring-cloud-sleuth/issues/1879"&gt;#1879&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a href="#jdbc" class="anchor" name="jdbc"&gt;&lt;/a&gt;JDBC&lt;/h2&gt;
&lt;p&gt;Were decorating &lt;code&gt;DataSource&lt;/code&gt;s in a trace representation. We delegate actual proxying to either &lt;a href="https://github.com/p6spy/p6spy"&gt;p6spy&lt;/a&gt; or &lt;a href="https://github.com/ttddyy/datasource-proxy"&gt;datasource-proxy&lt;/a&gt;. In order to use this feature you need to have them on the classpath.&lt;/p&gt;
&lt;p&gt;&lt;img src="https://github.com/marcingrzejszczak/sleuth-3_1_0-blog/blob/main/images/jdbc.jpeg?raw=true" alt="JDBC example" /&gt;&lt;/p&gt;
&lt;p&gt;Check the &lt;a href="https://docs.spring.io/spring-cloud-sleuth/docs/current/reference/html/integrations.html#sleuth-jdbc-integration"&gt;docs&lt;/a&gt; for more details.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/spring-cloud-samples/spring-cloud-sleuth-samples/tree/main/data"&gt;Here&lt;/a&gt; you can find a sample that depicts this integration.&lt;/p&gt;&lt;h2&gt;&lt;a href="#tomcat-valve" class="anchor" name="tomcat-valve"&gt;&lt;/a&gt;Tomcat Valve&lt;/h2&gt;
&lt;p&gt;The main driver behind this change is that up till Sleuth 3.1 your Tomcat logs wouldn&amp;rsquo;t have any tracing information in it. With this change we&amp;rsquo;re instrumenting Tomcat, so we&amp;rsquo;re far earlier in the lifecycle of the request and we can instrument all possible logs with tracing information.&lt;/p&gt;
&lt;p&gt;&lt;img src="https://github.com/marcingrzejszczak/sleuth-3_1_0-blog/blob/main/images/mvc.jpeg?raw=true" alt="MVC example" /&gt;&lt;/p&gt;
&lt;p&gt;Check the &lt;a href="https://docs.spring.io/spring-cloud-sleuth/docs/current/reference/html/integrations.html#sleuth-tomcat-integration"&gt;docs&lt;/a&gt; for more details.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/spring-cloud-samples/spring-cloud-sleuth-samples/tree/main/mvc"&gt;Here&lt;/a&gt; you can find a sample that depicts this integration.&lt;/p&gt;&lt;h2&gt;&lt;a href="#spring-vault" class="anchor" name="spring-vault"&gt;&lt;/a&gt;Spring Vault&lt;/h2&gt;
&lt;p&gt;Were instrumenting the &lt;code&gt;RestTemplate&lt;/code&gt; or &lt;code&gt;WebClient&lt;/code&gt; instances used by Spring Vault to communicate with Vault.&lt;/p&gt;
&lt;p&gt;&lt;img src="https://github.com/marcingrzejszczak/sleuth-3_1_0-blog/blob/main/images/vault.jpeg?raw=true" alt="Vault example" /&gt;&lt;/p&gt;
&lt;p&gt;Check the &lt;a href="https://docs.spring.io/spring-cloud-sleuth/docs/current/reference/html/integrations.html#sleuth-vault-integration"&gt;docs&lt;/a&gt; for more details.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/spring-cloud-samples/spring-cloud-sleuth-samples/tree/main/vault-resttemplate"&gt;Here&lt;/a&gt; you can find a sample that depicts this integration for &lt;code&gt;RestTemplate&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/spring-cloud-samples/spring-cloud-sleuth-samples/tree/main/vault-webclient"&gt;Here&lt;/a&gt; you can find a sample that depicts this integration for &lt;code&gt;WebClient&lt;/code&gt;.&lt;/p&gt;&lt;h2&gt;&lt;a href="#automatic-tag-table-generation-for-documentation" class="anchor" name="automatic-tag-table-generation-for-documentation"&gt;&lt;/a&gt;Automatic tag table generation for documentation&lt;/h2&gt;
&lt;p&gt;There&amp;rsquo;s nothing more frustrating in the tracing world than creating a span and not starting it, or not stopping it. We had enough of such situations&amp;hellip; Another challenge we faced was that we didn&amp;rsquo;t even remember any longer how many spans we create, what their names are and how many tags / events are being set on them.&lt;/p&gt;
&lt;p&gt;We&amp;rsquo;ve decided to alter the way we code things in Sleuth so that we can introduce certain automation. We are instrumenting the code once, however we are able to turn on at the test time additional assertions that verify if spans were started and stopped etc. Also at the documentation build time we parse the sources and build a table of spans together with some details.&lt;/p&gt;
&lt;p&gt;You can check the &lt;a href="https://docs.spring.io/spring-cloud-sleuth/docs/current/reference/html/appendix.html#sleuth-spans"&gt;docs&lt;/a&gt; to see the results of that automation.&lt;/p&gt;&lt;h2&gt;&lt;a href="#spring-cloud-deployer" class="anchor" name="spring-cloud-deployer"&gt;&lt;/a&gt;Spring Cloud Deployer&lt;/h2&gt;
&lt;p&gt;If you have &lt;a href="https://github.com/spring-cloud/spring-cloud-deployer"&gt;Spring Cloud Deployer&lt;/a&gt; running on the classpath, we wrap the &lt;code&gt;AppDeployer&lt;/code&gt; in a trace representation. We are polling the application for its status at a default interval.&lt;/p&gt;
&lt;p&gt;&lt;img src="https://github.com/marcingrzejszczak/sleuth-3_1_0-blog/blob/main/images/deployer.jpeg?raw=true" alt="Deployer example" /&gt;&lt;/p&gt;
&lt;p&gt;Check the &lt;a href="https://docs.spring.io/spring-cloud-sleuth/docs/current/reference/html/integrations.html#sleuth-deployer-integration"&gt;docs&lt;/a&gt; for more details.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/spring-cloud-samples/spring-cloud-sleuth-samples/tree/main/deployer"&gt;Here&lt;/a&gt; you can find a sample that depicts this integration.&lt;/p&gt;&lt;h2&gt;&lt;a href="#r2dbc" class="anchor" name="r2dbc"&gt;&lt;/a&gt;R2DBC&lt;/h2&gt;
&lt;p&gt;If you have &lt;a href="http://r2dbc.io/r2dbc-proxy/docs/current-snapshot/docs/html/"&gt;R2DBC Proxy&lt;/a&gt; on the classpath we will instrument the &lt;code&gt;ConnectionFactory&lt;/code&gt; so that it contains a custom &lt;code&gt;ProxyExecutionListener&lt;/code&gt;. &lt;/p&gt;
&lt;p&gt;&lt;img src="https://github.com/marcingrzejszczak/sleuth-3_1_0-blog/blob/main/images/r2dbc.jpeg?raw=true" alt="R2DBC example" /&gt;&lt;/p&gt;
&lt;p&gt;Check the &lt;a href="https://docs.spring.io/spring-cloud-sleuth/docs/current/reference/html/integrations.html#sleuth-r2dbc-integration"&gt;docs&lt;/a&gt; for more details.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/spring-cloud-samples/spring-cloud-sleuth-samples/tree/main/data-reactive"&gt;Here&lt;/a&gt; you can find a sample that depicts this integration.&lt;/p&gt;&lt;h2&gt;&lt;a href="#kafka-and-reactor-kafka" class="anchor" name="kafka-and-reactor-kafka"&gt;&lt;/a&gt;Kafka and Reactor Kafka&lt;/h2&gt;
&lt;p&gt;We decorate the Kafka clients (&lt;code&gt;KafkaProducer&lt;/code&gt; and &lt;code&gt;KafkaConsumer&lt;/code&gt;) to create a span for each event that is produced or consumed. We also provide &lt;code&gt;TracingKafkaProducerFactory&lt;/code&gt; and &lt;code&gt;TracingKafkaConsumerFactory&lt;/code&gt; to be used with the Reactor Kafka clients (&lt;code&gt;KafkaSender&lt;/code&gt; and &lt;code&gt;KafkaReceiver&lt;/code&gt;, respectively). Additionally, we decorate any Spring Kafka &lt;code&gt;ProducerFactory&lt;/code&gt; and &lt;code&gt;ConsumerFactory&lt;/code&gt; available in the context.&lt;/p&gt;
&lt;p&gt;&lt;img src="https://github.com/marcingrzejszczak/sleuth-3_1_0-blog/blob/main/images/reactive-kafka.jpeg?raw=true" alt="Kafka example" /&gt;&lt;/p&gt;
&lt;p&gt;Check the &lt;a href="https://docs.spring.io/spring-cloud-sleuth/docs/current/reference/html/integrations.html#sleuth-kafka-integration"&gt;docs&lt;/a&gt; for more details.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/spring-cloud-samples/spring-cloud-sleuth-samples/tree/main/kafka-producer"&gt;Here&lt;/a&gt; you can find a sample that depicts this integration for Kafka producer.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/spring-cloud-samples/spring-cloud-sleuth-samples/tree/main/kafka-consumer"&gt;Here&lt;/a&gt; you can find a sample that depicts this integration for Kafka consumer.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/spring-cloud-samples/spring-cloud-sleuth-samples/tree/main/kafka-reactive-producer"&gt;Here&lt;/a&gt; you can find a sample that depicts this integration for Kafka Reactive producer.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/spring-cloud-samples/spring-cloud-sleuth-samples/tree/main/kafka-reactive-consumer"&gt;Here&lt;/a&gt; you can find a sample that depicts this integration for Kafka Reactive consumer.&lt;/p&gt;&lt;h2&gt;&lt;a href="#spring-tx" class="anchor" name="spring-tx"&gt;&lt;/a&gt;Spring TX&lt;/h2&gt;
&lt;p&gt;If you have Spring Tx on the classpath we will instrument the &lt;code&gt;PlatformTransactionManager&lt;/code&gt; and the &lt;code&gt;ReactiveTransactionManager&lt;/code&gt; to create a span whenever a new transaction is created.&lt;/p&gt;
&lt;p&gt;&lt;img src="https://github.com/marcingrzejszczak/sleuth-3_1_0-blog/blob/main/images/jdbc.jpeg?raw=true" alt="TX example" /&gt;&lt;/p&gt;
&lt;p&gt;Check the &lt;a href="https://docs.spring.io/spring-cloud-sleuth/docs/current/reference/html/integrations.html#sleuth-tx-integration"&gt;docs&lt;/a&gt; for more details.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/spring-cloud-samples/spring-cloud-sleuth-samples/tree/main/data"&gt;Here&lt;/a&gt; you can find a sample that depicts this integration.&lt;/p&gt;&lt;h2&gt;&lt;a href="#spring-batch" class="anchor" name="spring-batch"&gt;&lt;/a&gt;Spring Batch&lt;/h2&gt;
&lt;p&gt;If you have Spring Batch running on the classpath, we wrap the &lt;code&gt;StepBuilderFactory&lt;/code&gt; and the &lt;code&gt;JobBuilderFactory&lt;/code&gt; to propagate the tracing context.&lt;/p&gt;
&lt;p&gt;&lt;img src="https://github.com/marcingrzejszczak/sleuth-3_1_0-blog/blob/main/images/batch.jpeg?raw=true" alt="Batch example" /&gt;&lt;/p&gt;
&lt;p&gt;Check the &lt;a href="https://docs.spring.io/spring-cloud-sleuth/docs/current/reference/html/integrations.html#sleuth-batch-integration"&gt;docs&lt;/a&gt; for more details.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/spring-cloud-samples/spring-cloud-sleuth-samples/tree/main/batch"&gt;Here&lt;/a&gt; you can find a sample that depicts this integration.&lt;/p&gt;&lt;h2&gt;&lt;a href="#rsocket" class="anchor" name="rsocket"&gt;&lt;/a&gt;RSocket&lt;/h2&gt;
&lt;p&gt;If you have Spring RSocket running on the classpath, we wrap the inbound and outbound communication to propagate the tracing context via the metadata&lt;/p&gt;
&lt;p&gt;&lt;img src="https://github.com/marcingrzejszczak/sleuth-3_1_0-blog/blob/main/images/rsocket.jpeg?raw=true" alt="RSocket example" /&gt;&lt;/p&gt;
&lt;p&gt;Check the &lt;a href="https://docs.spring.io/spring-cloud-sleuth/docs/current/reference/html/integrations.html#sleuth-rsocket-integration"&gt;docs&lt;/a&gt; for more details.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/spring-cloud-samples/spring-cloud-sleuth-samples/tree/main/rsocket-server"&gt;Here&lt;/a&gt; you can find a sample that depicts this integration for RSocket server.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/spring-cloud-samples/spring-cloud-sleuth-samples/tree/main/rsocket-client"&gt;Here&lt;/a&gt; you can find a sample that depicts this integration for RSocket client.&lt;/p&gt;&lt;h2&gt;&lt;a href="#spring-cloud-task" class="anchor" name="spring-cloud-task"&gt;&lt;/a&gt;Spring Cloud Task&lt;/h2&gt;
&lt;p&gt;If you have Spring Cloud Task running on the classpath, we&amp;rsquo;re instrumenting &lt;code&gt;TaskExecutionListener&lt;/code&gt; and &lt;code&gt;CommandLineRunner&lt;/code&gt; and &lt;code&gt;ApplicationRunner&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img src="https://github.com/marcingrzejszczak/sleuth-3_1_0-blog/blob/main/images/task.jpeg?raw=true" alt="Task example" /&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/spring-cloud-samples/spring-cloud-sleuth-samples/tree/main/task"&gt;Here&lt;/a&gt; you can find a sample that depicts this integration.&lt;/p&gt;&lt;h2&gt;&lt;a href="#spring-cloud-config" class="anchor" name="spring-cloud-config"&gt;&lt;/a&gt;Spring Cloud Config&lt;/h2&gt;
&lt;p&gt;If you have Spring Cloud Config Server running on the classpath, we will wrap the &lt;code&gt;EnvironmentRepository&lt;/code&gt; in a span.&lt;/p&gt;
&lt;p&gt;&lt;img src="https://github.com/marcingrzejszczak/sleuth-3_1_0-blog/blob/main/images/config-server.jpeg?raw=true" alt="Config Server example" /&gt;&lt;/p&gt;
&lt;p&gt;Check the &lt;a href="https://docs.spring.io/spring-cloud-sleuth/docs/current/reference/html/integrations.html#sleuth-config-server-integration"&gt;docs&lt;/a&gt; for more details.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/spring-cloud-samples/spring-cloud-sleuth-samples/tree/main/config-server"&gt;Here&lt;/a&gt; you can find a sample that depicts this integration.&lt;/p&gt;&lt;h2&gt;&lt;a href="#spring-cloud-circuitbreaker-reactive" class="anchor" name="spring-cloud-circuitbreaker-reactive"&gt;&lt;/a&gt;Spring Cloud CircuitBreaker Reactive&lt;/h2&gt;
&lt;p&gt;If you have Spring Cloud CircuitBreaker on the classpath, we will wrap the passed command &lt;code&gt;Supplier&lt;/code&gt; and the fallback &lt;code&gt;Function&lt;/code&gt; in its trace representations.&lt;/p&gt;
&lt;p&gt;&lt;img src="https://github.com/marcingrzejszczak/sleuth-3_1_0-blog/blob/main/images/reactive-circuitbreaker.jpeg?raw=true" alt="CircuitBreaker Reactive example" /&gt;&lt;/p&gt;
&lt;p&gt;Check the &lt;a href="https://docs.spring.io/spring-cloud-sleuth/docs/current/reference/html/integrations.html#sleuth-circuitbreaker-integration"&gt;docs&lt;/a&gt; for more details.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/spring-cloud-samples/spring-cloud-sleuth-samples/tree/main/circuitbreaker-reactive"&gt;Here&lt;/a&gt; you can find a sample that depicts this integration.&lt;/p&gt;&lt;h2&gt;&lt;a href="#cassandra" class="anchor" name="cassandra"&gt;&lt;/a&gt;Cassandra&lt;/h2&gt;
&lt;p&gt;If you have Spring Data Cassandra on the classpath, were instrumenting Casandras &lt;code&gt;CqlSession&lt;/code&gt; and &lt;code&gt;ReactiveSession&lt;/code&gt; interfaces and were providing our own implementation of the &lt;code&gt;RequestTracker&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img src="https://github.com/marcingrzejszczak/sleuth-3_1_0-blog/blob/main/images/cassandra.jpeg?raw=true" alt="Cassandra example" /&gt;&lt;/p&gt;
&lt;p&gt;Check the &lt;a href="https://docs.spring.io/spring-cloud-sleuth/docs/current/reference/html/integrations.html#sleuth-cassandra-integration"&gt;docs&lt;/a&gt; for more details.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/spring-cloud-samples/spring-cloud-sleuth-samples/tree/main/cassandra"&gt;Here&lt;/a&gt; you can find a sample that depicts this integration for non reactive Cassandra.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/spring-cloud-samples/spring-cloud-sleuth-samples/tree/main/cassandra-reactive"&gt;Here&lt;/a&gt; you can find a sample that depicts this integration for reactive Cassandra.&lt;/p&gt;&lt;h2&gt;&lt;a href="#spring-session" class="anchor" name="spring-session"&gt;&lt;/a&gt;Spring Session&lt;/h2&gt;
&lt;p&gt;If you have Spring Session on the classpath, were instrumenting the &lt;code&gt;Session&lt;/code&gt; repositories that wraps all operations in a span.&lt;/p&gt;
&lt;p&gt;&lt;img src="https://github.com/marcingrzejszczak/sleuth-3_1_0-blog/blob/main/images/session.jpeg?raw=true" alt="Session example" /&gt;&lt;/p&gt;
&lt;p&gt;Check the &lt;a href="https://docs.spring.io/spring-cloud-sleuth/docs/current/reference/html/integrations.html#sleuth-session-integration"&gt;docs&lt;/a&gt; for more details.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/spring-cloud-samples/spring-cloud-sleuth-samples/tree/main/session"&gt;Here&lt;/a&gt; you can find a sample that depicts this integration.&lt;/p&gt;&lt;h2&gt;&lt;a href="#spring-security" class="anchor" name="spring-security"&gt;&lt;/a&gt;Spring Security&lt;/h2&gt;
&lt;p&gt;If you have Spring Security on the classpath, we create an implementation of &lt;code&gt;SecurityContextChangedListener&lt;/code&gt; that annotates a current span with an event when context has changed.&lt;/p&gt;
&lt;p&gt;&lt;img src="https://github.com/marcingrzejszczak/sleuth-3_1_0-blog/blob/main/images/security.jpeg?raw=true" alt="Security example" /&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/spring-cloud-samples/spring-cloud-sleuth-samples/tree/main/security"&gt;Here&lt;/a&gt; you can find a sample that depicts this integration.&lt;/p&gt;&lt;h2&gt;&lt;a href="#prometheus-exemplars" class="anchor" name="prometheus-exemplars"&gt;&lt;/a&gt;Prometheus Exemplars&lt;/h2&gt;
&lt;p&gt;Exemplars are metadata attached to metrics (see: &lt;a href="https://github.com/prometheus/client_java#exemplars"&gt;Prometheus Exemplars&lt;/a&gt;), e.g.: traceId so that you can get an example traceId for your metrics.&lt;/p&gt;
&lt;p&gt;We&amp;rsquo;re integrating Sleuth with Prometheus so that if somebody uses the Prometheus Java Client, they can get Exemplars using Sleuth. This issue is also connected to the Micrometer Exemplars Support, &lt;a href="https://github.com/micrometer-metrics/micrometer/issues/2672"&gt;see&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/spring-cloud/spring-cloud-sleuth/issues/2039"&gt;Here&lt;/a&gt; you can read more about the issue.&lt;/p&gt;
&lt;p&gt;There are a couple of notes to take into consideration with regards to this feature:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Micrometer does not support exemplars at the moment, we are planning to do it in our next release (you can use the Prometheus client in the meantime)&lt;/li&gt;
  &lt;li&gt;This is an experimental feature in Prometheus, you need to explicitly enable it with a &lt;a href="https://prometheus.io/docs/prometheus/latest/feature_flags/#exemplars-storage"&gt;feature flag&lt;/a&gt; (see: &lt;a href="https://github.com/jonatan-ivanov/local-services/commit/f3e37cbdf9943ac9b722605d559bbf1bcff8f637"&gt;example&lt;/a&gt;)&lt;/li&gt;
  &lt;li&gt;Likewise, you need to &lt;a href="https://grafana.com/docs/grafana/latest/datasources/prometheus/#configuring-exemplars"&gt;configure&lt;/a&gt; it in your Grafana datasource and define the url pattern for your tracing backend (see: &lt;a href="https://github.com/jonatan-ivanov/local-services/commit/d2b5a3823cf5b5fb88e2445c98cd2677aa4e5925"&gt;example with Zipkin&lt;/a&gt;)&lt;/li&gt;
  &lt;li&gt;You also need to make sure that the exemplar flag is enabled on the panel of your dashboard where you want to use exemplars (see: &lt;a href="https://github.com/jonatan-ivanov/local-services/commit/a0bead7ce1f7667df56ee2244cdec0278bbcdf1e#diff-96ea0550ca66bf8428836c6eb864c3d0e3bcf0e07f2a1be13308146837365887R91"&gt;example Dashboard&lt;/a&gt;)&lt;/li&gt;
  &lt;li&gt;There is no configuration needed on your tracing backend (e.g.: Zipkin), you just need to know the url pattern that the backend uses to reference a traceId (see the url pattern above)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src="https://github.com/marcingrzejszczak/sleuth-3_1_0-blog/blob/main/images/exemplars1.png?raw=true" alt="Exemplars example" /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src="https://github.com/marcingrzejszczak/sleuth-3_1_0-blog/blob/main/images/exemplars2.png?raw=true" alt="Exemplars example" /&gt;&lt;/p&gt;&lt;h2&gt;&lt;a href="#spring-cloud-stream-reactive" class="anchor" name="spring-cloud-stream-reactive"&gt;&lt;/a&gt;Spring Cloud Stream Reactive&lt;/h2&gt;
&lt;p&gt;Spring Cloud Sleuth can instrument Spring Cloud Function. Since Spring Cloud Stream uses Spring Cloud Function you will get the messaging instrumentation out of the box.&lt;/p&gt;
&lt;p&gt;The way to achieve it is to provide a &lt;code&gt;Function&lt;/code&gt; or &lt;code&gt;Consumer&lt;/code&gt; or &lt;code&gt;Supplier&lt;/code&gt; that takes in a &lt;code&gt;Message&lt;/code&gt; as a parameter e.g. &lt;code&gt;Function&amp;lt;Message&amp;lt;String&amp;gt;, Message&amp;lt;Integer&amp;gt;&amp;gt;&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;If the type &lt;strong&gt;is not&lt;/strong&gt; &lt;code&gt;Message&lt;/code&gt; then instrumentation &lt;strong&gt;will not&lt;/strong&gt; take place.&lt;/p&gt;
&lt;p&gt;For a reactive &lt;code&gt;Consumer&amp;lt;Flux&amp;lt;Message&amp;lt;?&amp;gt;&amp;gt;&amp;gt;&lt;/code&gt; remember to manually close the span and clear the context before you call &lt;code&gt;.subscribe()&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img src="https://github.com/marcingrzejszczak/sleuth-3_1_0-blog/blob/main/images/reactive-stream.jpeg?raw=true" alt="Stream reactive example" /&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/spring-cloud-samples/spring-cloud-sleuth-samples/tree/main/stream-reactive-producer"&gt;Here&lt;/a&gt; you can find a sample that depicts this integration for the producer.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/spring-cloud-samples/spring-cloud-sleuth-samples/tree/main/stream-reactive-consumer"&gt;Here&lt;/a&gt; you can find a sample that depicts this integration for the consumer.&lt;/p&gt;&lt;h2&gt;&lt;a href="#reactive-mongo" class="anchor" name="reactive-mongo"&gt;&lt;/a&gt;Reactive Mongo&lt;/h2&gt;
&lt;p&gt;Were adding command listeners that wrap all commands in a span. It works both for the Reactive and non Reactive case.&lt;/p&gt;
&lt;p&gt;&lt;img src="https://github.com/marcingrzejszczak/sleuth-3_1_0-blog/blob/main/images/reactive-mongo.jpeg?raw=true" alt="Reactive Mongo example" /&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/spring-cloud-samples/spring-cloud-sleuth-samples/tree/main/mongodb-reactive"&gt;Here&lt;/a&gt; you can find a sample that depicts this integration.&lt;/p&gt;&lt;h2&gt;&lt;a href="#abstracted-redis-instrumentation" class="anchor" name="abstracted-redis-instrumentation"&gt;&lt;/a&gt;Abstracted Redis instrumentation&lt;/h2&gt;
&lt;p&gt;With this &lt;a href="https://github.com/spring-cloud/spring-cloud-sleuth/pull/2046"&gt;PR&lt;/a&gt; the Redis instrumentation can work for other Tracers, such as OpenTelemetry.&lt;/p&gt;&lt;h2&gt;&lt;a href="#custom-actuator-for-storing-traces" class="anchor" name="custom-actuator-for-storing-traces"&gt;&lt;/a&gt;Custom Actuator for storing traces&lt;/h2&gt;
&lt;p&gt;Spring Cloud Sleuth comes with a traces Actuator endpoint that can store finished spans. The endpoint can be queried either via an HTTP Get method to simply retrieve the list of stored spans or via HTTP Post method to retrieve the list and clear it.&lt;/p&gt;
&lt;p&gt;Check the &lt;a href="https://docs.spring.io/spring-cloud-sleuth/docs/current/reference/html/project-features.html#features-traces-actuator"&gt;docs&lt;/a&gt; for more details.&lt;/p&gt;&lt;h1&gt;&lt;a href="#stay-in-touch" class="anchor" name="stay-in-touch"&gt;&lt;/a&gt;Stay in touch!&lt;/h1&gt;
&lt;p&gt;This release introduces a lot of instrumentations. We would love to see your traces! You can go to our &lt;a href="https://gitter.im/spring-cloud/spring-cloud-sleuth"&gt;Gitter&lt;/a&gt; and paste a screenshot of your traces so that we can analyze how we can improve it.&lt;/p&gt;
&lt;p&gt;In case of any questions don&amp;rsquo;t hesitate to ping us&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;On &lt;a href="https://github.com/spring-cloud/spring-cloud-sleuth/"&gt;Github&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;On &lt;a href="https://gitter.im/spring-cloud/spring-cloud-sleuth"&gt;Gitter&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;On &lt;a href="https://stackoverflow.com/questions/tagged/spring-cloud-sleuth"&gt;Stackoverflow&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a href="#links" class="anchor" name="links"&gt;&lt;/a&gt;Links&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href="https://docs.wavefront.com/wavefront_springboot.html"&gt;Getting Started with Spring Boot and Tanzu Observability by Wavefront&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="https://docs.spring.io/spring-cloud-sleuth/docs/3.1.0/reference/html/"&gt;Spring Cloud Sleuth 3.1.0 docs&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="https://github.com/spring-cloud-samples/spring-cloud-sleuth-samples/"&gt;Spring Cloud Sleuth Samples&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="https://github.com/spring-projects-experimental/spring-cloud-sleuth-otel/"&gt;Spring Cloud Sleuth OpenTelemetry project&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="https://spring-projects-experimental.github.io/spring-cloud-sleuth-otel/docs/current/reference/html/index.html"&gt;Spring Cloud Sleuth OpenTelemetry docs&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="https://github.com/spring-cloud/spring-cloud-release/wiki/Spring-Cloud-2021.0-Release-Notes#spring-cloud-sleuth"&gt;Spring Cloud Sleuth 3.1.0 release notes&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="https://github.com/spring-cloud/spring-cloud-sleuth/"&gt;Spring Cloud Sleuth Github&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="https://gitter.im/spring-cloud/spring-cloud-sleuth"&gt;Spring Cloud Sleuth Gitter&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- rendered by Sagan Renderer Service --&gt;</content>
  </entry>
  <entry>
    <title>A Bootiful Podcast: DataStax's Christopher Bradford on the Apache Cassandra operator for Kubernetes, K8ssandra</title>
    <link rel="alternate" href="https://spring.io/blog/2021/12/02/a-bootiful-podcast-datastax-s-christopher-bradford-on-the-apache-cassandra-operator-for-kubernetes-k8ssandra" />
    <category term="engineering" label="Engineering" />
    <author>
      <name>Josh Long</name>
    </author>
    <id>tag:spring.io,2021-12-03:4631</id>
    <updated>2021-12-03T01:00:00Z</updated>
    <content type="html">&lt;p&gt;Hi, Spring fans! In this installment, &lt;a href="https://twitter.com/starbuxman"&gt;Josh Long (@starbuxman)&lt;/a&gt; talks to DataStax&amp;rsquo;s &lt;a href="https://www.linkedin.com/in/bradfordcp/"&gt;Christopher Bradford&lt;/a&gt; on the Apache Cassandra operator for Kubernetes, &lt;a href="https://k8ssandra.io/"&gt;K8ssandra&lt;/a&gt;.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href="https://thenewstack.io/taking-your-database-beyond-a-single-kubernetes-cluster/"&gt;KubeCon Talk blogpost part 1&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="https://medium.com/building-the-open-data-stack/managing-distributed-applications-in-kubernetes-using-cilium-and-istio-with-helm-and-operator-for-9652d71d6432"&gt;KubeCon Talk blogpost part 2&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="https://thenewstack.io/we-pushed-helm-to-the-limit-then-built-a-kubernetes-operator/"&gt;We Pushed Helm to the Limit, then Built a Kubernetes Operator &lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="https://thenewstack.io/a-case-for-databases-on-kubernetes-from-a-former-skeptic/"&gt;A Case for Databases on Kubernetes from a Former Skeptic&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;iframe title="DataStaxs Christopher Bradford on the Apache Cassandra operator for Kubernetes, K8ssandra " allowtransparency="true" height="150" width="100%" style="border: none; min-width: min(100%, 430px);" scrolling="no" data-name="pb-iframe-player" src="https://www.podbean.com/player-v2/?i=yxvy2-1147ea1-pb&amp;from=pb6admin&amp;share=1&amp;download=1&amp;rtl=0&amp;fonts=Arial&amp;skin=1&amp;font-color=&amp;btn-skin=7"&gt;&lt;/iframe&gt;
&lt;!-- rendered by Sagan Renderer Service --&gt;</content>
  </entry>
  <entry>
    <title>Spring Cloud 2021.0.0 (codename Jubilee) Has Been Released</title>
    <link rel="alternate" href="https://spring.io/blog/2021/12/02/spring-cloud-2021-0-0-codename-jubilee-has-been-released" />
    <category term="releases" label="Releases" />
    <author>
      <name>Spencer Gibb</name>
    </author>
    <id>tag:spring.io,2021-12-02:4630</id>
    <updated>2021-12-02T21:45:00Z</updated>
    <content type="html">&lt;p&gt;On behalf of the community, I am pleased to announce the General Availability of the &lt;a href="https://cloud.spring.io"&gt;Spring Cloud 2021.0&lt;/a&gt; Release Train, codename Jubilee, is available today. The release can be found in &lt;a href="https://repo1.maven.org/maven2/org/springframework/cloud/spring-cloud-dependencies/2021.0.0/"&gt;Maven Central&lt;/a&gt;. You can check out the 2021.0 &lt;a href="https://github.com/spring-cloud/spring-cloud-release/wiki/Spring-Cloud-2021.0-Release-Notes"&gt;release notes for more information&lt;/a&gt;.&lt;/p&gt;&lt;h2&gt;&lt;a href="#notable-changes-in-the-2021-0-release-train" class="anchor" name="notable-changes-in-the-2021-0-release-train"&gt;&lt;/a&gt;Notable Changes in the 2021.0 Release Train&lt;/h2&gt;
&lt;p&gt;2021.0.0 is compatible with Spring Boot 2.6.1&lt;/p&gt;
&lt;p&gt;See &lt;a href="https://github.com/orgs/spring-cloud/projects/59"&gt;the project page&lt;/a&gt; for all the issues and pull requests included in this release.&lt;/p&gt;&lt;h3&gt;&lt;a href="#spring-cloud-commons" class="anchor" name="spring-cloud-commons"&gt;&lt;/a&gt;Spring Cloud Commons&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;Support for per LoadBalancer configuration properties (added as well to Gateway, Contract and OpenFeign).&lt;/li&gt;
&lt;/ul&gt;&lt;h3&gt;&lt;a href="#spring-cloud-config" class="anchor" name="spring-cloud-config"&gt;&lt;/a&gt;Spring Cloud Config&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;Integration with AWS Secrets Manager, AWS Parameter Store and GCP Secret Manager.&lt;/li&gt;
&lt;/ul&gt;&lt;h3&gt;&lt;a href="#spring-cloud-function" class="anchor" name="spring-cloud-function"&gt;&lt;/a&gt;Spring Cloud Function&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;Support for gRPC, FunctionCatalog via actuator endpoint, AWS improvements, CloudEvents etc. You can read more in &lt;a href="https://spring.io/blog/2021/12/02/spring-cloud-function-3-2-is-out"&gt;this blog post&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h3&gt;&lt;a href="#spring-cloud-gateway" class="anchor" name="spring-cloud-gateway"&gt;&lt;/a&gt;Spring Cloud Gateway&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;Redis Route Repository&lt;/li&gt;
  &lt;li&gt;HTTP 2 Support&lt;/li&gt;
  &lt;li&gt;gRPC Support&lt;/li&gt;
&lt;/ul&gt;&lt;h3&gt;&lt;a href="#spring-cloud-kubernetes" class="anchor" name="spring-cloud-kubernetes"&gt;&lt;/a&gt;Spring Cloud Kubernetes&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;Config Server and Discovery Controllers&lt;/li&gt;
&lt;/ul&gt;&lt;h3&gt;&lt;a href="#spring-cloud-openfeign" class="anchor" name="spring-cloud-openfeign"&gt;&lt;/a&gt;Spring Cloud OpenFeign&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;Support for &lt;code&gt;@Cachable&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h3&gt;&lt;a href="#spring-cloud-sleuth" class="anchor" name="spring-cloud-sleuth"&gt;&lt;/a&gt;Spring Cloud Sleuth&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;Instrumentation for Tomcat, Spring Vault, R2DBC, JDBC, Spring Cloud Deployer, Spring Cloud Skipper, Reactor Kafka, Spring TX, Spring Batch, RSocket, Spring Cloud Task, Spring Cloud Config, Kotlin Coroutines, and more.&lt;/li&gt;
&lt;/ul&gt;&lt;h3&gt;&lt;a href="#spring-cloud-stream" class="anchor" name="spring-cloud-stream"&gt;&lt;/a&gt;Spring Cloud Stream&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;About 100 issues have been resolved for this release between &lt;a href="https://github.com/spring-cloud/spring-cloud-stream/milestone/82?closed=1"&gt;core&lt;/a&gt;, &lt;a href="https://github.com/spring-cloud/spring-cloud-stream-binder-kafka/issues?q=is%3Aissue+milestone%3A3.2.0+is%3Aclosed"&gt;Kafka&lt;/a&gt; and &lt;a href="https://github.com/spring-cloud/spring-cloud-stream-binder-rabbit/milestone/51?closed=1"&gt;Rabbit&lt;/a&gt; binders.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The following modules were updated as part of 2021.0.0:&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Module &lt;/th&gt;
      &lt;th&gt;Version &lt;/th&gt;
      &lt;th&gt;Issues&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Spring Cloud Vault &lt;/td&gt;
      &lt;td&gt;3.1.0 &lt;/td&gt;
      &lt;td&gt;&amp;nbsp;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Spring Cloud Bus &lt;/td&gt;
      &lt;td&gt;3.1.0 &lt;/td&gt;
      &lt;td&gt;&amp;nbsp;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Spring Cloud Cli &lt;/td&gt;
      &lt;td&gt;3.1.0 &lt;/td&gt;
      &lt;td&gt;&amp;nbsp;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Spring Cloud Zookeeper &lt;/td&gt;
      &lt;td&gt;3.1.0 &lt;/td&gt;
      &lt;td&gt;&amp;nbsp;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Spring Cloud Circuitbreaker &lt;/td&gt;
      &lt;td&gt;2.1.0 &lt;/td&gt;
      &lt;td&gt;(&lt;a href="https://github.com/spring-cloud/spring-cloud-circuitbreaker/milestone/11?closed=1"&gt;issues&lt;/a&gt;)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Spring Cloud Commons &lt;/td&gt;
      &lt;td&gt;3.1.0 &lt;/td&gt;
      &lt;td&gt;(&lt;a href="https://github.com/spring-cloud/spring-cloud-commons/milestone/96?closed=1"&gt;issues&lt;/a&gt;)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Spring Cloud Kubernetes &lt;/td&gt;
      &lt;td&gt;2.1.0 &lt;/td&gt;
      &lt;td&gt;(&lt;a href="https://github.com/spring-cloud/spring-cloud-kubernetes/milestone/38?closed=1"&gt;issues&lt;/a&gt;)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Spring Cloud OpenFeign &lt;/td&gt;
      &lt;td&gt;3.1.0 &lt;/td&gt;
      &lt;td&gt;(&lt;a href="https://github.com/spring-cloud/spring-cloud-openfeign/milestone/47?closed=1"&gt;issues&lt;/a&gt;)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Spring Cloud Task &lt;/td&gt;
      &lt;td&gt;2.4.0 &lt;/td&gt;
      &lt;td&gt;(&lt;a href="https://github.com/spring-cloud/spring-cloud-task/milestone/53?closed=1"&gt;issues&lt;/a&gt;)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Spring Cloud Sleuth &lt;/td&gt;
      &lt;td&gt;3.1.0 &lt;/td&gt;
      &lt;td&gt;(&lt;a href="https://github.com/spring-cloud/spring-cloud-sleuth/milestone/97?closed=1"&gt;issues&lt;/a&gt;)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Spring Cloud Contract &lt;/td&gt;
      &lt;td&gt;3.1.0 &lt;/td&gt;
      &lt;td&gt;(&lt;a href="https://github.com/spring-cloud/spring-cloud-contract/milestone/83?closed=1"&gt;issues&lt;/a&gt;)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Spring Cloud Consul &lt;/td&gt;
      &lt;td&gt;3.1.0 &lt;/td&gt;
      &lt;td&gt;&amp;nbsp;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Spring Cloud Function &lt;/td&gt;
      &lt;td&gt;3.2.1 &lt;/td&gt;
      &lt;td&gt;(&lt;a href="https://github.com/spring-cloud/spring-cloud-function/milestone/37?closed=1"&gt;issues&lt;/a&gt;)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Spring Cloud Stream &lt;/td&gt;
      &lt;td&gt;3.2.1 &lt;/td&gt;
      &lt;td&gt;see above for the list of issues&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Spring Cloud Gateway &lt;/td&gt;
      &lt;td&gt;3.1.0 &lt;/td&gt;
      &lt;td&gt;(&lt;a href="https://github.com/spring-cloud/spring-cloud-gateway/milestone/60?closed=1"&gt;issues&lt;/a&gt;)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Spring Cloud Config &lt;/td&gt;
      &lt;td&gt;3.1.0 &lt;/td&gt;
      &lt;td&gt;(&lt;a href="https://github.com/spring-cloud/spring-cloud-config/milestone/96?closed=1"&gt;issues&lt;/a&gt;)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Spring Cloud Cloudfoundry &lt;/td&gt;
      &lt;td&gt;3.1.0 &lt;/td&gt;
      &lt;td&gt;&amp;nbsp;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Spring Cloud Starter Build &lt;/td&gt;
      &lt;td&gt;2021.0.0 &lt;/td&gt;
      &lt;td&gt;&amp;nbsp;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Spring Cloud Netflix &lt;/td&gt;
      &lt;td&gt;3.1.0 &lt;/td&gt;
      &lt;td&gt;(&lt;a href="https://github.com/spring-cloud/spring-cloud-netflix/milestone/108?closed=1"&gt;issues&lt;/a&gt;)&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;As always, we welcome feedback on &lt;a href="https://github.com/spring-cloud/"&gt;GitHub&lt;/a&gt;, on &lt;a href="https://gitter.im/spring-cloud/spring-cloud"&gt;Gitter&lt;/a&gt;, on &lt;a href="https://stackoverflow.com/questions/tagged/spring-cloud"&gt;Stack Overflow&lt;/a&gt;, or on &lt;a href="https://twitter.com/SpringCloud"&gt;Twitter&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;To get started with Maven with a BOM (dependency management only):&lt;/p&gt;
&lt;pre&gt;&lt;code class="prettyprint xml"&gt;&lt;br/&gt;&amp;lt;dependencies&amp;gt;&#xD;
    &amp;lt;dependency&amp;gt;&#xD;
        &amp;lt;groupId&amp;gt;org.springframework.cloud&amp;lt;/groupId&amp;gt;&#xD;
        &amp;lt;artifactId&amp;gt;spring-cloud-starter-config&amp;lt;/artifactId&amp;gt;&#xD;
    &amp;lt;/dependency&amp;gt;&#xD;
    &amp;lt;dependency&amp;gt;&#xD;
        &amp;lt;groupId&amp;gt;org.springframework.cloud&amp;lt;/groupId&amp;gt;&#xD;
        &amp;lt;artifactId&amp;gt;spring-cloud-starter-netflix-eureka-client&amp;lt;/artifactId&amp;gt;&#xD;
    &amp;lt;/dependency&amp;gt;&#xD;
    ...&#xD;
&amp;lt;/dependencies&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;or with Gradle:&lt;/p&gt;
&lt;pre&gt;&lt;code class="prettyprint groovy"&gt;plugins {&#xD;
  id &amp;#39;org.springframework.boot&amp;#39; version &amp;#39;2.6.1&amp;#39;&#xD;
  id &amp;#39;io.spring.dependency-management&amp;#39; version &amp;#39;1.0.11.RELEASE&amp;#39;&#xD;
  id &amp;#39;java&amp;#39;&#xD;
}&#xD;
&#xD;
group = &amp;#39;com.example&amp;#39;&#xD;
version = &amp;#39;0.0.1-SNAPSHOT&amp;#39;&#xD;
sourceCompatibility = &amp;#39;11&amp;#39;&#xD;
&#xD;
repositories {&#xD;
  mavenCentral()&#xD;
}&#xD;
&#xD;
ext {&#xD;
  set(&amp;#39;springCloudVersion&amp;#39;, &amp;quot;2021.0.0&amp;quot;)&#xD;
}&#xD;
&#xD;
dependencies {&#xD;
  implementation &amp;#39;org.springframework.cloud:spring-cloud-starter-config&amp;#39;&#xD;
  implementation &amp;#39;org.springframework.cloud:spring-cloud-starter-netflix-eureka-client&amp;#39;&#xD;
}&#xD;
&#xD;
dependencyManagement {&#xD;
  imports {&#xD;
    mavenBom &amp;quot;org.springframework.cloud:spring-cloud-dependencies:${springCloudVersion}&amp;quot;&#xD;
  }&#xD;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;!-- rendered by Sagan Renderer Service --&gt;</content>
  </entry>
  <entry>
    <title>Spring Cloud Function 3.2 is out!</title>
    <link rel="alternate" href="https://spring.io/blog/2021/12/02/spring-cloud-function-3-2-is-out" />
    <category term="engineering" label="Engineering" />
    <author>
      <name>Oleg Zhurakousky</name>
    </author>
    <id>tag:spring.io,2021-12-02:4629</id>
    <updated>2021-12-02T18:54:00Z</updated>
    <content type="html">&lt;p&gt;Spring Cloud &lt;a href="https://spring.io/blog/2021/12/02/spring-cloud-2021-0-0-codename-jubilee-has-been-released"&gt;2021.0.0 is finally out&lt;/a&gt; and with it you have Spring Cloud Function 3.2&lt;/p&gt;
&lt;p&gt;While the full list of features, enhancements and bug fixes is available &lt;a href="https://github.com/spring-cloud/spring-cloud-function/milestone/37?closed=1"&gt;here&lt;/a&gt;, Id like to call out few of them in this post and provide some details.&lt;/p&gt;&lt;h2&gt;&lt;a href="#grpc-support" class="anchor" name="grpc-support"&gt;&lt;/a&gt;gRPC Support&lt;/h2&gt;
&lt;p&gt;In addition to an already existing support for invoking function via &lt;a href="https://docs.spring.io/spring-cloud-function/docs/3.2.1/reference/html/aws.html"&gt;AWS Lambda&lt;/a&gt;, &lt;a href="https://github.com/spring-cloud/spring-cloud-function/tree/main/spring-cloud-function-rsocket"&gt;RSocket&lt;/a&gt;, &lt;a href="https://docs.spring.io/spring-cloud-stream/docs/3.2.1/reference/html/"&gt;Spring Cloud Stream&lt;/a&gt; etc., Spring Cloud Function now allows you to invoke function via &lt;a href="https://grpc.io/"&gt;gRPC&lt;/a&gt;.&lt;br/&gt;Two ways to benefit from it. &lt;/p&gt;&lt;h4&gt;&lt;a href="#em-spring-message-em" class="anchor" name="em-spring-message-em"&gt;&lt;/a&gt;&lt;em&gt;Spring Message&lt;/em&gt;&lt;/h4&gt;
&lt;p&gt;Given the wide adaption of &lt;em&gt;Spring Messaging&lt;/em&gt;, one way of benefiting from gRPC support is by embracing Spring&amp;rsquo;s &lt;code&gt;Message&lt;/code&gt;.&lt;br/&gt;Spring Cloud Function provides &lt;code&gt;GrpcSpringMessage&lt;/code&gt; schema modeled after Spring&amp;rsquo;s &lt;a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/messaging/Message.html"&gt;Message&lt;/a&gt;. It is internally converted to Spring Message to benefit from all of the existing support for &lt;em&gt;Spring Messaging&lt;/em&gt;. &lt;/p&gt;
&lt;pre&gt;&lt;code class="prettyprint java"&gt;message GrpcSpringMessage {&#xD;
    bytes payload = 1;&#xD;
    map&amp;lt;string, string&amp;gt; headers = 2;&#xD;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;It also defines a &lt;code&gt;MessagingService&lt;/code&gt; exposing four interaction models you can chose &lt;/p&gt;
&lt;pre&gt;&lt;code class="prettyprint java"&gt;service MessagingService {&#xD;
    rpc biStream(stream GrpcSpringMessage) returns (stream GrpcSpringMessage);&#xD;
    &#xD;
    rpc clientStream(stream GrpcSpringMessage) returns (GrpcSpringMessage);&#xD;
    &#xD;
    rpc serverStream(GrpcSpringMessage) returns (stream GrpcSpringMessage);&#xD;
    &#xD;
    rpc requestReply(GrpcSpringMessage) returns (GrpcSpringMessage);&#xD;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Both of these allow you to generate required stubs to support true plolyglot nature of gRPC while interacting with functions hosted by Spring Application Context. &lt;/p&gt;
&lt;p&gt;Here is a quick example&lt;/p&gt;
&lt;p&gt;Providing you have &lt;code&gt;spring-cloud-function-grpc&lt;/code&gt; on the classpath, here is your simplest application context configuration&lt;/p&gt;
&lt;pre&gt;&lt;code class="prettyprint java"&gt;@Configuration&#xD;
public static class SampleConfiguration {&#xD;
    public static void main(String[] args) {&#xD;
       SpringApplication.run(SampleConfiguration.class, args);&#xD;
    }     &#xD;
    @Bean&#xD;
    public Function&amp;lt;String, String&amp;gt; uppercase() {&#xD;
        return v -&amp;gt; v.toUpperCase();&#xD;
    }&#xD;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;em&gt;(Note how nothing in the code above is even remotely related to gRPC, just a standard Spring-Boot app with function bean - the true value of Spring Cloud Function)&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;And an example of one of the way you can invoke it via gRPC&lt;/p&gt;
&lt;pre&gt;&lt;code class="prettyprint java"&gt;Message&amp;lt;byte[]&amp;gt; message = MessageBuilder.withPayload(&amp;quot;\&amp;quot;hello gRPC\&amp;quot;&amp;quot;.getBytes())&#xD;
            .setHeader(&amp;quot;foo&amp;quot;, &amp;quot;bar&amp;quot;)&#xD;
            .build();&#xD;
Message&amp;lt;byte[]&amp;gt; reply = GrpcUtils.requestReply(message);
&lt;/code&gt;&lt;/pre&gt;&lt;h4&gt;&lt;a href="#em-protobuf-extensions-em" class="anchor" name="em-protobuf-extensions-em"&gt;&lt;/a&gt;&lt;em&gt;Protobuf Extensions&lt;/em&gt;&lt;/h4&gt;
&lt;p&gt;While the core data object and its corresponding schema are modeled after Spring &lt;code&gt;Message&lt;/code&gt; and can represent virtually any object, there are times when you may want to plug-in your own schema and protobuf services. Spring Cloud Function supports it by allowing you to develop your own protobuf extensions.&lt;br/&gt;Such extension is just another spring-boot project that has dependency on &lt;code&gt;spring-cloud-function-grpc&lt;/code&gt; and must provide &lt;code&gt;protoc&lt;/code&gt; generated artifacts including implementation of &lt;code&gt;io.grpc.BindableService&lt;/code&gt; and implementation of &lt;code&gt;MessageConverter&lt;/code&gt; for your message schema. Spring Cloud Function will take care of the rest. In fact we provide one such extension for &lt;a href="https://github.com/spring-cloud/spring-cloud-function/tree/main/spring-cloud-function-adapters/spring-cloud-function-grpc-cloudevent-ext"&gt;CloudEvents&lt;/a&gt; out of the box already.&lt;/p&gt;
&lt;p&gt;More details are available &lt;a href="https://github.com/spring-cloud/spring-cloud-function/tree/main/spring-cloud-function-adapters/spring-cloud-function-grpc"&gt;here&lt;/a&gt;&lt;/p&gt;&lt;h2&gt;&lt;a href="#enhanced-cloudevents-support" class="anchor" name="enhanced-cloudevents-support"&gt;&lt;/a&gt;Enhanced CloudEvents Support&lt;/h2&gt;
&lt;p&gt;Speaking of CloudEvents&amp;hellip; In version 3.1 we&amp;rsquo;ve introduces support for &lt;a href="https://cloudevents.io/"&gt;CloudEvents&lt;/a&gt; and you can read &lt;a href="https://spring.io/blog/2020/12/10/cloud-events-and-spring-part-1"&gt;part-1&lt;/a&gt; and &lt;a href="https://spring.io/blog/2020/12/10/cloud-events-and-spring-part-1"&gt;part-2&lt;/a&gt; of the blog posts on the subject.&lt;br/&gt;This release contains some additional enhancements and bug fixes as well as support for &lt;code&gt;io.cloudevents.CloudEvent&lt;/code&gt; type via integration with CloudEvents Java SDK. And to combine gRPC and CloudEvents we also provide a &lt;a href="https://github.com/spring-cloud/spring-cloud-function/tree/main/spring-cloud-function-samples/function-sample-grpc-cloudevent"&gt;dedicated example&lt;/a&gt; demonstrating CloudEvents interaction over gRPC.&lt;/p&gt;&lt;h2&gt;&lt;a href="#actuator-endpoint-into-functioncatalog" class="anchor" name="actuator-endpoint-into-functioncatalog"&gt;&lt;/a&gt;Actuator endpoint into FunctionCatalog&lt;/h2&gt;
&lt;p&gt;By now you should be all familiar with &lt;code&gt;FunctionCatalog&lt;/code&gt; as one of the core components of Spring Cloud Function. But until now the only way of interacting with it was via direct reference.&lt;br/&gt;With this release we&amp;rsquo;ve exposed actuator endpoint that allows you to access it via &lt;code&gt;http://&amp;lt;host&amp;gt;:&amp;lt;port&amp;gt;/actuator/functions&lt;/code&gt; url.&lt;br/&gt;For example, after &lt;a href="https://docs.spring.io/spring-cloud-function/docs/3.2.1/reference/html/spring-cloud-function.html#function_visualization"&gt;enabling&lt;/a&gt; &lt;code&gt;functions&lt;/code&gt; endpoint you can:&lt;/p&gt;
&lt;pre&gt;&lt;code class="prettyprint"&gt;curl http://localhost:8080/actuator/functions
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&amp;hellip;to see the output displaying the contents of your &lt;code&gt;FunctionCatalog&lt;/code&gt; and should look something like this:&lt;/p&gt;
&lt;pre&gt;&lt;code class="prettyprint text"&gt;{&amp;quot;charCounter&amp;quot;:&#xD;
	{&amp;quot;type&amp;quot;:&amp;quot;FUNCTION&amp;quot;,&amp;quot;input-type&amp;quot;:&amp;quot;string&amp;quot;,&amp;quot;output-type&amp;quot;:&amp;quot;integer&amp;quot;},&#xD;
 &amp;quot;logger&amp;quot;:&#xD;
 	{&amp;quot;type&amp;quot;:&amp;quot;CONSUMER&amp;quot;,&amp;quot;input-type&amp;quot;:&amp;quot;string&amp;quot;},&#xD;
 &amp;quot;functionRouter&amp;quot;:&#xD;
 	{&amp;quot;type&amp;quot;:&amp;quot;FUNCTION&amp;quot;,&amp;quot;input-type&amp;quot;:&amp;quot;object&amp;quot;,&amp;quot;output-type&amp;quot;:&amp;quot;object&amp;quot;},&#xD;
 &amp;quot;words&amp;quot;:&#xD;
 	{&amp;quot;type&amp;quot;:&amp;quot;SUPPLIER&amp;quot;,&amp;quot;output-type&amp;quot;:&amp;quot;string&amp;quot;}. . .
&lt;/code&gt;&lt;/pre&gt;&lt;h2&gt;&lt;a href="#aws-api-gateway-v2-improved-custom-runtime-and-support-for-native-images" class="anchor" name="aws-api-gateway-v2-improved-custom-runtime-and-support-for-native-images"&gt;&lt;/a&gt;AWS - API Gateway v2, improved Custom Runtime and support for Native images&lt;/h2&gt;&lt;h4&gt;&lt;a href="#api-gateway-v2" class="anchor" name="api-gateway-v2"&gt;&lt;/a&gt;API Gateway v2&lt;/h4&gt;
&lt;p&gt;Some of the users of Spring Cloud Function AWS integration already know that in 3.1.x we&amp;rsquo;ve migrated to a single AWS &lt;em&gt;handler&lt;/em&gt; model via &lt;code&gt;org.springframework.cloud.function.adapter.aws.FunctionInvoker&lt;/code&gt; to supports multiple AWS events. The main benefit of this approach is that you no longer need to provide a minimal implementation of AWS Handler (e.g., &lt;code&gt;RequestHandler&lt;/code&gt; or &lt;code&gt;RequestStreamHandler&lt;/code&gt; etc). All you need to do is implement your function as you would normally do and specify &lt;code&gt;org.springframework.cloud.function.adapter.aws.FunctionInvoker&lt;/code&gt; as handler when deploying it to AWS (see &lt;a href="https://docs.spring.io/spring-cloud-function/docs/3.2.1/reference/html/aws.html#_getting_started"&gt;Getting Started&lt;/a&gt; for more details).&lt;br/&gt;But &lt;em&gt;multiple&lt;/em&gt; does not imply &lt;em&gt;all&lt;/em&gt; and with this release we&amp;rsquo;ve added support for few more events, specifically &lt;code&gt;APIGatewayV2HTTPEvent&lt;/code&gt; and &lt;code&gt;APIGatewayV2HTTPResponse&lt;/code&gt;.&lt;/p&gt;&lt;h4&gt;&lt;a href="#aws-custom-runtime" class="anchor" name="aws-custom-runtime"&gt;&lt;/a&gt;AWS Custom Runtime&lt;/h4&gt;
&lt;p&gt;Although mainly internal and not visible to the end user, it is worth mentioning about the additional improvements that were made to an already existing support of &lt;a href="https://docs.aws.amazon.com/lambda/latest/dg/runtimes-custom.html"&gt;AWS Custom Runtime&lt;/a&gt; which now relies on framework provided event loop.&lt;/p&gt;&lt;h4&gt;&lt;a href="#spring-native" class="anchor" name="spring-native"&gt;&lt;/a&gt;Spring Native&lt;/h4&gt;
&lt;p&gt;And last but not least there were multiple improvements to support &lt;a href="https://github.com/spring-projects-experimental/spring-native"&gt;Spring Native&lt;/a&gt; initiative and with that we are pleased to be able to show case couple of AWS examples (&lt;a href="https://github.com/spring-projects-experimental/spring-native/tree/main/samples/cloud-function-aws"&gt;here&lt;/a&gt; and &lt;a href="https://github.com/spring-projects-experimental/spring-native/tree/main/samples/cloud-function-netty"&gt;here&lt;/a&gt;) that you can easily compile into native images and deploy to AWS and see significant performance improvements.&lt;br/&gt;For more details on AWS and Spring Native you can watch this &lt;a href="https://springone.io/2021/sessions/spring-cloud-function"&gt;Spring One presentation&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Questions - &lt;a href="https://stackoverflow.com/questions/tagged/spring-cloud-function"&gt;https://stackoverflow.com/questions/tagged/spring-cloud-function&lt;/a&gt;&lt;br/&gt;Issue Tracker - &lt;a href="https://github.com/spring-cloud/spring-cloud-function/issues"&gt;https://github.com/spring-cloud/spring-cloud-function/issues&lt;/a&gt;&lt;/p&gt;
&lt;!-- rendered by Sagan Renderer Service --&gt;</content>
  </entry>
</feed>
